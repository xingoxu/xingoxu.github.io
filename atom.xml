<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>xingo&#39;s private plot</title>
  
  <subtitle>[object Object]</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.xingoxu.com/"/>
  <updated>2020-07-09T04:27:52.519Z</updated>
  <id>https://blog.xingoxu.com/</id>
  
  <author>
    <name>xingo</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Node.js è·¯å¾„å¤§å°å†™çš„å‘</title>
    <link href="https://blog.xingoxu.com/2020/07/macos-node-require-path-case-insensitive/"/>
    <id>https://blog.xingoxu.com/2020/07/macos-node-require-path-case-insensitive/</id>
    <published>2020-07-01T10:59:40.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<p>å¤§å¤šæ•°å‰ç«¯å¼€å‘åŒå­¦éƒ½ç”¨çš„æ˜¯ macOS ï¼Œç„¶è€Œ macOS ä¸Šæ–‡ä»¶åä¸åŒºåˆ†å¤§å°å†™ï¼Œå› æ­¤ä½ ä¸èƒ½åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹åŒæ—¶åˆ›å»º <code>package.json</code> å’Œ <code>packagE.json</code>ã€‚</p><p>è¿™ä¸ªç»†èŠ‚å¾ˆå°ï¼Œå› ä¸ºå¤§å®¶ä¸æ˜¯è‹±è¯­æ¯è¯­ï¼Œç°åœ¨åˆè¶Šæ¥è¶Šä¾é  intelliSense è¡¥å…¨æ–‡ä»¶è·¯å¾„ï¼Œåœ¨è¿™ä¸ªäº‹æƒ…ä¸Šç¿»è·Ÿå¤´ä¼šæ¯”è¾ƒå°‘ï¼Œå°±ç®—ç¿»äº†è·Ÿå¤´ä¹Ÿå¾ˆå®¹æ˜“å¿˜è®°ã€‚</p><a id="more"></a><p>å¤§å¤šæ•°æƒ…å†µä¸‹ä½ åœ¨è¿™ä¸ªä¸Šè¾¹ä¼šè·Œè¿›çš„ä¸€ä¸ªå‘æ˜¯</p><h1 id="Linux-ä¸‹éƒ¨ç½²æ—¶æ‰¾ä¸åˆ°-Module"><a href="#Linux-ä¸‹éƒ¨ç½²æ—¶æ‰¾ä¸åˆ°-Module" class="headerlink" title="Linux ä¸‹éƒ¨ç½²æ—¶æ‰¾ä¸åˆ° Module"></a>Linux ä¸‹éƒ¨ç½²æ—¶æ‰¾ä¸åˆ° Module</h1><p>ä¹Ÿè®¸æ˜¯ä¹‹å‰å“ªä½é«˜äººç”¨è®°äº‹æœ¬å†™çš„ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = <span class="built_in">require</span>(<span class="string">'./List'</span>);</span><br></pre></td></tr></table></figure><p>ç„¶é¹…ç°å®ç”Ÿæ´»ä¸­ä½ çš„ List çš„æ–‡ä»¶åæ˜¯<code>list.js</code></p><p>å®Œäº†ï¼Œä½ å°±å¾—åœ¨ä½ çš„ä»£ç åº“é‡ŒæŠŠ List ç»Ÿç»Ÿæ”¹æˆ list</p><p>æ‰€ä»¥è¿™å…¶å®æ˜¯ä¸ªå¾ˆå°çš„é—®é¢˜ä¹Ÿå¾ˆå®¹æ˜“è§£å†³å°±æ˜¯æµªè´¹äº†ä¸€ç‚¹æ—¶é—´ã€‚</p><p>ä½†æˆ‘ç¢°åˆ°ä¸€ä¸ªæµªè´¹äº†æˆ‘ä¸€ä¸ªä¸‹åˆçš„é—®é¢˜ï¼Œä¹Ÿä¿ƒä½¿æˆ‘å†™äº†è¿™ç¯‡å…¶å®æ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯å«é‡çš„ç¬”è®°</p><h1 id="require-39-a-js-39-require-39-A-js-39"><a href="#require-39-a-js-39-require-39-A-js-39" class="headerlink" title="require(&#39;./a.js&#39;) !== require(&#39;./A.js&#39;)"></a><code>require(&#39;./a.js&#39;) !== require(&#39;./A.js&#39;)</code></h1><p>å‰å› åæœï¼š</p><p>åœ¨ç”¨ TypeORM å†™å¢åˆ æ”¹æŸ¥çš„æ—¶å€™ï¼Œæ–°å¼•è¿›äº†ä¸€å¼ è¡¨ï¼Œäºæ˜¯æŒ‚ä¸Šå»è°ƒè¯•ã€‚å‘ç°ä¸€ç›´æŠ¥æ‰¾ä¸åˆ°è¡¨çš„é”™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TypeORM EntityMetadataNotFound: No metadata for &quot;***&quot; was found</span><br></pre></td></tr></table></figure><p>å°±æ˜¯è¿™ä¸ªé”™ã€‚</p><p>ååå¤å¤ç¡®è®¤äº†è¡¨å·²ç»æŒ‚åˆ°äº† option ä¸‹è¾¹ã€‚</p><p>æ€ä¹ˆåŠï¼Œåªèƒ½è¿› node_modules ä¸‹è¾¹ç›´æ¥æ”¹æºç è°ƒè¯•äº†ï¼ˆ</p><p>è¿›å» <code>console.log</code> ä¸‰ä¸‹äº”é™¤äºŒï¼Œå‘ç°è¡¨ç¡®å®æŒ‚è½½äº†ï¼Œç„¶è€Œ</p><p><a href="https://github.com/typeorm/typeorm/blob/master/src/connection/Connection.ts" target="_blank" rel="noopener">https://github.com/typeorm/typeorm/blob/master/src/connection/Connection.ts</a></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Gets entity metadata for the given entity class or schema name.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">getMetadata(target: <span class="built_in">Function</span>|EntitySchema&lt;<span class="built_in">any</span>&gt;|<span class="built_in">string</span>): EntityMetadata &#123;</span><br><span class="line">    <span class="keyword">const</span> metadata = <span class="keyword">this</span>.findMetadata(target);</span><br><span class="line">    <span class="keyword">if</span> (!metadata)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> EntityMetadataNotFoundError(target);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> metadata;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Finds exist entity metadata by the given entity class, target name or table name.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> findMetadata(target: <span class="built_in">Function</span>|EntitySchema&lt;<span class="built_in">any</span>&gt;|<span class="built_in">string</span>): EntityMetadata|<span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.entityMetadatas.find(<span class="function"><span class="params">metadata</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(metadata.target, target, metadata.target === target) <span class="comment">// â†ã“ã“</span></span><br><span class="line">        <span class="keyword">if</span> (metadata.target === target)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (target <span class="keyword">instanceof</span> EntitySchema) &#123;</span><br><span class="line">            <span class="keyword">return</span> metadata.name === target.options.name;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> target === <span class="string">"string"</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (target.indexOf(<span class="string">"."</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> metadata.tablePath === target;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> metadata.name === target || metadata.tableName === target;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å·¦è¾¹å³è¾¹éƒ½æ˜¯ Function xxxï¼Œä½†æ˜¯å´ä¸å®Œå…¨ç›¸ç­‰ã€‚</p><p>äºæ˜¯æˆ‘å¼€å§‹ç–¯ç‹‚æ¯”è¾ƒä¸¤è¾¹ import çš„ä»£ç ï¼Œæœ€åæ‰å‘ç°ï¼Œimport çš„æ—¶å€™å› ä¸º Class åå’Œæ–‡ä»¶åä¸€æ ·ï¼Œæ‰€ä»¥ä¸€ä¸ªç”¨çš„æ˜¯ intelliSense è‡ªåŠ¨è¡¥å…¨ï¼Œä¸€ä¸ªæ˜¯æˆ‘å¤åˆ¶ç²˜è´´çš„ Class åï¼Œä½†æ˜¯ Class åæ˜¯é¦–å­—æ¯å¤§å†™çš„ï¼Œä½†æ–‡ä»¶åä¸æ˜¯ã€‚</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆåŒæ ·çš„æ–‡ä»¶ï¼Œå¼•ç”¨çš„æ—¶å€™æ–‡ä»¶åä¸åŒï¼Œå¼•ç”¨ä¼šä¸åŒå‘¢ï¼Ÿ</p><p><a href="https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L936" target="_blank" rel="noopener">https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L936</a></p><p>æˆ‘ä»¬éƒ½çŸ¥é“ Node.js çš„ require åªä¼šå¼•ç”¨ä¸€æ¬¡ï¼Œç©¶å…¶åŸå› æ˜¯å› ä¸º Node.js ä¼šæŠŠæ¨¡å—ç¼“å­˜åˆ°å†…å­˜é‡Œï¼Œä»¥ä¾¿å¿«é€Ÿé‡å¤è°ƒç”¨ã€‚<br>æˆ‘ä»¬åœ¨ä¸Šè¾¹çš„æºä»£ç å¯ä»¥çœ‹åˆ°ï¼ŒNode.js ä¼šä½¿ç”¨ filename è¿›è¡Œç¼“å­˜ï¼Œè€Œè¿™é‡Œçš„ filename æ˜¯ä½  require çš„æ–‡ä»¶å + ç»å¯¹è·¯å¾„ã€‚</p><p>å› æ­¤ Node.js ä¼šè®¤ä¸ºè¿™æ˜¯ä¸¤ä¸ªæ¨¡å—ï¼Œå°±ä¼šé‡å¤ require ä¸¤æ¬¡ï¼Œä½†æ˜¯å¦‚æœæ˜¯åœ¨ windows ä¸‹ï¼Œfilename ä¼šè¢« path.resolve ç»™ toLowerCase æˆä¸€ä¸ªæ¨¡å—ï¼Œåœ¨ Linux ä¸‹ï¼Œåˆä¼šå› ä¸ºå¤§å°å†™æ•æ„Ÿè€Œæ‰¾ä¸åˆ°æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯åªä¼šåœ¨ macOS ä¸Šå‡ºç°çš„ä¸€ä¸ªé—®é¢˜ã€‚</p><p>æ‰€å¹¸ä¸æ˜¯åˆ°éƒ¨ç½²æ‰å‘ç°çš„é—®é¢˜ï¼Œä¹Ÿæ‰€å¹¸è¿™ä¸ªåªä¼šåœ¨è°ƒè¯•çš„æ—¶å€™å‡ºç°é—®é¢˜ã€‚ã€‚ã€‚ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¤§å¤šæ•°å‰ç«¯å¼€å‘åŒå­¦éƒ½ç”¨çš„æ˜¯ macOS ï¼Œç„¶è€Œ macOS ä¸Šæ–‡ä»¶åä¸åŒºåˆ†å¤§å°å†™ï¼Œå› æ­¤ä½ ä¸èƒ½åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹åŒæ—¶åˆ›å»º &lt;code&gt;package.json&lt;/code&gt; å’Œ &lt;code&gt;packagE.json&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç»†èŠ‚å¾ˆå°ï¼Œå› ä¸ºå¤§å®¶ä¸æ˜¯è‹±è¯­æ¯è¯­ï¼Œç°åœ¨åˆè¶Šæ¥è¶Šä¾é  intelliSense è¡¥å…¨æ–‡ä»¶è·¯å¾„ï¼Œåœ¨è¿™ä¸ªäº‹æƒ…ä¸Šç¿»è·Ÿå¤´ä¼šæ¯”è¾ƒå°‘ï¼Œå°±ç®—ç¿»äº†è·Ÿå¤´ä¹Ÿå¾ˆå®¹æ˜“å¿˜è®°ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
      <category term="Front-End-Dev" scheme="https://blog.xingoxu.com/categories/dev/Front-End-Dev/"/>
    
    
  </entry>
  
  <entry>
    <title>Node.js ä¾å­˜ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚±ãƒ¼ã‚¹ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ã®ä»¶</title>
    <link href="https://blog.xingoxu.com/ja/2020/07/macos-node-require-path-case-insensitive/"/>
    <id>https://blog.xingoxu.com/ja/2020/07/macos-node-require-path-case-insensitive/</id>
    <published>2020-07-01T10:59:40.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<p>çš†ã•ã‚“é–‹ç™ºã®æ™‚ã»ã¨ã‚“ã© macOS ã‚’ä½¿ã£ã¦ã‚‹ã‚“ã§ã—ã‚‡ã†ã‹ã€ã ãŒ macOS ã®ãƒ•ã‚¡ã‚¤ãƒ«åã¯ã‚±ãƒ¼ã‚¹ã‚¤ãƒ³ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ï¼ˆå¤§å°æ–‡å­—ã¯åŒºåˆ¥ã—ãªã„ï¼‰ã€‚ã¤ã¾ã‚ŠåŒã˜ãƒ•ã‚©ãƒ«ãƒ€ä¸‹ã« <code>package.json</code> ã¨ <code>packagE.json</code> ã¯ä¸€ç·’ã«ã„ã‚‰ã‚Œãªã„ã€‚</p><p>ã»ã¨ã‚“ã©ã®äººã¯çŸ¥ã£ã¦ã‚‹ã‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ã‚ã¾ã‚Šã“ã‚Œã«æ³¨æ„ã‚’æ‰•ã£ã¦ãªã„ã®ã§ã¯ãªã„ã‹ãªã¨æ€ã£ã¦ã€ã ã£ã¦ã¿ã‚“ãªã®æ¯èªã¯è‹±èªã§ã¯ãªã„ã—ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®éš›ã¯ intelliSense ã‚‚çµæ§‹è³¢ãè£œè¶³ã—ã¦ã‚‚ã‚‰ã£ã¦ã‚‹ã®ã§ã€ã‚ã‚“ã¾ã‚Šã“ã“ã«è»¢ã‚“ã ã“ã¨ã¯ãªã„ã¨æ€ã„ã¾ã™ã€‚è»¢ã‚“ã§ã‚‚ã™ãå¿˜ã‚Œã‚‹ã‚“ã ã‚ã†ã€‚</p><a id="more"></a><p>ã‚ˆãä¼šã£ãŸå•é¡Œã¯ã“ã‚Œã§ã™ğŸ‘‡</p><h1 id="Linux-ã§ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯è¦‹ã¤ã‹ã‚‰ãªã„"><a href="#Linux-ã§ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯è¦‹ã¤ã‹ã‚‰ãªã„" class="headerlink" title="Linux ã§ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯è¦‹ã¤ã‹ã‚‰ãªã„"></a>Linux ã§ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯è¦‹ã¤ã‹ã‚‰ãªã„</h1><p>å¤šåˆ†èª°ãŒãƒ¡ãƒ¢å¸³ã§æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = <span class="built_in">require</span>(<span class="string">'./List'</span>);</span><br></pre></td></tr></table></figure><p>ã§ã‚‚ List ã®ãƒ•ã‚¡ã‚¤ãƒ«åã¯<code>list.js</code>ã€</p><p>ãã—ãŸã‚‰ã™ã¹ã¦ã® List ã‚’ list ã«å¤‰ãˆãªãã‚ƒã„ã‘ãªã„ã€‚</p><p>ç´°ã‹ã„ç‚¹ã§è§£æ±ºã«ã¯é›£ã—ããªã„ãŒã€æ™‚é–“ã¡ã‚‡ã£ã¨ç„¡é§„ã—ã¾ã—ãŸã­ã€‚</p><p>ã§ã‚‚ä»Šæ—¥è©±ã—ãŸã„ã®ã¯åƒ•ã®åˆå¾Œã‚’ã¾ã‚‹ã”ã¨ç„¡é§„ã—ã¾ã—ã¦ã“ã®æŠ€è¡“çš„ãªå†…å®¹ã‚ã¾ã‚Šãªã„è¨˜äº‹ã‚’æ›¸ãã“ã¨ã«ãªã£ãŸã“ã‚Œã§ã™ğŸ‘‡</p><h1 id="require-39-a-js-39-require-39-A-js-39"><a href="#require-39-a-js-39-require-39-A-js-39" class="headerlink" title="require(&#39;./a.js&#39;) !== require(&#39;./A.js&#39;)"></a><code>require(&#39;./a.js&#39;) !== require(&#39;./A.js&#39;)</code></h1><p>TypeORM ã‚’ä½¿ã£ã¦ã‚‹æ™‚æ–°ã—ã„ã‚¹ã‚­ãƒ¼ãƒï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰ã‚’å…¥ã‚ŒãŸãŒã€ãƒ‡ãƒãƒƒã‚°ã®æ™‚ãšãƒ¼ã¨ãã®ã‚¹ã‚­ãƒ¼ãƒãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‚¨ãƒ©ãƒ¼ã«æ€’ã‚‰ã‚Œã¦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TypeORM EntityMetadataNotFound: No metadata for &quot;***&quot; was found</span><br></pre></td></tr></table></figure><p>option ã«ä½•åº¦ã‚‚ç¢ºèªã—ã¾ã—ã¦ç¢ºã‹ã«ã‚¹ã‚­ãƒ¼ãƒã¯å…¥ã£ã¦ã‚‹ãŒã€‚</p><p>ã©ã†ã—ã‚ˆã†ã¨æ€ã£ã¦ã€ node_modules ã«å…¥ã£ã¦ç›´æ¥ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æ”¹ã–ã‚“ã—ã¦ãƒ‡ãƒãƒƒã‚°ã™ã‚‹ã“ã¨ã«ãªã£ãŸã€‚</p><p><code>console.log</code> ã§ã‚¹ã‚­ãƒ¼ãƒã¯ãŸã—ã‹ã«å…¥ã£ã¦ã¾ã™ãŒã€</p><p><a href="https://github.com/typeorm/typeorm/blob/master/src/connection/Connection.ts" target="_blank" rel="noopener">https://github.com/typeorm/typeorm/blob/master/src/connection/Connection.ts</a></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Gets entity metadata for the given entity class or schema name.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">getMetadata(target: <span class="built_in">Function</span>|EntitySchema&lt;<span class="built_in">any</span>&gt;|<span class="built_in">string</span>): EntityMetadata &#123;</span><br><span class="line">    <span class="keyword">const</span> metadata = <span class="keyword">this</span>.findMetadata(target);</span><br><span class="line">    <span class="keyword">if</span> (!metadata)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> EntityMetadataNotFoundError(target);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> metadata;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Finds exist entity metadata by the given entity class, target name or table name.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> findMetadata(target: <span class="built_in">Function</span>|EntitySchema&lt;<span class="built_in">any</span>&gt;|<span class="built_in">string</span>): EntityMetadata|<span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.entityMetadatas.find(<span class="function"><span class="params">metadata</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(metadata.target, target, metadata.target === target) <span class="comment">// â†ã“ã“</span></span><br><span class="line">        <span class="keyword">if</span> (metadata.target === target)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (target <span class="keyword">instanceof</span> EntitySchema) &#123;</span><br><span class="line">            <span class="keyword">return</span> metadata.name === target.options.name;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> target === <span class="string">"string"</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (target.indexOf(<span class="string">"."</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> metadata.tablePath === target;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> metadata.name === target || metadata.tableName === target;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å·¦ã¨å³ã¯åŒã˜ã <code>Function xxx</code> ãŒãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¯åŒã˜ã§ã¯ãªã„ã€‚</p><p>ã“ã‚Œã¯äº‹ä»¶ã§ã™ã­ã€‚ã‚“ã§ãƒ•ã‚¡ã‚¤ãƒ«ä¸¡æ–¹ã® import ã‚’ä¸€è¡Œä¸€è¡Œã§ç¢ºèªã—ã¦ã€æœ€çµ‚çš„ã« import ã®ãƒ‘ã‚¹ã«å•é¡Œã‚’è¦‹ã¤ã‹ã£ãŸã€‚<br>è‡ªåˆ†ãŒã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸéš›ã«ã€ä¸€ã¤ã¯ Class åã‚’ãã®ã¾ã¾ã‚³ãƒ”ãƒšã—ãŸãŒã€ã‚‚ã†ä¸€ã¤ã¯ãƒ•ã‚¡ã‚¤ãƒ«åã§ã—ãŸãŒã€Class åã¯ PascalCase ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«åã¯ camelCase ã§ã—ãŸã€‚</p><p>ãã—ãŸã‚‰ãªãœåŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã§ä½¿ã†æ™‚ãƒ•ã‚¡ã‚¤ãƒ«åãŒé•ã£ãŸã‚‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¯é•ã†ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ</p><p>Node.js ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«è¦‹ã¦ãã¾ã—ãŸã€‚<br><a href="https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L936" target="_blank" rel="noopener">https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L936</a></p><p>Node.js ã® require ã¯ä¸€å›ã—ã‹å®Ÿè¡Œã—ãªã„ã€ãã®åŸå› ã¯ Node.js ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ¡ãƒ¢ãƒªã«ä¿å­˜ã—ã¦ã€ãã®å¾Œã‚³ãƒ¼ãƒ‰ã®ä¸­ã§ require ã—ãŸã‚‰ã™ãä½¿ãˆã‚‹ã¨ã„ã†æ„å›³ã§è¨­è¨ˆã•ã‚Œã¾ã—ãŸã€‚<br>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã‚‚è¦‹ãˆã¦ã€Node.js ã¯ãƒ•ã‚¡ã‚¤ãƒ«åã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¾ã™ãŒã€ã“ã“ã® filename ã¯ require ã®ãƒ•ã‚¡ã‚¤ãƒ«å + çµ¶å¯¾ãƒ‘ã‚¹ã€‚</p><p>ãªã®ã§ Node.js ã¯ï¼’ã¤ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã¿ãªã™ãŒã€windows ã ã¨ã€ filename ã¯ path.resolve ã§ toLowerCase ã§åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«åã«ã™ã‚‹ãŒã€Linux ã ã¨ã‚±ãƒ¼ã‚¹ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¦‹ã¤ã‹ã‚‰ãªã„ã§å¼¾ã‹ã‚Œã¾ã™ãŒã€ã“ã®å•é¡Œã¯ macOS ã—ã‹å‡ºã¾ã›ã‚“ã­ã€‚</p><p>ã¾ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§å•é¡Œå‡ºã‚‹ã‚ˆã‚Šãƒ©ãƒƒã‚­ãƒ¼ã§ã™ã­ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;çš†ã•ã‚“é–‹ç™ºã®æ™‚ã»ã¨ã‚“ã© macOS ã‚’ä½¿ã£ã¦ã‚‹ã‚“ã§ã—ã‚‡ã†ã‹ã€ã ãŒ macOS ã®ãƒ•ã‚¡ã‚¤ãƒ«åã¯ã‚±ãƒ¼ã‚¹ã‚¤ãƒ³ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ï¼ˆå¤§å°æ–‡å­—ã¯åŒºåˆ¥ã—ãªã„ï¼‰ã€‚ã¤ã¾ã‚ŠåŒã˜ãƒ•ã‚©ãƒ«ãƒ€ä¸‹ã« &lt;code&gt;package.json&lt;/code&gt; ã¨ &lt;code&gt;packagE.json&lt;/code&gt; ã¯ä¸€ç·’ã«ã„ã‚‰ã‚Œãªã„ã€‚&lt;/p&gt;
&lt;p&gt;ã»ã¨ã‚“ã©ã®äººã¯çŸ¥ã£ã¦ã‚‹ã‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ã‚ã¾ã‚Šã“ã‚Œã«æ³¨æ„ã‚’æ‰•ã£ã¦ãªã„ã®ã§ã¯ãªã„ã‹ãªã¨æ€ã£ã¦ã€ã ã£ã¦ã¿ã‚“ãªã®æ¯èªã¯è‹±èªã§ã¯ãªã„ã—ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®éš›ã¯ intelliSense ã‚‚çµæ§‹è³¢ãè£œè¶³ã—ã¦ã‚‚ã‚‰ã£ã¦ã‚‹ã®ã§ã€ã‚ã‚“ã¾ã‚Šã“ã“ã«è»¢ã‚“ã ã“ã¨ã¯ãªã„ã¨æ€ã„ã¾ã™ã€‚è»¢ã‚“ã§ã‚‚ã™ãå¿˜ã‚Œã‚‹ã‚“ã ã‚ã†ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
      <category term="Front-End-Dev" scheme="https://blog.xingoxu.com/categories/dev/Front-End-Dev/"/>
    
    
  </entry>
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯ CLSï¼Ÿåœ¨æµè§ˆå™¨å’Œ Node.js ä¸­å®ç° CLS</title>
    <link href="https://blog.xingoxu.com/2020/06/cls/"/>
    <id>https://blog.xingoxu.com/2020/06/cls/</id>
    <published>2020-06-29T11:48:05.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å†™ Flutter å’Œ Serverless æŸ¥èµ„æ–™çš„æ—¶å€™ï¼Œåœ¨æŸä¸ªåšå®¢é‡Œçœ‹åˆ°äº† CLS çš„ç›¸å…³å†…å®¹ï¼Œæ„Ÿè§‰å…¶å®æ˜¯ä¸ªå¾ˆä¸é”™çš„è½¯ä»¶å·¥ç¨‹çš„è§£è€¦æƒ³æ³•ï¼Œäºæ˜¯ä¿å­˜äº†ä¸‹æ¥ã€‚ä»Šå¤©å›è¿‡å¤´æ¥ä»”ç»†ç ”ç©¶äº†ä¸€ä¸‹å¹¶å†³å®šç»™è‡ªå·±ç•™ä¸‹ä¸€äº›è®°å½•ã€‚</p><a id="more"></a><h1 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h1><p>æ— è®ºæ˜¯åœ¨æµè§ˆå™¨ï¼Œè¿˜æ˜¯åœ¨æœåŠ¡ç«¯ Node.jsï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°æ‰“ç‚¹ä¸ŠæŠ¥ï¼Œè¿½è¸ªé”™è¯¯è¿™æ ·çš„éœ€æ±‚ï¼Œå³ä½¿ä¸å¯¹ç‰¹å®šç”¨æˆ·è¿›è¡Œè¿½è¸ªï¼Œæˆ‘ä»¬ä¹Ÿä¼šç»™æŸä¸ª session åˆ†é…å”¯ä¸€ ID ä»¥åœ¨ log / analytics ç•Œé¢èƒ½å¤Ÿçœ‹åˆ°ç”¨æˆ·çš„å®Œæ•´è¡Œä¸ºï¼Œå¯¹äºäº§å“åˆ†æä¸é”™è¯¯å†ç°æ˜¯ååˆ†é‡è¦çš„ã€‚</p><p>å‡è®¾æˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ª error handling ï¼Œè¿™ä¸ª error handling ä¼š hold ä½æ‰€æœ‰çš„è¯·æ±‚çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬å¦‚ä½•åˆ†è¾¨å“ªä¸ªé”™è¯¯æ˜¯å“ªä¸ªè¯·æ±‚é€ æˆçš„å‘¢ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log.error(<span class="string">"Error occured"</span>, req);</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆè¿™ä¸ª error handling å°±è·Ÿ req è€¦åˆäº†</p><p>å‡è®¾æˆ‘ä»¬éœ€è¦è¿½è¸ªæŸä¸ªé”™è¯¯ï¼Œæ˜¯å“ªä¸ª user äº§ç”Ÿçš„ï¼Œåˆæˆ–è€…æ˜¯å“ªä¸ªé”™è¯¯ï¼Œuser å¹²äº†ä»€ä¹ˆå¯¼è‡´çš„ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">log.info(<span class="string">"User has done xxx"</span>, user);</span><br><span class="line">log.error(<span class="string">"Error occured by"</span>, user);</span><br></pre></td></tr></table></figure><p>äºæ˜¯è·Ÿ user ä¹Ÿæ·±æ·±çš„è€¦åˆäº†ã€‚</p><p>å•å•è¿™æ ·çš„ä¾‹å­å¥½åƒæ²¡æœ‰ä»€ä¹ˆå¤§é—®é¢˜ï¼Œä¸è¿‡å¤šä¸¤ä¸ªå‚æ•°å˜›ã€‚ä½†å†™è¿‡å¤§å‹åº”ç”¨çš„åŒå­¦ï¼ŒåæœŸä¸æ–­å¢åŠ åŠŸèƒ½çš„æ—¶å€™ï¼Œä½ ä¸€å®šå†™è¿‡é‚£ç§é•¿é•¿çš„å‚æ•°åˆ—è¡¨çš„å‡½æ•°ï¼Œåˆæˆ–è€…æ˜¯å¥½å‡ ç™¾è¡Œçš„ä¸€ä¸ªå‡½æ•°ï¼Œå®åœ¨æ˜¯å¤ªä¸ä¼˜é›…ï¼Œé‡æ„èµ·æ¥ä¹Ÿå¤ªéš¾ã€‚</p><h1 id="å°è¯•è§£å†³"><a href="#å°è¯•è§£å†³" class="headerlink" title="å°è¯•è§£å†³"></a>å°è¯•è§£å†³</h1><p>å‡½æ•°å¦‚æœæ˜¯åŒæ­¥çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥æŒ‚åˆ°å…¨å±€å˜é‡ï¼ˆæŸä¸ªå¯¹è±¡ï¼‰ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> global = &#123;&#125;;</span><br><span class="line">$(<span class="string">"button"</span>).click(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  global.event = event;</span><br><span class="line">  log(<span class="string">"button clicked"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(global.event, ...args); <span class="comment">// &#123; x: xxx, y: xxx, target: xxx &#125; 'button clicked'</span></span><br><span class="line">  <span class="comment">// other logic</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ˜¾ç„¶è¿™åœ¨å¼‚æ­¥ä¸­è¡Œä¸é€š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> global = &#123;&#125;;</span><br><span class="line">$(<span class="string">"button"</span>).click(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  global.event = event;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    log(<span class="string">"button clicked"</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(global.event, ...args);</span><br><span class="line">  <span class="comment">// other logic</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½ ä¼šå‘ç°æ‰“å°çš„ global.event å…¨å˜æˆäº†åŒä¸€ä¸ªå¯¹è±¡</p><p>æˆ‘ä»¬éœ€è¦èƒ½å¤Ÿä»å§‹è‡³ç»ˆåœ¨åŒä¸€ä¸ªå¼‚æ­¥è°ƒç”¨é“¾ä¸­ä¸€ä¸ªæŒç»­åŒ–çš„å­˜å‚¨ï¼Œ<br>åˆæˆ–è€…æ˜¯æˆ‘ä»¬éœ€è¦èƒ½å¤Ÿè¾¨è¯†å½“å‰çš„å¼‚æ­¥å‡½æ•°ä»–çš„å”¯ä¸€è¾¨è¯†ç¬¦ï¼Œä»¥å’ŒåŒæ ·å†…å®¹çš„å¼‚æ­¥å‡½æ•°ä½†å¹¶ä¸æ˜¯æœ¬èº«çš„è¿è¡Œçš„è¿™ä¸ªä½œåŒºåˆ†ã€‚</p><h1 id="CLS-ç™»åœº"><a href="#CLS-ç™»åœº" class="headerlink" title="CLS ç™»åœº"></a>CLS ç™»åœº</h1><p>åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œæœ‰ä¸€ä¸ªå«åš <a href="https://en.wikipedia.org/wiki/Thread-local_storage" target="_blank" rel="noopener">Thread-local storage</a> çš„ä¸œè¥¿ï¼Œç„¶è€Œåœ¨ Javascript ä¸­ï¼Œå¹¶ä¸å­˜åœ¨å¤šçº¿ç¨‹è¿™ç§æ¦‚å¿µï¼ˆç›¸å¯¹è€Œè¨€ï¼ŒWeb Worker ç­‰ä¸ä¸»è¿›ç¨‹å¹¶ä¸å†²çªï¼‰ï¼Œäºæ˜¯ CLS ï¼ŒContinuation-local Storageï¼Œä¸€ä¸ªç±»ä¼¼äº TLSï¼Œå¾—åäºå‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ Continuation-passing styleï¼Œæ—¨åœ¨é“¾å¼å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­ç»´æŠ¤ä¸€ä¸ªæŒä¹…çš„æ•°æ®ã€‚</p><h2 id="æµè§ˆå™¨çš„è§£å†³æ–¹æ¡ˆ-Zone-js"><a href="#æµè§ˆå™¨çš„è§£å†³æ–¹æ¡ˆ-Zone-js" class="headerlink" title="æµè§ˆå™¨çš„è§£å†³æ–¹æ¡ˆ Zone.js"></a>æµè§ˆå™¨çš„è§£å†³æ–¹æ¡ˆ Zone.js</h2><p>å…ˆçœ‹çœ‹æ˜¯æ€ä¹ˆè§£å†³çš„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click(<span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  Zone.current.fork(&#123;</span><br><span class="line">    name: <span class="string">'clickZone'</span>,</span><br><span class="line">    properties: &#123;</span><br><span class="line">      event</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).run(</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      log(<span class="string">'button clicked'</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(global.event, ...args);</span><br><span class="line">  <span class="comment">// other logic</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/angular/angular/tree/master/packages/zone.js" target="_blank" rel="noopener"><code>Zone.js</code></a> æ˜¯ Angular 2.0 å¼•å…¥çš„ï¼Œå½“ç„¶å®ƒçš„åŠŸèƒ½ä¸åªæ˜¯æä¾› CLSï¼Œä»–è¿˜æœ‰å…¶ä»–ç›¸å…³ APIã€‚</p><h3 id="ä¸€ä¸ªå¹¶ä¸å®Œç¾çš„è§£å†³æ–¹æ¡ˆ"><a href="#ä¸€ä¸ªå¹¶ä¸å®Œç¾çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ä¸€ä¸ªå¹¶ä¸å®Œç¾çš„è§£å†³æ–¹æ¡ˆ"></a>ä¸€ä¸ªå¹¶ä¸å®Œç¾çš„è§£å†³æ–¹æ¡ˆ</h3><p>æˆ‘ä»¬è¯•ç€æ€è€ƒä¸€ä¸‹ï¼Œ <code>Zone.js</code> æ˜¯å¦‚ä½•åšåˆ°è¿™äº›çš„ã€‚å¦‚æœæµè§ˆå™¨æ²¡æœ‰æä¾›å¼‚æ­¥å‡½æ•°è¿è¡Œç¯å¢ƒçš„å”¯ä¸€æ ‡è¯†ï¼Œé‚£ä¹ˆåªå‰©ä¸‹å”¯ä¸€çš„ä¸€æ¡è·¯ï¼Œæ”¹å†™æ‰€æœ‰ä¼šäº§ç”Ÿå¼‚æ­¥çš„å‡½æ•°ï¼ŒåŒ…è£…äº†ä¸€å±‚åä¹Ÿå°±èƒ½åŠ å…¥hookäº†ã€‚</p><p>æˆ‘å°è¯•è‡ªå·±å†™äº†ä¸€ä¸‹</p><!-- https://gist.github.com/xingoxu/58f8f7faa83732ec922fcd38299f3283 --><script src="https://gist.github.com/xingoxu/58f8f7faa83732ec922fcd38299f3283.js"></script><p>çœ‹ä¼¼å¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä¸è¿‡</p><p><a href="https://github.com/angular/angular/issues/31730" target="_blank" rel="noopener">angular with tsconfig target ES2017 async/await will not work with zone.js</a></p><h4 id="æµè§ˆå™¨ä¸­ç°åœ¨å¹¶æ²¡æœ‰å®Œç¾çš„è§£å†³æ–¹æ¡ˆ"><a href="#æµè§ˆå™¨ä¸­ç°åœ¨å¹¶æ²¡æœ‰å®Œç¾çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="æµè§ˆå™¨ä¸­ç°åœ¨å¹¶æ²¡æœ‰å®Œç¾çš„è§£å†³æ–¹æ¡ˆ"></a>æµè§ˆå™¨ä¸­ç°åœ¨å¹¶æ²¡æœ‰å®Œç¾çš„è§£å†³æ–¹æ¡ˆ</h4><p>æˆ‘ä»¬å¯ä»¥åšä¸ªå®éªŒï¼Œåœ¨ console é‡Œæ•²ä¸‹å¦‚ä¸‹ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _promise = <span class="built_in">Promise</span>;</span><br><span class="line"><span class="built_in">Promise</span> = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">'rewrite by ourselves'</span>) &#125;;</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;) <span class="keyword">instanceof</span> <span class="built_in">Promise</span></span><br><span class="line"><span class="comment">// rewrite by ourselves</span></span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">test() <span class="keyword">instanceof</span> <span class="built_in">Promise</span></span><br><span class="line"><span class="comment">// false</span></span><br><span class="line">test() <span class="keyword">instanceof</span> _promise</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>() &#125;</span><br><span class="line"></span><br><span class="line">test() <span class="keyword">instanceof</span> <span class="built_in">Promise</span></span><br><span class="line"><span class="comment">// rewrite by ourselves</span></span><br><span class="line"><span class="comment">// false</span></span><br><span class="line">test() <span class="keyword">instanceof</span> _promise</span><br><span class="line"><span class="comment">// rewrite by ourselves</span></span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´æµè§ˆå™¨ä¼šæŠŠ async å‡½æ•°çš„è¿”å›å€¼ç”¨åŸç”Ÿ Promise åŒ…è£…ä¸€å±‚ï¼Œå› ä¸ºæ˜¯åŸç”Ÿè¯­æ³•ï¼Œä¹Ÿå°±æ— æ³• hook async å‡½æ•°ã€‚<br>å½“ç„¶æˆ‘ä»¬å¯ä»¥ç”¨ transpiler æŠŠ async å‡½æ•°æ”¹å†™æˆ generator æˆ–è€… Promiseï¼Œä¸è¿‡è¿™å¹¶ä¸ä»£è¡¨æ˜¯å®Œç¾çš„ã€‚</p><h2 id="Node-js-çš„è§£å†³æ–¹æ¡ˆ-async-hooks"><a href="#Node-js-çš„è§£å†³æ–¹æ¡ˆ-async-hooks" class="headerlink" title="Node.js çš„è§£å†³æ–¹æ¡ˆ async_hooks"></a>Node.js çš„è§£å†³æ–¹æ¡ˆ async_hooks</h2><p>Node.js 8åå‡ºç°çš„ <code>async_hook</code> æ¨¡å—ï¼Œåˆ°äº†ç‰ˆæœ¬14ä»ç„¶æ²¡æœ‰ç§»å»ä»–èº«ä¸Šçš„ <code>Experimental</code> çŠ¶æ€ã€‚ä»¥åŠåœ¨åˆšå‡ºç°çš„æ—¶å€™æ˜¯æœ‰æ€§èƒ½é—®é¢˜çš„è®¨è®ºï¼ˆ3å¹´åçš„ä»Šå¤©è™½ç„¶ä¸çŸ¥é“æ€§èƒ½æ€ä¹ˆæ ·ï¼Œä¸è¿‡æ—¢ç„¶æ²¡æœ‰ç§»å» <code>Experimental</code> çš„æ ‡ç­¾ï¼Œå¦‚æœè¿½æ±‚é«˜æ€§èƒ½çš„è¯è¿˜æ˜¯åº”è¯¥ä¿æŒè§‚æœ›ï¼‰</p><blockquote><p>è™½ç„¶æ²¡æœ‰ç§»å» Experimental çš„çŠ¶æ€ï¼Œä½†æ˜¯ç¨³å®šæ€§åº”è¯¥æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§é—®é¢˜ï¼Œå¤§é‡çš„ Node.js çš„è¿½è¸ªåº“ / APM ä¾èµ–ç€ async_hooks æ¨¡å—ï¼Œå¦‚æœæœ‰é‡å¤§é—®é¢˜ï¼Œåº”è¯¥ä¼šåŠæ—¶ä¸ŠæŠ¥å¹¶ä¿®å¤</p></blockquote><p>å¯¹äºæ€§èƒ½é—®é¢˜ï¼Œä¸å±•å¼€ç¯‡å¹…è®¨è®ºï¼Œå–å†³äºä½ æ˜¯å¦æ„¿æ„èŠ±ä¸€ç‚¹ç‚¹çš„æ€§èƒ½ä¸‹é™æ¥æ¢å–ä»£ç çš„ä½è€¦åˆã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h3><p>async_hooks æä¾›äº†ä¸€ä¸ª createHook çš„å‡½æ•°ï¼Œä»–å¯ä»¥å¸®åŠ©ä½ ç›‘å¬å¼‚æ­¥å‡½æ•°çš„è¿è¡Œæ—¶åˆ›å»ºä»¥åŠé€€å‡ºç­‰çŠ¶æ€ï¼Œå¹¶ä¸”é™„å¸¦äº†è¿™ä¸ªè¿è¡Œæ—¶çš„å”¯ä¸€è¾¨è¯†idï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°ç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ª CLSã€‚</p><!-- https://gist.github.com/xingoxu/590e7f99658ea160b1f77cdb4e956637 --><script src="https://gist.github.com/xingoxu/590e7f99658ea160b1f77cdb4e956637.js"></script><h3 id="Node-js-13-åçš„å®˜æ–¹å®ç°"><a href="#Node-js-13-åçš„å®˜æ–¹å®ç°" class="headerlink" title="Node.js 13 åçš„å®˜æ–¹å®ç°"></a>Node.js 13 åçš„å®˜æ–¹å®ç°</h3><p>åœ¨ç¤¾åŒºä¸­å·²ç»æœ‰äº†é‚£ä¹ˆå¤šä¼˜ç§€å®ç°çš„å‰æä¸‹ï¼ŒNode.js 13.10 åæ–°å¢äº†ä¸€ä¸ª <code>AsyncLocalStorage</code> çš„ API</p><p><a href="https://nodejs.org/api/async_hooks.html#async_hooks_class_asynclocalstorage" target="_blank" rel="noopener">https://nodejs.org/api/async_hooks.html#async_hooks_class_asynclocalstorage</a></p><p>å®é™…ä¸Šä»–å·²ç»æ˜¯å¼€ç®±å¯ç”¨çš„ CLS äº†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  AsyncLocalStorage,</span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">"async_hooks"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> session = <span class="keyword">new</span> AsyncLocalStorage();</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">_req, _res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> userId = <span class="built_in">Math</span>.random() * <span class="number">1000</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(userId);</span><br><span class="line">  session.enterWith(&#123; userId &#125;);</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    next();</span><br><span class="line">  &#125;, userId);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">_req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; userId &#125; = session.getStore();</span><br><span class="line">  res.json(&#123; userId &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Listen 3000"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fetch = <span class="built_in">require</span>(<span class="string">'node-fetch'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10</span>).fill(<span class="number">0</span>).forEach(<span class="function">(<span class="params">_, i</span>) =&gt;</span> fetch(<span class="string">'http://localhost:3000/test'</span>, &#123;</span><br><span class="line">  method: <span class="string">'GET'</span>,</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> res.json()).then(<span class="built_in">console</span>.log))</span><br><span class="line"></span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// Listen 3000</span></span><br><span class="line"><span class="comment">// 355.9573987560112</span></span><br><span class="line"><span class="comment">// 548.3773445851497</span></span><br><span class="line"><span class="comment">// 716.2437886469793</span></span><br><span class="line"><span class="comment">// 109.84756385607896</span></span><br><span class="line"><span class="comment">// 907.6261832949347</span></span><br><span class="line"><span class="comment">// 308.34659685842513</span></span><br><span class="line"><span class="comment">// 407.0145853469649</span></span><br><span class="line"><span class="comment">// 525.820449114568</span></span><br><span class="line"><span class="comment">// 76.91502437038133</span></span><br><span class="line"><span class="comment">// 997.8611964598299</span></span><br><span class="line"><span class="comment">// &#123; userId: 76.91502437038133 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 109.84756385607896 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 308.34659685842513 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 355.9573987560112 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 407.0145853469649 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 525.820449114568 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 548.3773445851497 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 716.2437886469793 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 907.6261832949347 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 997.8611964598299 &#125;</span></span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://juejin.im/post/5e23f89f6fb9a02fcf18e24a" target="_blank" rel="noopener">Javascriptä¸CLSï¼ˆContinuation-local Storageï¼‰</a></li><li><a href="https://zhuanlan.zhihu.com/p/50835920" target="_blank" rel="noopener">ç¿»é˜…æºç åï¼Œæˆ‘ç»ˆäºç†è§£äº†Zone.js</a></li><li><a href="https://shanyue.tech/node/cls.html#async-hooks" target="_blank" rel="noopener">ä½¿ç”¨ async_hooks ç›‘å¬å¼‚æ­¥èµ„æºçš„ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="https://blog.xizhibei.me/2018/04/07/distributed-tracing/" target="_blank" rel="noopener">åˆ†å¸ƒå¼è¿½è¸ª</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨å†™ Flutter å’Œ Serverless æŸ¥èµ„æ–™çš„æ—¶å€™ï¼Œåœ¨æŸä¸ªåšå®¢é‡Œçœ‹åˆ°äº† CLS çš„ç›¸å…³å†…å®¹ï¼Œæ„Ÿè§‰å…¶å®æ˜¯ä¸ªå¾ˆä¸é”™çš„è½¯ä»¶å·¥ç¨‹çš„è§£è€¦æƒ³æ³•ï¼Œäºæ˜¯ä¿å­˜äº†ä¸‹æ¥ã€‚ä»Šå¤©å›è¿‡å¤´æ¥ä»”ç»†ç ”ç©¶äº†ä¸€ä¸‹å¹¶å†³å®šç»™è‡ªå·±ç•™ä¸‹ä¸€äº›è®°å½•ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
      <category term="Front-End-Dev" scheme="https://blog.xingoxu.com/categories/dev/Front-End-Dev/"/>
    
    
  </entry>
  
  <entry>
    <title>CLS ã¨ã¯ï¼Ÿãƒ–ãƒ©ã‚¦ã‚¶ã¨Node.jsã§ CLS ã‚’å®Ÿè£…ã—ã¦ã¿ã¾ã™</title>
    <link href="https://blog.xingoxu.com/ja/2020/06/cls/"/>
    <id>https://blog.xingoxu.com/ja/2020/06/cls/</id>
    <published>2020-06-29T11:48:05.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<p>è³‡æ–™ã‚’èª¿ã¹ã‚‹éš›ã«ã€CLS ã®å­˜åœ¨ã‚’çŸ¥ã‚Šã¾ã—ãŸã€‚ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã§çµæ§‹ã„ã„ãƒ‡ã‚«ãƒƒãƒ—ãƒªãƒ³ã‚°ã®ã‚„ã‚Šæ–¹ã¨æ„Ÿã˜ã¾ã—ã¦ã€ã‚·ã‚§ã‚¢ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><a id="more"></a><h1 id="ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³"><a href="#ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³" class="headerlink" title="ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³"></a>ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³</h1><p>ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã€ã‚µãƒ¼ãƒãƒ¼ã®Node.jsã‹ã€ã©ã£ã¡ã§ã‚‚ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã®ãƒ‹ãƒ¼ã‚ºã¯æ—¥å¸¸èŒ¶é£¯äº‹ã€‚ä¾‹ãˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç‰¹å®šã—ãªãã¦ã‚‚ã€id ã‚’ã¤ã‘ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¡Œç‚ºã‚’è¿½è·¡ã—ã¦ã€ã‚¨ãƒ©ãƒ¼ã®å†ç¾ã«ã‚‚é‡è¦ã—ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ”¹å–„ã«ã‚‚å½¹ãŸã¡ã¾ã™ã€‚</p><p>ä»®ã«ä»Šã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’æ›¸ã“ã†ã¨æ€ã£ã¦ã€ã“ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯ã™ã¹ã¦ã®ã‚¨ãƒ©ãƒ¼ã‚’å‡¦ç†ã—ã¾ã™ãŒã€ã©ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰ç”Ÿã¿å‡ºã—ãŸã‚¨ãƒ©ãƒ¼ã‚’çŸ¥ã‚ŠãŸã„ã¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log.error(<span class="string">"Error occured"</span>, req);</span><br></pre></td></tr></table></figure><p>ã“ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯ req ã¨çµåˆã—ã¡ã‚ƒã£ãŸ</p><p>ä»®ã«ä»Šã“ã®ã‚¨ãƒ©ãƒ¼ã©ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰å‡ºãŸã‚¨ãƒ©ãƒ¼ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½•ã‚’ã‚„ã£ãŸã‹ã‚’çŸ¥ã‚ŠãŸã„ã¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">log.info(<span class="string">"User has done xxx"</span>, user);</span><br><span class="line">log.error(<span class="string">"Error occured by"</span>, user);</span><br></pre></td></tr></table></figure><p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã‚‚çµåˆã—ã¡ã‚ƒã£ãŸ</p><p>ã“ã®ï¼’ã¤ã®ä¾‹ã¯ä¸€è¦‹ã™ã‚‹ã¨ãã‚“ãªã«å¤§ãã„ãªå•é¡Œã§ã¯ãªã•ãã†ã€ãŸã ï¼’ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå¢—ãˆãŸã ã‘ã˜ã‚ƒã€‚<br>ã ã‘ã©ã€å¤§å‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã‚‹æ™‚ã€ã©ã‚“ã©ã‚“å¢—ãˆãŸæ©Ÿèƒ½ã«å¯¾ã—ã¦ã€é–¢æ•°ã®å¼•æ•°ã¨é–¢æ•°ã®é•·ã•ã¨å…±ã«ã©ã‚“ã©ã‚“ä¼¸ã³ã¡ã‚ƒã£ã¦æ°—æŒã¡æ‚ªãã¦ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ã‚ˆã†ã¨ã—ã‚‡ã†ã‚‚ãªã„ã“ã¨ã€å°‘ãªãã‚ã‚Šã¾ã›ã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p><h1 id="è§£æ±ºã—ã¦ã¿ã‚ˆã†"><a href="#è§£æ±ºã—ã¦ã¿ã‚ˆã†" class="headerlink" title="è§£æ±ºã—ã¦ã¿ã‚ˆã†"></a>è§£æ±ºã—ã¦ã¿ã‚ˆã†</h1><p>é–¢æ•°ãŒåŒæœŸã®ã§ã‚ã‚Œã°ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã§å¤‰æ•°ã«ã¤ã‘ãŸã‚‰ã„ã„ã˜ã‚ƒã‚“ãƒ¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> global = &#123;&#125;;</span><br><span class="line">$(<span class="string">"button"</span>).click(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  global.event = event;</span><br><span class="line">  log(<span class="string">"button clicked"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(global.event, ...args); <span class="comment">// &#123; x: xxx, y: xxx, target: xxx &#125; 'button clicked'</span></span><br><span class="line">  <span class="comment">// other logic</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã ãŒã€éåŒæœŸé–¢æ•°ã®ã§ã‚ã‚Œã°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> global = &#123;&#125;;</span><br><span class="line">$(<span class="string">"button"</span>).click(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  global.event = event;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    log(<span class="string">"button clicked"</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(global.event, ...args);</span><br><span class="line">  <span class="comment">// other logic</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã™ã¹ã¦ã® global.event ã¯åŒã˜ã‚¤ãƒ™ãƒ³ãƒˆã«ãªã¡ã‚ƒã£ãŸ(Â´ï¼›Ï‰ï¼›ï½€)ï¼ãã‚Œã¯ã ã‚ã§ã™ã­ã€‚</p><p>æˆ‘ã€…å¿…è¦ãªã®ã¯éåŒæœŸå‘¼ã³å‡ºã—ãƒã‚§ãƒ¼ãƒ³ã«æœ€åˆã‹ã‚‰æœ€å¾Œã¾ã§æŒç¶šçš„ãªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€<br>ã‚‚ã—ãã¯ä»Šèµ°ã£ã¦ã‚‹éåŒæœŸé–¢æ•°ã®å‘¼ã³å‡ºã—ã®å”¯ä¸€ã®è­˜åˆ¥å­ã€‚</p><h1 id="CLS-ãŒç™»å ´"><a href="#CLS-ãŒç™»å ´" class="headerlink" title="CLS ãŒç™»å ´"></a>CLS ãŒç™»å ´</h1><p>ä»–ã®è¨€èªã§ã¯ã€<a href="https://en.wikipedia.org/wiki/Thread-local_storage" target="_blank" rel="noopener">Thread-local storage</a>ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ãŒ JavaScript ã¯ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆWeb Workerãªã©ã¯ãƒ¡ã‚¤ãƒ³ã¨é–¢ä¿‚ãªã„ã—ã€è‡ªåˆ†ã§ã‚‚ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã—ãªã„ï¼‰ã€‚CLS ã¨ã„ã†åå‰ã¯ TLS ã¿ãŸã„ã«é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‹ã‚‰ã® Continuation-passing style åå‰ã‚’ã‚‚ã‚‰ã£ã¦ã€Continuation-local Storageã€ãã®ãƒã‚§ã‚¤ãƒ³ã®å‘¼ã³å‡ºã—ã®ä¸­ã§æŒç¶šçš„ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã™ã‚‹ã€‚</p><h2 id="ãƒ–ãƒ©ã‚¦ã‚¶ã®è§£æ±º-Zone-js"><a href="#ãƒ–ãƒ©ã‚¦ã‚¶ã®è§£æ±º-Zone-js" class="headerlink" title="ãƒ–ãƒ©ã‚¦ã‚¶ã®è§£æ±º Zone.js"></a>ãƒ–ãƒ©ã‚¦ã‚¶ã®è§£æ±º Zone.js</h2><p>ã©ã†ã®ã‚ˆã†ã«è§£æ±ºã—ãŸã‹ã¡ã‚‡ã£ã¨è¦‹ã¦ã¿ã¾ã—ã‚‡ã†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click(<span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  Zone.current.fork(&#123;</span><br><span class="line">    name: <span class="string">'clickZone'</span>,</span><br><span class="line">    properties: &#123;</span><br><span class="line">      event</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).run(</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      log(<span class="string">'button clicked'</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(global.event, ...args);</span><br><span class="line">  <span class="comment">// other logic</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/angular/angular/tree/master/packages/zone.js" target="_blank" rel="noopener"><code>Zone.js</code></a> ã¯ Angular 2.0 ã‹ã‚‰èª•ç”Ÿã—ãŸã‚‚ã®ã§ã€ã‚‚ã¡ã‚ã‚“ä»–ã®æ©Ÿèƒ½ã‚‚æŒã£ã¦ã‚‹ã€‚</p><h3 id="ã“ã®æ–¹æ³•ã¯æ®‹å¿µãªã¨ã“ã‚ãŒã‚ã‚Šã¾ã™"><a href="#ã“ã®æ–¹æ³•ã¯æ®‹å¿µãªã¨ã“ã‚ãŒã‚ã‚Šã¾ã™" class="headerlink" title="ã“ã®æ–¹æ³•ã¯æ®‹å¿µãªã¨ã“ã‚ãŒã‚ã‚Šã¾ã™"></a>ã“ã®æ–¹æ³•ã¯æ®‹å¿µãªã¨ã“ã‚ãŒã‚ã‚Šã¾ã™</h3><p>è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€ <code>Zone.js</code> ã¯ã©ã†ã‚„ã£ã¦ã“ã‚Œã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã¯å‘¼ã³å‡ºã—ã«å¯¾ã—ã¦å”¯ä¸€ã®è­˜åˆ¥å­ã‚’æä¾›ã™ã‚‹APIãŒãªã‘ã‚Œã°ã€ã™ã¹ã¦ã®éåŒæœŸé–¢æ•°ã‚’ãƒªãƒ©ã‚¤ãƒˆã—ã‹ã§ããªãã€ãã†ã™ã‚Œã°éåŒæœŸãŒå…¥ã‚‹æ™‚ã¨å‡ºã‚‹æ™‚ hook ã§ãã¦ã€ã“ã®åŠ¹æœãŒå®Ÿè£…ã§ãã¾ã™ã­ã€‚</p><p>è‡ªåˆ†ã‚‚æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚</p><!-- https://gist.github.com/xingoxu/58f8f7faa83732ec922fcd38299f3283 --><script src="https://gist.github.com/xingoxu/58f8f7faa83732ec922fcd38299f3283.js"></script><p>ã¾ãŸå•é¡Œãªã•ãã†ã ã‘ã©ã€</p><p><a href="https://github.com/angular/angular/issues/31730" target="_blank" rel="noopener">angular with tsconfig target ES2017 async/await will not work with zone.js</a></p><h4 id="ãƒ–ãƒ©ã‚¦ã‚¶ä»Šã§ã¯å®Œç’§ã®è§£æ±ºæ–¹æ³•ã¯ã‚ã‚Šã¾ã›ã‚“"><a href="#ãƒ–ãƒ©ã‚¦ã‚¶ä»Šã§ã¯å®Œç’§ã®è§£æ±ºæ–¹æ³•ã¯ã‚ã‚Šã¾ã›ã‚“" class="headerlink" title="ãƒ–ãƒ©ã‚¦ã‚¶ä»Šã§ã¯å®Œç’§ã®è§£æ±ºæ–¹æ³•ã¯ã‚ã‚Šã¾ã›ã‚“"></a>ãƒ–ãƒ©ã‚¦ã‚¶ä»Šã§ã¯å®Œç’§ã®è§£æ±ºæ–¹æ³•ã¯ã‚ã‚Šã¾ã›ã‚“</h4><p>å®Ÿé¨“ã‚’ã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€console ã§ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’æ‰“ã£ãŸã‚‰ã€</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _promise = <span class="built_in">Promise</span>;</span><br><span class="line"><span class="built_in">Promise</span> = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">'rewrite by ourselves'</span>) &#125;;</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;) <span class="keyword">instanceof</span> <span class="built_in">Promise</span></span><br><span class="line"><span class="comment">// rewrite by ourselves</span></span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">test() <span class="keyword">instanceof</span> <span class="built_in">Promise</span></span><br><span class="line"><span class="comment">// false</span></span><br><span class="line">test() <span class="keyword">instanceof</span> _promise</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>() &#125;</span><br><span class="line"></span><br><span class="line">test() <span class="keyword">instanceof</span> <span class="built_in">Promise</span></span><br><span class="line"><span class="comment">// rewrite by ourselves</span></span><br><span class="line"><span class="comment">// false</span></span><br><span class="line">test() <span class="keyword">instanceof</span> _promise</span><br><span class="line"><span class="comment">// rewrite by ourselves</span></span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ãƒ–ãƒ©ã‚¦ã‚¶ã¯ã€async é–¢æ•°ã®ãƒªã‚¿ãƒ¼ãƒ³ã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–ã® Promise ã§å†ãƒ©ãƒƒãƒ”ãƒ³ã‚°ã—ã¾ã™ã€‚ãƒã‚¤ãƒ†ã‚£ãƒ–æ–‡æ³•ãªã®ã§ã€async é–¢æ•°ã¯ãƒªãƒ©ã‚¤ãƒˆã§ããªã„ã€‚<br>ã‚‚ã¡ã‚ã‚“ transpiler ã§ async é–¢æ•°ã‚’ generator ã‚‚ã—ãã¯ Promise ã«ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ãŒã€å®Œç’§ã¨ã¯è¨€ã‚ãªã„ã§ã—ã‚‡ã†ã€‚</p><h2 id="Node-js-ã®è§£æ±º-async-hooks"><a href="#Node-js-ã®è§£æ±º-async-hooks" class="headerlink" title="Node.js ã®è§£æ±º async_hooks"></a>Node.js ã®è§£æ±º <code>async_hooks</code></h2><p>Node.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 8 ä»¥é™å‡ºãŸ <code>async_hook</code> ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 14 ã®ä»Šã§ã‚‚ <code>Experimental</code> ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‹ã‚‰è„±å´ã—ã¦ãªã„ã€‚å‡ºãŸã”ã‚æ€§èƒ½ã«é–¢ã—ã¦ã®è­°è«–ã‚‚ã‚ã£ãŸãŒã€ä»Šã¯ã©ã†ãªã£ã¦ã‚‹ã‹ã¾ã ã‚ã‹ã‚‰ãªã„çŠ¶æ…‹ã§ã™ãŒ</p><blockquote><p>Experimental ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«ã—ã¦ã‚‚å®‰å®šæ€§ã¨ã—ã¦ã¯å•é¡Œãªã•ãã†ã€å¤§é‡ãª Node.js ã®ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚° / APM ãŒä¾å­˜ã—ã¦ã„ã¦ã€å•é¡ŒãŒã‚ã£ãŸã‚‰ issue ãŒç«‹ã¦ã‚‰ã‚Œã‚‹ã¯ãšã§ã™ã€‚</p></blockquote><p>æ€§èƒ½ã«é–¢ã™ã‚‹å•é¡Œã¯ã“ã“ã¯å±•é–‹ã—ãªã„ã€ã‚³ãƒ¼ãƒ‰ã®ä½çµåˆã¨å°‘ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ä½ä¸‹ã‚’äº¤æ›ã™ã‚‹ã‹ã—ãªã„ã‹ã«ã‚ˆã‚Šã¾ã™ã­ã€‚</p><h3 id="ä½¿ã„æ–¹"><a href="#ä½¿ã„æ–¹" class="headerlink" title="ä½¿ã„æ–¹"></a>ä½¿ã„æ–¹</h3><p><code>async_hooks</code> ã¯ <code>createHook</code> ã¨ã„ã†é–¢æ•°ã‚’æä¾›ã—ãŸã€ã“ã‚ŒãŒéåŒæœŸé–¢æ•°ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã« hook ã§ãã¾ã™ã€ã—ã‹ã‚‚å”¯ä¸€è­˜åˆ¥å­ã‚‚æä¾›ã—ã¦ãã‚Œã¾ã™ã®ã§ã€CLS ã‚’ç°¡å˜ã«ä½œã‚Œã¾ã™ã€‚</p><!-- https://gist.github.com/xingoxu/590e7f99658ea160b1f77cdb4e956637 --><script src="https://gist.github.com/xingoxu/590e7f99658ea160b1f77cdb4e956637.js"></script><h3 id="Node-js-ãƒãƒ¼ã‚¸ãƒ§ãƒ³-13-ã‹ã‚‰ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ã®å®Ÿè£…ã‚‚"><a href="#Node-js-ãƒãƒ¼ã‚¸ãƒ§ãƒ³-13-ã‹ã‚‰ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ã®å®Ÿè£…ã‚‚" class="headerlink" title="Node.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 13 ã‹ã‚‰ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ã®å®Ÿè£…ã‚‚"></a>Node.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 13 ã‹ã‚‰ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ã®å®Ÿè£…ã‚‚</h3><p>ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ä¸­ã§ãŸãã•ã‚“ã® CLS ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ãŒã‚ã£ãŸä¸Šã«ã€Node.js 13.10 ã‹ã‚‰ <code>AsyncLocalStorage</code> ã® API ãŒã‚ã‚Šã¾ã—ãŸã€‚</p><p><a href="https://nodejs.org/api/async_hooks.html#async_hooks_class_asynclocalstorage" target="_blank" rel="noopener">https://nodejs.org/api/async_hooks.html#async_hooks_class_asynclocalstorage</a></p><p>å®Ÿã¯ã“ã‚Œã¯ã™ã§ã«ã™ãã«ä½¿ãˆã‚‹ CLS ã§ã™ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  AsyncLocalStorage,</span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">"async_hooks"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> session = <span class="keyword">new</span> AsyncLocalStorage();</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">_req, _res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> userId = <span class="built_in">Math</span>.random() * <span class="number">1000</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(userId);</span><br><span class="line">  session.enterWith(&#123; userId &#125;);</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    next();</span><br><span class="line">  &#125;, userId);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">_req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; userId &#125; = session.getStore();</span><br><span class="line">  res.json(&#123; userId &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Listen 3000"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fetch = <span class="built_in">require</span>(<span class="string">'node-fetch'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10</span>).fill(<span class="number">0</span>).forEach(<span class="function">(<span class="params">_, i</span>) =&gt;</span> fetch(<span class="string">'http://localhost:3000/test'</span>, &#123;</span><br><span class="line">  method: <span class="string">'GET'</span>,</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> res.json()).then(<span class="built_in">console</span>.log))</span><br><span class="line"></span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// Listen 3000</span></span><br><span class="line"><span class="comment">// 355.9573987560112</span></span><br><span class="line"><span class="comment">// 548.3773445851497</span></span><br><span class="line"><span class="comment">// 716.2437886469793</span></span><br><span class="line"><span class="comment">// 109.84756385607896</span></span><br><span class="line"><span class="comment">// 907.6261832949347</span></span><br><span class="line"><span class="comment">// 308.34659685842513</span></span><br><span class="line"><span class="comment">// 407.0145853469649</span></span><br><span class="line"><span class="comment">// 525.820449114568</span></span><br><span class="line"><span class="comment">// 76.91502437038133</span></span><br><span class="line"><span class="comment">// 997.8611964598299</span></span><br><span class="line"><span class="comment">// &#123; userId: 76.91502437038133 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 109.84756385607896 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 308.34659685842513 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 355.9573987560112 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 407.0145853469649 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 525.820449114568 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 548.3773445851497 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 716.2437886469793 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 907.6261832949347 &#125;</span></span><br><span class="line"><span class="comment">// &#123; userId: 997.8611964598299 &#125;</span></span><br></pre></td></tr></table></figure><h1 id="å‚ç…§"><a href="#å‚ç…§" class="headerlink" title="å‚ç…§"></a>å‚ç…§</h1><ul><li><a href="https://juejin.im/post/5e23f89f6fb9a02fcf18e24a" target="_blank" rel="noopener">Javascriptä¸CLSï¼ˆContinuation-local Storageï¼‰</a></li><li><a href="https://zhuanlan.zhihu.com/p/50835920" target="_blank" rel="noopener">ç¿»é˜…æºç åï¼Œæˆ‘ç»ˆäºç†è§£äº†Zone.js</a></li><li><a href="https://shanyue.tech/node/cls.html#async-hooks" target="_blank" rel="noopener">ä½¿ç”¨ async_hooks ç›‘å¬å¼‚æ­¥èµ„æºçš„ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="https://blog.xizhibei.me/2018/04/07/distributed-tracing/" target="_blank" rel="noopener">åˆ†å¸ƒå¼è¿½è¸ª</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è³‡æ–™ã‚’èª¿ã¹ã‚‹éš›ã«ã€CLS ã®å­˜åœ¨ã‚’çŸ¥ã‚Šã¾ã—ãŸã€‚ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã§çµæ§‹ã„ã„ãƒ‡ã‚«ãƒƒãƒ—ãƒªãƒ³ã‚°ã®ã‚„ã‚Šæ–¹ã¨æ„Ÿã˜ã¾ã—ã¦ã€ã‚·ã‚§ã‚¢ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
      <category term="Front-End-Dev" scheme="https://blog.xingoxu.com/categories/dev/Front-End-Dev/"/>
    
    
  </entry>
  
  <entry>
    <title>ç”¨æœ€çƒ­çš„Serverlessï¼Œä»¥æœ€å¿«çš„é€Ÿåº¦ï¼Œå†™æœ€é‡çš„JavaScript</title>
    <link href="https://blog.xingoxu.com/2020/06/try-serverless/"/>
    <id>https://blog.xingoxu.com/2020/06/try-serverless/</id>
    <published>2020-06-21T07:52:35.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<p>Serverlessï¼Œäº‘åŸç”Ÿï¼Œå¹´åˆåˆ°ç°åœ¨ï¼Œæˆ‘å…³æ³¨çš„å¥½å‡ ä¸ªå‰ç«¯å…¬ä¼—å·å’Œèµ„è®¯å·éƒ½åœ¨ç–¯ç‹‚æ¨è¿™äº›ä¸œè¥¿ï¼Œå»å¹´å¹´åº•å°±æ—©æœ‰è€³é—»ï¼ŒåŸæ¥ä»¥ä¸ºæ˜¯å„ç§æ´»åŠ¨å¤§ä¼šç»„ç»‡è”åˆäº‘å‚å•†åœ¨å¯¹ devops å–ç¥¨æ•´çš„æ–°æŠ€æœ¯ï¼Œä½†çƒ­åº¦è¶Šæ¥è¶Šå¼ºï¼Œäºæ˜¯æˆ‘ä¹Ÿè·ƒè·ƒæ¬²è¯•è¹­ä¸ªçƒ­åº¦</p><a id="more"></a><h1 id="Serverless-åˆ°åº•æ˜¯ä»€ä¹ˆÂ¿"><a href="#Serverless-åˆ°åº•æ˜¯ä»€ä¹ˆÂ¿" class="headerlink" title="Serverless åˆ°åº•æ˜¯ä»€ä¹ˆÂ¿"></a>Serverless åˆ°åº•æ˜¯ä»€ä¹ˆÂ¿</h1><p>ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ Cloud Function + Object Storage + Cloud Database + API Gateway and more by Cloud Service Provider. ç®€å•æ¥è¯´å°±æ˜¯æœ‰ä¸ªå« serverless çš„å¼€æºæ¡†æ¶æŠŠäº‘å‚å•†æä¾›çš„è¿™äº›æœåŠ¡æ•´åˆæˆäº†ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œåç«¯è¿ç»´ç»Ÿç»Ÿéƒ½ä¸è¦äº†ã€‚å¥½å¤„æ˜¾è€Œæ˜“è§ï¼ŒæœåŠ¡å¼¹æ€§ä¼¸ç¼©ï¼Œä»·æ ¼æŒ‰é‡æ”¶è´¹ï¼Œå¤§å¤šæ•°çš„è¿ç»´é—®é¢˜ï¼Œä½ çš„äº‘æœåŠ¡æä¾›å•†ç»Ÿç»Ÿå¸®ä½ å…œäº†ï¼Œå°å­¦ç”Ÿä¹Ÿèƒ½å†™ç½‘ç«™ã€‚</p><p>è¿™ä¹ˆç‰›é€¼ï¼Œå‰ç«¯å¯å¾—å¥½å¥½å­¦å­¦ï¼Œè®©åç«¯å’Œè¿ç»´ç»Ÿç»Ÿä¸‹å²—å’¯ï¼Ÿ</p><h1 id="Serverlessã€å¯åŠ¨ï¼"><a href="#Serverlessã€å¯åŠ¨ï¼" class="headerlink" title="Serverlessã€å¯åŠ¨ï¼"></a>Serverlessã€å¯åŠ¨ï¼</h1><p>æ—¢ç„¶ Serverless å›¾çš„å°±æ˜¯å¿«ï¼Œé‚£æˆ‘ä»¬è‡ªç„¶æ˜¯ä¸èƒ½è‡ªå·±æ‰‹åŠ¨ä¸€ä¸ªä¸€ä¸ªçš„å»åˆ°äº‘æœåŠ¡å•†é‚£é‡Œå»æ‰‹åŠ¨è®¾ç½®çš„å’¯ã€‚<br>å½“ç„¶ä½ ä¹Ÿå¯ä»¥è¿™ä¹ˆåšï¼Œåªä¸è¿‡æˆ‘çš„æœåŠ¡ä»Šå¤©å°±ä¸Šçº¿ï¼Œä½ çš„æœåŠ¡å¯èƒ½å°±è¦ç­‰åˆ°åå¤©äº†ã€‚</p><p>Github æ˜Ÿæ˜Ÿ 3ä¸‡ä¸ªï¼Œ1000ä¸‡ä¸‹è½½çš„ serverless npm packageï¼Œ<code>npm install -g serverless</code>ï¼Œä¸‹è½½ï¼å¯åŠ¨ï¼</p><p>ä»»æ„ä½ç½®ï¼Œterminal è¾“å…¥ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ serverless</span><br></pre></td></tr></table></figure><p>å‹å¥½å‘å¯¼ä¸€æ­¥ä¸€æ­¥å¸¦ä½ è¿ˆå‘ serverless ç¾å¥½<del>å¤§å‘</del></p><p>è¿›å…¥ä½ åˆšåˆ›å»ºçš„é¡¹ç›®ï¼Œæ•²ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sls deploy</span><br></pre></td></tr></table></figure><p>ç‚¹å‡»å±å¹•ç»™å‡ºçš„è¿æ¥ï¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World!</span><br></pre></td></tr></table></figure><p>ç‰›é€¼ï¼æˆ‘ä»¬çš„åç«¯æœåŠ¡å™¨å·²ç»æ­å¥½äº†ï¼å¤ªç®€å•äº†å§ï¼</p><blockquote><p>å›½å†…ç”¨æˆ· serverless è‡ªåŠ¨ä½¿ç”¨è…¾è®¯äº‘<br>ä»¥ä¸Šå†…å®¹å…¶å®åœ¨ <a href="https://www.serverless.com/framework/docs/providers/aws/examples/hello-world/node/" target="_blank" rel="noopener">https://www.serverless.com/framework/docs/providers/aws/examples/hello-world/node/</a> éƒ½æœ‰</p></blockquote><h1 id="å¥—ä¸ªæ¨¡æ¿ï¼Œå¿«ä¸ŠåŠ å¿«"><a href="#å¥—ä¸ªæ¨¡æ¿ï¼Œå¿«ä¸ŠåŠ å¿«" class="headerlink" title="å¥—ä¸ªæ¨¡æ¿ï¼Œå¿«ä¸ŠåŠ å¿«"></a>å¥—ä¸ªæ¨¡æ¿ï¼Œå¿«ä¸ŠåŠ å¿«</h1><blockquote><p>ä»¥ä¸‹å†…å®¹ä½¿ç”¨ aws è¿›è¡Œæ“ä½œ</p></blockquote><p>ä»Šå¤©æˆ‘æ‰“ç®—åšä¸€ä¸ªä¿¡ç”¨å¡å¤–æ±‡æ¯”ä»·å·¥å…·ï¼Œä¸‰æ­¥æå®šï¼š</p><ol><li>æŠ“å–æ±‡ç‡</li><li>ä¿å­˜å½“å¤©æ±‡ç‡ï¼ˆäº‘å‡½æ•°æ²¡æœ‰çŠ¶æ€ï¼‰</li><li>å‰ç«¯è®¡ç®—æ¯”ä»·</li></ol><p>éå¸¸é€‚åˆ serverless çš„åˆå­¦åº”ç”¨</p><p>ä»£ç å·²ç»å¼€æºå¹¶ä¸Šçº¿ï¼Œæ¬¢è¿å¤§å®¶è¾¹çœ‹è¾¹ review</p><p>æˆå“åœ°å€ï¼š<a href="https://whichcard.xingoxu.com/" target="_blank" rel="noopener">https://whichcard.xingoxu.com/</a><br>ä»£ç åœ°å€ï¼š<a href="https://github.com/xingoxu/whichcard-abroad" target="_blank" rel="noopener">https://github.com/xingoxu/whichcard-abroad</a></p><p>serverless è¿™ä¸ªæ¡†æ¶ï¼Œè¿˜èƒ½ä½¿ç”¨ template æ¥åˆ›å»ºé¡¹ç›®ï¼Œæ—¢ç„¶å›¾çš„å°±æ˜¯å¿«ï¼Œæ‰¾ä¸€ä¸ªç°æˆçš„æ¨¡æ¿å¥—è¿›å»ï¼Œå¡«ä¸€å¡«å°±ä¸Šçº¿æ˜¯ä¸æ˜¯æ›´ç¾æ»‹æ»‹</p><p>æŠ€æœ¯æ ˆï¼Œå°±é€‰ nuxt.jsï¼Œå¼€å¯ SSRï¼Œå†åŠ ä¸Šå¯ç¼–ç¨‹ä½¿ç”¨ï¼Œå¦™å•Š</p><p>æœä¸€æœ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">serverless create --template-url https://github.com/tonyfromundefined/nuxt-serverless -n whichcard-abroad</span><br></pre></td></tr></table></figure><p>åˆ›å»ºé¡¹ç›®åï¼Œæˆ‘ä»¬ç¼–è¾‘ä¸€ä¸‹ <code>serverless.yml</code>ï¼ŒåŠ ä¸Šéå…³ç³»å‹æ•°æ®åº“ç›¸å…³é…ç½®</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resources:</span></span><br><span class="line">  <span class="attr">Resources:</span></span><br><span class="line">    <span class="attr">CurrencyTable:</span></span><br><span class="line">      <span class="attr">Type:</span> <span class="string">AWS::DynamoDB::Table</span></span><br><span class="line">      <span class="attr">Properties:</span></span><br><span class="line">        <span class="attr">TableName:</span> <span class="string">$&#123;env:DYANMODB_TABLE&#125;</span></span><br><span class="line">        <span class="attr">AttributeDefinitions:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">AttributeName:</span> <span class="string">$&#123;env:DYANMODB_PRIMARY_KEY&#125;</span></span><br><span class="line">            <span class="attr">AttributeType:</span> <span class="string">S</span></span><br><span class="line">        <span class="attr">KeySchema:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">AttributeName:</span> <span class="string">$&#123;env:DYANMODB_PRIMARY_KEY&#125;</span></span><br><span class="line">            <span class="attr">KeyType:</span> <span class="string">HASH</span></span><br><span class="line">        <span class="attr">ProvisionedThroughput:</span></span><br><span class="line">          <span class="attr">ReadCapacityUnits:</span> <span class="number">1</span></span><br><span class="line">          <span class="attr">WriteCapacityUnits:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p>æ•°æ®åº“éœ€è¦é…ç½®æƒé™ï¼Œè¦ç»™è¿è¡Œ lambda function çš„ç”¨æˆ·ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ serverless çš„æ—¶å€™è®©ä½ å‘è¡Œçš„é‚£ä¸ªkeyæ‰€ä»£è¡¨çš„ç”¨æˆ·ï¼Œç»™ä»–æƒé™ï¼Œé‚£ï¼ŒåŒæ ·åœ¨ <code>serverless.yml</code> ä¸‹åŠ å…¥</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">provider:</span></span><br><span class="line">  <span class="attr">iamRoleStatements:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">      <span class="attr">Action:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:Query</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:Scan</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:GetItem</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:PutItem</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:UpdateItem</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:DeleteItem</span></span><br><span class="line">      <span class="attr">Resource:</span> <span class="string">"arn:aws:dynamodb:$&#123;self:provider.region&#125;:*:table/$&#123;env:DYANMODB_TABLE&#125;"</span></span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œæˆ‘ä»¬æœåŠ¡å™¨å·²ç»é…ç½®å®Œäº†ï¼Œå¼€å§‹ç¼–å†™åç«¯</p><p>åˆšæ‰ç”¨çš„è¿™ä¸ªæ¨¡æ¿ï¼Œå¤§å¤šæ•°å·²ç»æ­å»ºå¥½äº†ï¼Œåªä¸è¿‡åç«¯è¿™é‡Œæ²¡æœ‰ typescript æ”¯æŒ</p><p><a href="https://github.com/xingoxu/whichcard-abroad/blob/master/tsconfig.json" target="_blank" rel="noopener"><code>tsconfig.json</code></a> å¤åˆ¶ä¸€ä»½ï¼Œé‡å‘½å <a href="https://github.com/xingoxu/whichcard-abroad/blob/master/tsconfig-server.json" target="_blank" rel="noopener"><code>tsconfig-server.json</code></a></p><p>é…ç½®æˆ‘å°±ä¸ç²˜è¿‡æ¥äº†ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å‚è€ƒä¸Šè¾¹è¿æ¥ã€‚</p><p>ç”¨äº† typescript ä¹‹åï¼Œæˆ‘å¾—æŠŠä»–å˜æˆ js åæ‰èƒ½è¢« lambda function ç»™è¯»å–ï¼Œåœ¨ <a href="https://github.com/xingoxu/whichcard-abroad/blob/master/webpack.config.js" target="_blank" rel="noopener"><code>webpack.config.js</code></a>åŠ ä¸Š <code>ts-loader</code>ã€‚</p><h2 id="æŠ“å–æ±‡ç‡"><a href="#æŠ“å–æ±‡ç‡" class="headerlink" title="æŠ“å–æ±‡ç‡"></a>æŠ“å–æ±‡ç‡</h2><p>æˆ‘ä»¬ä»¥ <a href="https://github.com/xingoxu/whichcard-abroad/blob/master/src/api/functions/visa.ts" target="_blank" rel="noopener">VISA</a> ä¸ºä¾‹ï¼Œä»–çš„æ±‡ç‡å½“å¤©å…¬å¸ƒåœ¨ <a href="https://usa.visa.com/support/consumer/travel-support/exchange-rate-calculator.html" target="_blank" rel="noopener">è¿™ä¸ªç½‘é¡µ</a> ä¸Š</p><p>æˆ‘ä»¬å¯¼å…¥ <code>axios</code>ï¼Œå¯¼å…¥<code>cheerio</code>ï¼Œä¸‰ä¸‹äº”é™¤äºŒï¼ŒjQueryä¸€æŠŠæ¢­ï¼Œè½»æ¾åŠ æ„‰å¿«ï¼Œæ‘¸å‡ºäº†ä»–çš„æ±‡ç‡</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span>;</span><br><span class="line"><span class="keyword">import</span> cheerio <span class="keyword">from</span> <span class="string">'cheerio'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; format &#125; <span class="keyword">from</span> <span class="string">'date-fns'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getVisaCurrency = <span class="keyword">async</span> (&#123;</span><br><span class="line">  transCurr = <span class="string">"USD"</span>,</span><br><span class="line">  billCurr = <span class="string">"JPY"</span>,</span><br><span class="line">  date</span><br><span class="line">&#125;) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; data: htmlBody &#125; = <span class="keyword">await</span> axios.get&lt;</span><br><span class="line">    <span class="built_in">string</span></span><br><span class="line">  &gt;(</span><br><span class="line">    <span class="string">`https://usa.visa.com/support/consumer/travel-support/exchange-rate-calculator.html`</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        amount: <span class="number">1</span>,</span><br><span class="line">        fee: <span class="string">'0.0'</span>,</span><br><span class="line">        utcConvertedDate: <span class="string">''</span>,</span><br><span class="line">        exchangedate: format(</span><br><span class="line">          date,</span><br><span class="line">          <span class="string">'MM/dd/yyyy'</span></span><br><span class="line">        ),</span><br><span class="line">        fromCurr: billCurr,</span><br><span class="line">        toCurr: transCurr,</span><br><span class="line">        submitButton:</span><br><span class="line">          <span class="string">'Calculate exchange rate'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> $ = cheerio.load(htmlBody);</span><br><span class="line">  <span class="keyword">const</span> $targetDOM = $(</span><br><span class="line">    <span class="string">'.converted-amount-value'</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> result = $targetDOM</span><br><span class="line">    .eq($targetDOM.length - <span class="number">2</span>)</span><br><span class="line">    .text()</span><br><span class="line">    .match(<span class="regexp">/^\d+\.\d+/</span>)![<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; getVisaCurrency &#125;;</span><br></pre></td></tr></table></figure><p>40è¡Œçš„ä»£ç æˆ‘ä»¬å°±è§£å†³äº†æˆ˜æ–—</p><h2 id="ä¿å­˜å½“å¤©æ±‡ç‡"><a href="#ä¿å­˜å½“å¤©æ±‡ç‡" class="headerlink" title="ä¿å­˜å½“å¤©æ±‡ç‡"></a>ä¿å­˜å½“å¤©æ±‡ç‡</h2><p>æ—¢ç„¶æŒ‰éœ€ä»˜è´¹ï¼Œé‚£ä¹ˆç©ºé—²çš„æ—¶å€™äº‘å‚å•†åŠ¿å¿…ä¸å¯èƒ½ç»™ä½ èµ„æºï¼Œå› æ­¤äº‘å‡½æ•°æ˜¯æ— çŠ¶æ€è¿™ç‚¹å…¶å®è¿˜æ˜¯æ¯”è¾ƒ make sense çš„</p><p>è™½ç„¶æˆ‘ä»¬å¯ä»¥å¯¹æ¯ä¸ªè¯·æ±‚éƒ½å®æ—¶æŠ“å–ä¸€æ¬¡æ±‡ç‡ï¼Œä½†æ˜¯è¿™æ˜¾ç„¶ä¹Ÿå¤ªå½±å“æ‰“å¼€é€Ÿåº¦ã€ç”¨æˆ·ä½“éªŒäº†å§ã€‚</p><p>è€Œä¸”å¦‚æœè¢«ä¸Šæ¸¸å‘ç°ï¼Œå¯¹æ–¹ç›´æ¥æŠŠ aws ä¸€æ•´æ®µ ip ç»™å°äº†çš„äº‹æƒ…ä¹Ÿä¸æ˜¯æ²¡æœ‰</p><p>å³ä½¿æ˜¯æŠ“å–å…¬å¼€æ•°æ®è¿™ç§äº‹æƒ…ï¼Œè¿˜æ˜¯é™æ‚„æ‚„ææ¯”è¾ƒå¥½ã€‚</p><p>ç›´æ¥å¯¼å…¥ <code>aws-sdk</code>ï¼Œè‰è‰å‡ è¡Œä»£ç å°±èƒ½å†™å¥½ä¿å­˜å·¥å…·å‡½æ•°å’ŒæŸ¥è¯¢å·¥å…·å‡½æ•°</p><p><a href="https://github.com/xingoxu/whichcard-abroad/blob/master/src/api/utils/database.ts" target="_blank" rel="noopener">æºä»£ç </a></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; DynamoDB &#125; <span class="keyword">from</span> <span class="string">'aws-sdk'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; format &#125; <span class="keyword">from</span> <span class="string">'date-fns'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> DATE_FORMAT = <span class="string">'yyyy-MM-dd'</span>;</span><br><span class="line"><span class="keyword">const</span> DYANMODB_TABLE: <span class="built_in">string</span> = <span class="string">"currencyTable"</span>;</span><br><span class="line"><span class="keyword">const</span> DYANMODB_PRIMARY_KEY: <span class="built_in">string</span> = <span class="string">"currency"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dynamoDBClient = <span class="keyword">new</span> DynamoDB(&#123;</span><br><span class="line">  region: process.env.DYANMODB_REGION</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> queryFromCache = <span class="keyword">async</span> (</span><br><span class="line">  date: <span class="built_in">Date</span></span><br><span class="line">): <span class="built_in">Promise</span>&lt;DBCurrencyObject | <span class="literal">undefined</span>&gt; =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    Count,</span><br><span class="line">    Items</span><br><span class="line">  &#125; = <span class="keyword">await</span> dynamoDBClient</span><br><span class="line">    .query(&#123;</span><br><span class="line">      TableName: DYANMODB_TABLE,</span><br><span class="line">      KeyConditionExpression: <span class="string">`#key=:dt`</span>,</span><br><span class="line">      ExpressionAttributeNames: &#123;</span><br><span class="line">        <span class="string">'#key'</span>: DYANMODB_PRIMARY_KEY</span><br><span class="line">      &#125;,</span><br><span class="line">      ExpressionAttributeValues: &#123;</span><br><span class="line">        <span class="string">':dt'</span>: &#123;</span><br><span class="line">          S: format(date, DATE_FORMAT)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .promise();</span><br><span class="line">  <span class="keyword">if</span> (Count &amp;&amp; Count == <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> DyanmodbResultAdapter(</span><br><span class="line">      Items![<span class="number">0</span>]</span><br><span class="line">    ) <span class="keyword">as</span> DBCurrencyObject;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> storeResult = <span class="keyword">async</span> (&#123;</span><br><span class="line">  date,</span><br><span class="line">  result,</span><br><span class="line">  billCurr,</span><br><span class="line">  transCurr,</span><br><span class="line">  brand</span><br><span class="line">&#125;): <span class="built_in">Promise</span>&lt;<span class="built_in">void</span>&gt; =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> cacheResult = <span class="keyword">await</span> queryFromCache(</span><br><span class="line">    date</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">if</span> (!cacheResult)</span><br><span class="line">    cacheResult = &#123;</span><br><span class="line">      date: format(date, DATE_FORMAT)</span><br><span class="line">    &#125;;</span><br><span class="line">  <span class="keyword">if</span> (!cacheResult[brand])</span><br><span class="line">    cacheResult[brand] = &#123;&#125;;</span><br><span class="line">  <span class="keyword">if</span> (!cacheResult[brand]![transCurr])</span><br><span class="line">    cacheResult[brand]![transCurr] = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  cacheResult[brand]![transCurr]![</span><br><span class="line">    billCurr</span><br><span class="line">  ] = result;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> dynamoDBClient</span><br><span class="line">    .updateItem(&#123;</span><br><span class="line">      Key: &#123;</span><br><span class="line">        [DYANMODB_PRIMARY_KEY]: &#123;</span><br><span class="line">          S: format(date, DATE_FORMAT)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      TableName: DYANMODB_TABLE,</span><br><span class="line">      UpdateExpression: <span class="string">`set <span class="subst">$&#123;brand&#125;</span>=:<span class="subst">$&#123;brand&#125;</span>`</span>,</span><br><span class="line">      ExpressionAttributeValues: &#123;</span><br><span class="line">        [<span class="string">`:<span class="subst">$&#123;brand&#125;</span>`</span>]: &#123;</span><br><span class="line">          M: DyanmodbRequestAdapter(</span><br><span class="line">            cacheResult[brand]!</span><br><span class="line">          )</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .promise();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; queryFromCache, storeResult &#125;;</span><br></pre></td></tr></table></figure><p><code>DyanmodbRequestAdapter</code>å’Œ<code>DyanmodbResultAdapter</code>æ˜¯ä¸ºäº†è§£å†³ dyanmodb å­˜å‚¨çš„æ—¶å€™ç¬¦åˆä»–çš„sdkçš„é€’å½’çš„keyï¼ˆåŠ ä¸Šç±»å‹ï¼‰ï¼Œå¦å¤–åœ¨è¿™é‡Œç¯‡å¹…è¿‡é•¿ç•¥å»äº†ä¸€äº›ç±»å‹å®šä¹‰ï¼Œå¤§å®¶å¯ä»¥åœ¨æºä»£ç é‡ŒæŸ¥çœ‹</p><p>åŒæ—¶ï¼Œæˆ‘ä»¬ä¸è¦å¿˜è®°ï¼Œæ•°æ®åœ¨æŠ“å–/å­˜å‚¨çš„è¿‡ç¨‹ä¸­éƒ½æœ‰å¯èƒ½å‘ç”Ÿæ–°è¯·æ±‚ï¼Œå› æ­¤æˆ‘ä»¬å†å†™ä¸€ä¸ªå·¥å…·ç±»æŠŠåˆšæ‰çš„æŠ“å–å‡½æ•°åŒ…è£…ä¸€ä¸‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncOnce</span>&lt;</span></span><br><span class="line"><span class="function">  <span class="title">T</span> <span class="title">extends</span> (<span class="params">...args: <span class="built_in">any</span></span>) =&gt; <span class="title">Promise</span>&lt;<span class="title">any</span>&gt;</span></span><br><span class="line"><span class="function">&gt;(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  func: (</span></span></span><br><span class="line"><span class="function"><span class="params">    ...args: Parameters&lt;T&gt;</span></span></span><br><span class="line"><span class="function"><span class="params">  ) =&gt; ReturnType&lt;T&gt;</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> running: ReturnType&lt;</span><br><span class="line">    <span class="keyword">typeof</span> func</span><br><span class="line">  &gt; | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    ...args: Parameters&lt;<span class="keyword">typeof</span> func&gt;</span><br><span class="line">  ) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (running === <span class="literal">null</span>) &#123;</span><br><span class="line">      running = func(...args);</span><br><span class="line">      running.finally(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        running = <span class="literal">null</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> running;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‰ç«¯è®¡ç®—æ¯”ä»·"><a href="#å‰ç«¯è®¡ç®—æ¯”ä»·" class="headerlink" title="å‰ç«¯è®¡ç®—æ¯”ä»·"></a>å‰ç«¯è®¡ç®—æ¯”ä»·</h2><p>å…¶å®æˆ‘ä»¬è¿™ä¸ªç½‘ç«™ï¼Œå¦‚æœæ²¡æœ‰å…³äºå¸®åŠ©é¡µé¢çš„è¯ï¼Œå°±æ˜¯åªæœ‰ä¸€ä¸ªé¡µé¢çš„ç½‘ç«™äº†ã€‚å› æ­¤å…¶å®æ²¡æœ‰å¿…è¦æš´éœ² APIï¼Œä¸è¿‡æˆ‘è¿™æ¬¡ä¸ºäº†å°è¯•ä¸€ä¸‹Nuxt.jsçš„Programming Usageï¼Œé‚£å‰ç«¯å’Œåç«¯å°±å¯ä»¥éå¸¸å·§å¦™çš„ç»“åˆåœ¨ä¸€èµ·</p><p>æˆ‘ä»¬ç›´æ¥åœ¨ SFC ä¸­ import è¿›æˆ‘ä»¬åˆšæ‰å†™å¥½çš„æŠ“å–å‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; response &#125; <span class="keyword">from</span> <span class="string">'@/api/functions/currency'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> asyncData(context) &#123;</span><br><span class="line">    <span class="keyword">let</span> currencyData;</span><br><span class="line">    <span class="keyword">if</span> (process.server &amp;&amp; context) &#123;</span><br><span class="line">      currencyData = <span class="keyword">await</span> response(</span><br><span class="line">        context.req</span><br><span class="line">      );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> data = <span class="keyword">await</span> axios.$<span class="keyword">get</span>(</span><br><span class="line">        '/currency',</span><br><span class="line">        &#123;</span><br><span class="line">          params: &#123; ...someParams &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      currencyData = data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123; currencyData &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„è¯ï¼Œå°±ç®—æ˜¯ SSRï¼Œä¹Ÿä¸éœ€è¦è‡ªå·±å‘è‡ªå·±å‘é€ä¸€ä¸ª <code>/currency</code> çš„è¯·æ±‚ã€‚</p><p>å¦‚æœæˆ‘ä»¬æ²¡æœ‰å…¶ä»–é¡µé¢ï¼Œé‚£ä¹ˆ <code>/currency</code> çš„APIä¹Ÿä¸ç”¨æš´éœ²ï¼Œç›¸å½“äºæŠŠ Nuxt.js å½“æˆäº†æ¨¡æ¿å¼•æ“ï¼</p><p>å†™è¿‡ Express.js ç­‰çš„å°ä¼™ä¼´å¾ˆæ¸…æ¥šï¼Œä¸€èˆ¬æ˜¯å…ˆç”Ÿæˆæ•°æ®ï¼Œç„¶åæ¸²æŸ“æ¨¡æ¿ï¼Œä½†æ˜¯åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çš„é‡ç‚¹æ˜¯å…ˆå†™å¥½å‰ç«¯åï¼Œå¯¼å…¥ server çš„å‡½æ•°ï¼ŒæŠŠè¯·æ±‚ä¸¢è¿‡å»æ‹¿æ•°æ®ã€‚</p><p>æ˜¯ä¸æ˜¯å¾ˆé‡ï¼ï¼ˆæ­¤å¤„åº”è¯¥æœ‰æƒŠå¹å£°ï¼ˆå“‡å“¦å¥½é‡ï¼‰ï¼‰</p><p>å‰©ä¸‹çš„å†™ç•Œé¢å•Šï¼Œå†™æ’åºå•Šä»€ä¹ˆçš„å°±ç•¥è¿‡ã€‚</p><h1 id="è§£å†³ä¸€äº›å°é—®é¢˜"><a href="#è§£å†³ä¸€äº›å°é—®é¢˜" class="headerlink" title="è§£å†³ä¸€äº›å°é—®é¢˜"></a>è§£å†³ä¸€äº›å°é—®é¢˜</h1><h2 id="è®°å¾—å¼€å¯-extractCSS"><a href="#è®°å¾—å¼€å¯-extractCSS" class="headerlink" title="è®°å¾—å¼€å¯ extractCSS"></a>è®°å¾—å¼€å¯ extractCSS</h2><p>Nuxt.js é»˜è®¤ä¸å¼€å¯ <code>extractCSS</code>ï¼Œå¦‚æœä½ åƒæˆ‘ä¸€æ ·å¼•äº†ä¸€ä¸ª UI åº“ï¼Œè¿˜å¯¹è¿™ä¸ª UI åº“è‡ªå®šä¹‰äº†çš„è¯ï¼Œé‚£ä½ çš„ HTML å¯èƒ½ä¼šé•¿åˆ°ä»¤äººå‘æŒ‡ã€‚è®°å¾—åœ¨ <code>nuxt.config.js</code> ä¸­å¯ç”¨å“¦</p><h2 id="Nuxt-js-æŠŠ-aws-sdk-æ‰“åŒ…è¿›äº†å‰ç«¯"><a href="#Nuxt-js-æŠŠ-aws-sdk-æ‰“åŒ…è¿›äº†å‰ç«¯" class="headerlink" title="Nuxt.js æŠŠ aws-sdk æ‰“åŒ…è¿›äº†å‰ç«¯"></a>Nuxt.js æŠŠ aws-sdk æ‰“åŒ…è¿›äº†å‰ç«¯</h2><p>æˆ‘æš‚æ—¶è¿˜æ²¡æœ‰æ·±å…¥å»çœ‹æ˜¯ Nuxt.js çš„ webpack çš„é—®é¢˜ï¼Œè¿˜æ˜¯å¯èƒ½æ˜¯ <code>vue-loader</code> çš„é—®é¢˜ï¼ˆæ¯•ç«Ÿæˆ‘ä»¬çš„å®—æ—¨æ˜¯è¦å¿«ï¼‰</p><p>ä¸è¿‡è¿™ä¸ªé—®é¢˜å¯ä»¥ç”¨ nuxt plugin çš„æ–¹å¼å»å›é¿ã€‚</p><p>åœ¨ <code>plguins</code> æ–‡ä»¶å¤¹ä¸‹åˆ›å»º <a href="https://github.com/xingoxu/whichcard-abroad/blob/master/src/plugins/getData.server.ts" target="_blank" rel="noopener"><code>getData.server.ts</code></a>ï¼Œ</p><p>æŠŠè·Ÿ server æœ‰å…³çš„å†™æˆä¸€ä¸ª handlerï¼Œç„¶åæŒ‚è½½åˆ° <code>Vue</code> ä¸Šä¹Ÿå¯ä»¥ï¼Œ<code>context</code> ä¸Šä¹Ÿå¯ä»¥ï¼Œéƒ½å¯ä»¥ï¼Œåªè¦æ˜¯ä¸ªåœ¨ SFC ä¸­å¯ä»¥è®¿é—®åˆ°çš„å…¨å±€æ–¹æ³•å°±å¯ä»¥äº†ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; response &#125; <span class="keyword">from</span> <span class="string">'@/api/functions/currency'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Context &#125; <span class="keyword">from</span> <span class="string">'@nuxt/types'</span>;</span><br><span class="line"></span><br><span class="line">Vue.$serverGetCurrency = <span class="function">(<span class="params">context: Context</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> response(context.req);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶ååˆ° SFC é‡ŒæŠŠåˆšæ‰ Server çš„æ–¹æ³•æ”¹æˆè¿™ä¸ªå…¨å±€æ–¹æ³•</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (process.server &amp;&amp; context) &#123;</span><br><span class="line">  currencyData = <span class="keyword">await</span> Vue.$serverGetCurrency(</span><br><span class="line">    context</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦å¤– ts å®šä¹‰çš„é—®é¢˜ï¼Œåœ¨å‡½æ•°çš„æ—è¾¹ declare ä¸€ä¸‹å°±æ²¡æœ‰é—®é¢˜äº†ï¼ˆ<a href="https://github.com/xingoxu/whichcard-abroad/blob/master/src/plugins/getData.server.ts" target="_blank" rel="noopener">æºä»£ç </a>ï¼‰</p><blockquote><p>è®°å¾—å‚è€ƒ <a href="https://nuxtjs.org/guide/plugins/" target="_blank" rel="noopener">Nuxt.js Plugins</a> &amp; <a href="https://vuejs.org/v2/guide/typescript.html#Augmenting-Types-for-Use-with-Plugins" target="_blank" rel="noopener">Vue.js Augumenting Types for Use With Plugins</a></p></blockquote><h1 id="è¿™ä¹ˆé¦™ï¼Ÿæˆ‘è¯»ä¹¦å°‘ï¼Œä½ ä¸è¦éª—æˆ‘"><a href="#è¿™ä¹ˆé¦™ï¼Ÿæˆ‘è¯»ä¹¦å°‘ï¼Œä½ ä¸è¦éª—æˆ‘" class="headerlink" title="è¿™ä¹ˆé¦™ï¼Ÿæˆ‘è¯»ä¹¦å°‘ï¼Œä½ ä¸è¦éª—æˆ‘"></a>è¿™ä¹ˆé¦™ï¼Ÿæˆ‘è¯»ä¹¦å°‘ï¼Œä½ ä¸è¦éª—æˆ‘</h1><p>Serverless æœ¬èº«å…¶å®å¹¶ä¸æ˜¯ä»€ä¹ˆæ–°é²œä¸œè¥¿ï¼Œäº‘å‡½æ•°è¿è¡Œç¯å¢ƒã€å¯¹è±¡å­˜å‚¨ã€äº‘æ•°æ®åº“å“ªä¸ªéƒ½ä¸æ˜¯2019å¹´æˆ–è€…2020å¹´æ‰å‡ºç°çš„æ–°ä¸œè¥¿ï¼Œä½†ä»–çš„æƒ³æ³•è§£å†³äº†å°å¾®æœåŠ¡çš„ä¸Šçº¿é€Ÿåº¦é—®é¢˜ï¼Œå¯¹åˆšèµ·æ­¥çš„æˆé•¿å‹ä¼ä¸šï¼Œæ²¡æœ‰åŸºç¡€è®¾æ–½çš„å°å…¬å¸ï¼Œæˆ–è€…æ˜¯æˆ‘æœ‰ä¸€ä¸ªæƒ³æ³•å°±å·®ä¸€ä¸ªç¨‹åºå‘˜çš„å…¬å¸æ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªéå¸¸çœæ—¶é—´çœäº‹æƒ…èŠ‚çº¦äººåŠ›ç‰©åŠ›æˆæœ¬çš„é€‰æ‹©ã€‚</p><p>ä¸è¿‡â€¦</p><h2 id="æœ¬åœ°å¼€å‘ï¼Œäº‘ç«¯è°ƒè¯•Â¿"><a href="#æœ¬åœ°å¼€å‘ï¼Œäº‘ç«¯è°ƒè¯•Â¿" class="headerlink" title="æœ¬åœ°å¼€å‘ï¼Œäº‘ç«¯è°ƒè¯•Â¿"></a>æœ¬åœ°å¼€å‘ï¼Œäº‘ç«¯è°ƒè¯•Â¿</h2><p>å°±é—®ä½ æ€•ä¸æ€•æœ¬åœ°è·‘å¾—å¥½å¥½çš„ï¼Œæ”¾åˆ°äº‘å‚å•†é‚£è¾¹ç‚¸äº†ï¼Œç„¶åè°ƒè¯•æ— é—¨ï¼<br>ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Œæˆ‘ä»¬ä»¥ aws ä¸ºä¾‹ï¼Œä½ æœ‰æ²¡æœ‰æƒ³è¿‡äº‘åŸç”Ÿæ˜¯æ€ä¹ˆå¤„ç† node_modules è¿™æ ·çš„é—®é¢˜çš„ï¼Ÿ</p><blockquote><p><a href="https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/nodejs-package.html" target="_blank" rel="noopener">Node.js ä¸­çš„ AWS Lambda éƒ¨ç½²ç¨‹åºåŒ…</a></p></blockquote><p>ç­”æ¡ˆæ˜¯ï¼Œå’Œä½ çš„æºä»£ç ä¸€èµ·ä¸Šä¼ ï¼</p><p>ğŸ‚ğŸºäº†æˆ‘çš„ awsï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ çš„ node_modules é‡Œè¾¹æœ‰ä¾èµ– native èƒ½åŠ›çš„è¯ï¼Œä¼ ä¸Šå»å¿…çˆ†ç‚¸ï¼Œè€Œä¸”ä½ æœ¬åœ°è¿˜æ£€æµ‹ä¸å‡ºä»»ä½•é—®é¢˜ã€‚</p><blockquote><p>æ¯”å¦‚ <a href="https://stackoverflow.com/questions/36079438/npm-install-with-aws-lambda" target="_blank" rel="noopener">npm install with AWS Lambda - Stack Overflow</a></p></blockquote><h2 id="æˆæœ¬é—®é¢˜"><a href="#æˆæœ¬é—®é¢˜" class="headerlink" title="æˆæœ¬é—®é¢˜"></a>æˆæœ¬é—®é¢˜</h2><p>äº‘æœåŠ¡å•†åˆå½“åŸºç¡€æœåŠ¡æä¾›å•†ï¼Œåˆå¸®ä½ å¹²äº†è¿ç»´ Scaling çš„äº‹æƒ…ï¼Œè¿˜æä¾›äº†å‹å¥½çš„ Interface ï¼Œè¿™ä¹ˆå¤šè¿™ä¹ˆå¥½çš„äº‹æƒ…ï¼Œå½“ç„¶ä¸å¯èƒ½æ˜¯å…è´¹çš„ï¼Œä¸€å¹´å…è´¹ä¸çœ‹èµ·æ¥ä½ä»·çš„ lambda çš„èƒŒåï¼Œæ˜¯é«˜é¢çš„æ†ç»‘æ¶ˆè´¹ä»¥åŠå¯¹ä»·æ ¼ä¸æ•æ„Ÿç¾¤ä½“çš„æ•´ä½“å‰²éŸ­èœ</p><p>æˆ‘æ²¡æœ‰åŠæ³•ç›´æ¥å¯¹æ¯”ä½¿ç”¨ Serverless çš„å¼€é”€ä¸ä¼ ç»ŸæœåŠ¡å™¨çš„å¼€é”€ï¼Œä½†æ˜¯ ä»¥AWS ä¸ºä¾‹ï¼ŒServerless ä½¿ç”¨çš„ API Gateway æ¯ç™¾ä¸‡æ¬¡ $3.5 è¯·æ±‚å¯¹äºä¸€ä¸ªæ­£å¸¸ä¼ä¸šæ¥è¯´ï¼Œåº”è¯¥æ˜¯ä¸å°çš„å¼€é”€ï¼Œç”šè‡³å¦‚æœé­å—ä¸€æ¬¡ DDNS æ”»å‡»çš„è¯ï¼Œç¡®å®æ˜¯æœ‰ç‚¹å®³æ€•ä½ çš„æˆ¿å­æ˜å¤©æ˜¯ä¸æ˜¯è¿˜åœ¨äº†ã€‚ã€‚ã€‚</p><p>è€Œç›¸æ¯”ä¹‹ä¸‹åªéœ€è¦å¤šèŠ±å‡ åˆ€é’±ä¹°ä¸€ä¸ªä¸é”™çš„äº‘æœåŠ¡å™¨ï¼Œç‹¬äº«å†…å­˜ï¼Œç›¸å¯¹ç¨³å®šçš„CPUï¼Œä»¥åŠå‡ ä¹æ— é™æµé‡ï¼ˆFair Useï¼‰ï¼Œæ˜¾è€Œæ˜“è§åº”è¯¥æ˜¯ä¸€ä¸ªæ›´çœé’±çš„é€‰æ‹©ã€‚</p><h2 id="ä½†è¿˜æ˜¯é¦™"><a href="#ä½†è¿˜æ˜¯é¦™" class="headerlink" title="ä½†è¿˜æ˜¯é¦™"></a>ä½†è¿˜æ˜¯é¦™</h2><p>åœ¨å¤§å…¬å¸é‡Œæœ‰ç€è‡ªå·±çš„åŸºç¡€è®¾ç½®ï¼Œè¿è¥ç€è‡ªå·±çš„äº‘åŸç”Ÿï¼Œé‚£ä¹ˆé€‚å½“çš„ä¸‹æ”¾ä¸€äº›ç®€å•çš„å¢åˆ æ”¹æŸ¥éœ€æ±‚ç»™å‰ç«¯ï¼Œæ•ˆç‡æå‡åº”è¯¥æ˜¯æ¯‹åº¸ç½®ç–‘çš„ã€‚</p><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>ä»¥ä¸Šï¼Œå¸Œæœ›æœ¬æ–‡çš„æ•´ä½“æ€æƒ³ï¼Œåˆæˆ–è€…æ˜¯ä»£ç ç‰‡æ®µï¼Œèƒ½å¤Ÿç»™ä½ å¸¦æ¥ä¸€äº›çµæ„Ÿæˆ–è€…å¯å‘ã€‚</p><p>æœ¬æ–‡æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿æŒ‡å‡ºï¼Œä¹Ÿæ¬¢è¿ä½ å¯¹æˆ‘å†™çš„è¿™ä¸ªå°å­¦ç”Ÿç½‘ç«™æå‡ºä»»ä½•æ„è§ã€‚</p><p>æ¬¢è¿ç»™æœ¬æ–‡æ‰“èµï¼ˆåœ¨çº¿è¦é¥­ï¼‰</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Serverlessï¼Œäº‘åŸç”Ÿï¼Œå¹´åˆåˆ°ç°åœ¨ï¼Œæˆ‘å…³æ³¨çš„å¥½å‡ ä¸ªå‰ç«¯å…¬ä¼—å·å’Œèµ„è®¯å·éƒ½åœ¨ç–¯ç‹‚æ¨è¿™äº›ä¸œè¥¿ï¼Œå»å¹´å¹´åº•å°±æ—©æœ‰è€³é—»ï¼ŒåŸæ¥ä»¥ä¸ºæ˜¯å„ç§æ´»åŠ¨å¤§ä¼šç»„ç»‡è”åˆäº‘å‚å•†åœ¨å¯¹ devops å–ç¥¨æ•´çš„æ–°æŠ€æœ¯ï¼Œä½†çƒ­åº¦è¶Šæ¥è¶Šå¼ºï¼Œäºæ˜¯æˆ‘ä¹Ÿè·ƒè·ƒæ¬²è¯•è¹­ä¸ªçƒ­åº¦&lt;/p&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
      <category term="Front-End-Dev" scheme="https://blog.xingoxu.com/categories/dev/Front-End-Dev/"/>
    
    
  </entry>
  
  <entry>
    <title>Serverless ã‹ã‚‰è¦‹ãˆã¦ããŸä¸€ä½“åŒ–è¨­è¨ˆ</title>
    <link href="https://blog.xingoxu.com/ja/2020/06/try-serverless/"/>
    <id>https://blog.xingoxu.com/ja/2020/06/try-serverless/</id>
    <published>2020-06-21T07:52:35.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘ Serverless ã‚’è§¦ã£ã¦ã¿ã¾ã—ã¦ã‚ã‚‹ã‚µã‚¤ãƒˆã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€ã£ã¦ã™ã”ãä¾¿åˆ©ã§çˆ†é€Ÿã§ã‚¦ã‚§ãƒ–ã‚’ä½œã‚Œã¦ã€ä¸€ç•ªãªã®ã¯Nuxt.jsã¨ç›¸æ€§è‰¯ãã¦ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒçºã¾ã£ã¦ç®¡ç†ã‚ã£ã¡ã‚ƒå®‰ããªã£ãŸã®ã§ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><a id="more"></a><h1 id="Serverless-ãªã«ãã‚Œï¼Ÿ"><a href="#Serverless-ãªã«ãã‚Œï¼Ÿ" class="headerlink" title="Serverless ãªã«ãã‚Œï¼Ÿ"></a>Serverless ãªã«ãã‚Œï¼Ÿ</h1><p>ä¸€è¨€ã„ã†ã¨ Cloud Function + Object Storage + Cloud Database + API Gateway and more by Cloud Service Provider. ç°¡å˜ã«ã„ã†ã¨ Serverless ã¨ã„ã†ã¨ã‚ã‚‹ OSS ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒ AWS/Azure/GCP ãªã©ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä¸€ã¤ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ã¦ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚‚ã„ã‚‰ãšã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¦ã‚‹ã€‚</p><p>ãƒ¡ãƒªãƒƒãƒˆã¨ã—ã¦ã¯ï¼š</p><ul><li>ã‚µãƒ¼ãƒ“ã‚¹ã®å¼¾æ€§ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°</li><li>å¾“é‡åˆ¶æ–™é‡‘</li><li>ã‚¤ãƒ³ãƒ•ãƒ©ã‚‚ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹æ¥­è€…ãŒã‚„ã£ã¦ãã‚Œã‚‹</li></ul><p>è‚å¿ƒã®ãƒ­ã‚¸ãƒƒã‚¯ã ã‘é›†ä¸­ã™ã‚‹å¿…è¦ãªã®ã§å°å­¦ç”Ÿã§ã‚‚ã‚µãƒ¼ãƒ“ã‚¹ã‚’çˆ†é€Ÿã§ä½œã‚Œã‚‹æ™‚ä»£ã«å…¥ã£ãŸã‹ã‚‚ï¼Ÿ</p><p>ãã‚“ãªã«ã™ã”ã„ãªã‚‰ã¿ã‚“ãªè¦šãˆãŸã‚‰ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®è·ãŒãªããªã£ãŸã‚“ã˜ã‚ƒï¼</p><h1 id="Serverlessã€ã‚„ã£ã¦ã‚„ã‚ã†"><a href="#Serverlessã€ã‚„ã£ã¦ã‚„ã‚ã†" class="headerlink" title="Serverlessã€ã‚„ã£ã¦ã‚„ã‚ã†"></a>Serverlessã€ã‚„ã£ã¦ã‚„ã‚ã†</h1><blockquote><p>ä»¥ä¸‹ã€AWS ã‚’ä¾‹ã¨ã—ã¦ä½¿ã„ã¾ã™</p></blockquote><p>çˆ†é€Ÿã‚’è¨€ã„ã¾ãã£ãŸã®ã§ã€AWS ã§ä¸€ã¤ä¸€ã¤è¨­å®šã™ã‚‹ã‚ã‘ãŒãªã„ã€‚ã‚‚ã¡ã‚ã‚“ãã†ã‚„ã£ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ãŒã€ä»Šæ—¥ä¿ºã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã£ã¦ç™ºè¡¨ã—ã¾ã™ãŒã€å›ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯å¾Œæ—¥ã¾ã§å¾…ãŸãªãã‚ƒã‚ˆã€‚</p><p>Github Star 3ä¸‡å€‹ã€ä¸€åƒä¸‡ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•°ã® serverless npm packageã€<code>npm i -g serverless</code>ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ãã—ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã“ã‚Œã‚’æ‰“ã¤ã ã‘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ serverless</span><br></pre></td></tr></table></figure><p>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŒå‡ºã¦ãã¦ãŠæ‰‹è»½ã«ç’°å¢ƒæ§‹ç¯‰ã‚’æ‰‹åŠ©ã‘ã—ã¾ã™ã­ã€‚</p><p>ãã—ã¦ã€ä½œã£ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«å…¥ã£ã¦ã€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sls deploy</span><br></pre></td></tr></table></figure><p>å‡ºã¦ããŸãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World!</span><br></pre></td></tr></table></figure><p>ã™ã£ã’ã‡ã˜ã‚ƒã‚“ã€ã‚‚ã†ã‚µãƒ¼ãƒãƒ¼ç«‹ã¦ã¾ã—ãŸã˜ã‚ƒã‚“ï¼</p><h1 id="Serverless-ã¨-Nuxt-js-ç›¸æ€§ã™ã”ãã„ã„"><a href="#Serverless-ã¨-Nuxt-js-ç›¸æ€§ã™ã”ãã„ã„" class="headerlink" title="Serverless ã¨ Nuxt.js ç›¸æ€§ã™ã”ãã„ã„"></a>Serverless ã¨ Nuxt.js ç›¸æ€§ã™ã”ãã„ã„</h1><p>ä»Šæ—¥åƒ•ã¯ <a href="https://whichcard.xingoxu.com/" target="_blank" rel="noopener">https://whichcard.xingoxu.com/</a> ã“ã®ã‚µã‚¤ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚</p><p>ä½•ã‹ã¨ã„ã†ã¨ã€æµ·å¤–ã‚«ãƒ¼ãƒ‰ã‚’ä½¿ã†æ™‚ãƒã‚¤ãƒ³ãƒˆ+æ‰‹æ•°æ–™ãŒã©ã®ã‚«ãƒ¼ãƒ‰ãŒä¸€ç•ªãŠå¾—ãªã®ãŒã‚ã‹ã‚“ãªã„ã®ã§ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãŒã‚ã‚‹ã¨ã‚ã‹ã‚Šã‚„ã™ãã¨æ€ã£ã¦ä½œã£ãŸã‚ã‘ã€‚</p><p>ãã—ã¦ã€ã“ã‚Œã‚’ä½œã‚‹ãŸã‚ã«ã€ãŸã£ãŸä¸‰ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã€‚</p><ol><li>ç‚ºæ›¿ã‚’å–ã£ã¦ãã¦</li><li>å½“æ—¥ã®ç‚ºæ›¿ã‚’ä¿å­˜ã™ã‚‹ï¼ˆCloud Functionã¯ç„¡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ãŸã‚ï¼‰</li><li>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§è¨ˆç®—ã—ã¦ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’å‡ºã—ã¾ã™</li></ol><p>Serverless ã®å®Ÿè·µã¨ã—ã¦ã¯æœ€é©ã¨æ€ã„ã¾ã™ã­ã€‚</p><p>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸã®ã§ã€ãã¡ã‚‰ã‚’è¦‹ãªãŒã‚‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ã„ãŸã ã‘ã‚‹ã¨å¤§æ­“è¿ã§ã™ã€‚</p><h2 id="ã£ã¦ãªãœ-Nuxt-js"><a href="#ã£ã¦ãªãœ-Nuxt-js" class="headerlink" title="ã£ã¦ãªãœ Nuxt.js"></a>ã£ã¦ãªãœ Nuxt.js</h2><ul><li>ã“ã‚“ãªã«å°ã•ã„ã‚‚ã®ã§ç’°å¢ƒæ§‹ç¯‰ã—ãŸããªã„ï¼ˆçˆ†é€Ÿã—ãŸã„ï¼‰</li><li>Vue ã«ä¸€ç•ªè©³ã—ã„ã®ã§ãªã‚‹ã¹ã Vue ä½¿ã„ãŸã„ï¼ˆçˆ†é€Ÿã‚ã‘ï¼‰</li><li>SSR ãŒã»ã—ã„ï¼ˆâ†é‡è¦ï¼‰</li><li>Programmatically ã§ä½¿ãˆã‚‹ï¼ˆâ†è¶…é‡è¦ï¼‰</li></ul><h2 id="Serverless-ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨è¨­å®š"><a href="#Serverless-ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨è¨­å®š" class="headerlink" title="Serverless ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨è¨­å®š"></a>Serverless ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨è¨­å®š</h2><p>ã‚“ã§ã€æ¤œç´¢ã—ãŸã‚‰æ„å¤–ã¨ Serverless ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã« Nuxt.js ã‚‚ã‚ã‚Šã¾ã™ã­ï¼<br>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã£ãŸã‚‰æ›´ã«é–‹ç™ºã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’åŠ é€Ÿã—ã‚ˆã†ã€ã„ã„ã£ã™ã­ï½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">serverless create --template-url https://github.com/tonyfromundefined/nuxt-serverless -n whichcard-abroad</span><br></pre></td></tr></table></figure><p>ä½œã£ãŸã‚‰ã€<code>serverless.yml</code>ã‚’ç·¨é›†ã—ã¾ã™ã€‚Non-relation Databaseå‘¨ã‚Šã®è¨­å®šã‚’ã—ã¾ã™ã€‚</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resources:</span></span><br><span class="line">  <span class="attr">Resources:</span></span><br><span class="line">    <span class="attr">CurrencyTable:</span></span><br><span class="line">      <span class="attr">Type:</span> <span class="string">AWS::DynamoDB::Table</span></span><br><span class="line">      <span class="attr">Properties:</span></span><br><span class="line">        <span class="attr">TableName:</span> <span class="string">$&#123;env:DYANMODB_TABLE&#125;</span></span><br><span class="line">        <span class="attr">AttributeDefinitions:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">AttributeName:</span> <span class="string">$&#123;env:DYANMODB_PRIMARY_KEY&#125;</span></span><br><span class="line">            <span class="attr">AttributeType:</span> <span class="string">S</span></span><br><span class="line">        <span class="attr">KeySchema:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">AttributeName:</span> <span class="string">$&#123;env:DYANMODB_PRIMARY_KEY&#125;</span></span><br><span class="line">            <span class="attr">KeyType:</span> <span class="string">HASH</span></span><br><span class="line">        <span class="attr">ProvisionedThroughput:</span></span><br><span class="line">          <span class="attr">ReadCapacityUnits:</span> <span class="number">1</span></span><br><span class="line">          <span class="attr">WriteCapacityUnits:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ¨©é™ã‚’ä¸ãˆãªã„ã¨ã¯ã„ã‘ãªã„ã®ã§ã€lambda function ã‚’èµ°ã£ã¦ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã™ãªã‚ã¡ serverless ã‚’å©ãã¨ãã« key ã‚’ç™ºè¡Œã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ¨©é™ã‚’ä¸ãˆã¾ã™ã®ã§ã€<code>serverless.yml</code> ã®ä¸­ã«ã“ã‚Œã‚’åŠ ãˆã‚ˆã†</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">provider:</span></span><br><span class="line">  <span class="attr">iamRoleStatements:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">      <span class="attr">Action:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:Query</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:Scan</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:GetItem</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:PutItem</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:UpdateItem</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:DeleteItem</span></span><br><span class="line">      <span class="attr">Resource:</span> <span class="string">"arn:aws:dynamodb:$&#123;self:provider.region&#125;:*:table/$&#123;env:DYANMODB_TABLE&#125;"</span></span><br></pre></td></tr></table></figure><p>ã¯ã„ã‚µãƒ¼ãƒãƒ¼è¨­å®šçµ‚äº†ğŸ™ŒãŠã‚ã§ã¨ã†</p><p>æ¬¡ã¯ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®TypeScriptã‚’è¿½åŠ ã—ã¾ã™</p><p>ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å…¨éƒ¨è¨­å®šã—ã¦ãã‚Œã¾ã—ãŸãŒã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®TypeScriptã¯è¿½åŠ ã—ã¦ãªã„ã®ã§ã€</p><p><a href="https://github.com/xingoxu/whichcard-abroad/blob/master/tsconfig.json" target="_blank" rel="noopener"><code>tsconfig.json</code></a> ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€<a href="https://github.com/xingoxu/whichcard-abroad/blob/master/tsconfig-server.json" target="_blank" rel="noopener"><code>tsconfig-server.json</code></a>ã«å¤‰æ›´ã—ã¾ã™ã€‚</p><p>å†…å®¹ã‚‚ã¡ã‚‡ã£ã¨å¤‰ã‚ã‚Šã¾ã—ãŸãŒã€ã“ã“ã«è²¼ã‚‰ãªãä¸Šã®ãƒªãƒ³ã‚¯ã«è¦‹ã«è¡Œã£ã¦ã„ãŸã ã‘ã‚‹ã¨ğŸ™ã€‚</p><p>TypeScriptè¿½åŠ ã—ãŸã‚‰ js ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãªãã‚ƒ node.js ã® lambda function ã«ã¯ä½¿ãˆãªã„ã®ã§ <a href="https://github.com/xingoxu/whichcard-abroad/blob/master/webpack.config.js" target="_blank" rel="noopener"><code>webpack.config.js</code></a>ã«<code>ts-loader</code>ã®è¿½åŠ ã‚’ãŠå¿˜ã‚Œãªãã€‚</p><h2 id="ç‚ºæ›¿ã‚’å–ã£ã¦ãã¦"><a href="#ç‚ºæ›¿ã‚’å–ã£ã¦ãã¦" class="headerlink" title="ç‚ºæ›¿ã‚’å–ã£ã¦ãã¦"></a>ç‚ºæ›¿ã‚’å–ã£ã¦ãã¦</h2><p><a href="https://github.com/xingoxu/whichcard-abroad/blob/master/src/api/functions/visa.ts" target="_blank" rel="noopener">VISA</a> ã‚«ãƒ¼ãƒ‰ã‚’ä¾‹ã¨ã—ã¦ã€ç‚ºæ›¿ã¯<a href="https://usa.visa.com/support/consumer/travel-support/exchange-rate-calculator.html" target="_blank" rel="noopener">ã“ã“ã§</a> å…¬è¡¨ã•ã‚Œã¾ã™ã€‚</p><p><code>axios</code>ã¨<code>cheerio</code>ã‚’å°å…¥ã—ã¦ã€jQueryæ„Ÿã§40è¡Œã®ã‚³ãƒ¼ãƒ‰ã§æ¥½ã«ç‚ºæ›¿ã‚’å–ã£ã¦ãã¾ã—ãŸ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span>;</span><br><span class="line"><span class="keyword">import</span> cheerio <span class="keyword">from</span> <span class="string">'cheerio'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; format &#125; <span class="keyword">from</span> <span class="string">'date-fns'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getVisaCurrency = <span class="keyword">async</span> (&#123;</span><br><span class="line">  transCurr = <span class="string">"USD"</span>,</span><br><span class="line">  billCurr = <span class="string">"JPY"</span>,</span><br><span class="line">  date</span><br><span class="line">&#125;) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; data: htmlBody &#125; = <span class="keyword">await</span> axios.get&lt;</span><br><span class="line">    <span class="built_in">string</span></span><br><span class="line">  &gt;(</span><br><span class="line">    <span class="string">`https://usa.visa.com/support/consumer/travel-support/exchange-rate-calculator.html`</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        amount: <span class="number">1</span>,</span><br><span class="line">        fee: <span class="string">'0.0'</span>,</span><br><span class="line">        utcConvertedDate: <span class="string">''</span>,</span><br><span class="line">        exchangedate: format(</span><br><span class="line">          date,</span><br><span class="line">          <span class="string">'MM/dd/yyyy'</span></span><br><span class="line">        ),</span><br><span class="line">        fromCurr: billCurr,</span><br><span class="line">        toCurr: transCurr,</span><br><span class="line">        submitButton:</span><br><span class="line">          <span class="string">'Calculate exchange rate'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> $ = cheerio.load(htmlBody);</span><br><span class="line">  <span class="keyword">const</span> $targetDOM = $(</span><br><span class="line">    <span class="string">'.converted-amount-value'</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> result = $targetDOM</span><br><span class="line">    .eq($targetDOM.length - <span class="number">2</span>)</span><br><span class="line">    .text()</span><br><span class="line">    .match(<span class="regexp">/^\d+\.\d+/</span>)![<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; getVisaCurrency &#125;;</span><br></pre></td></tr></table></figure><h2 id="å½“æ—¥ã®ç‚ºæ›¿ã‚’ä¿å­˜ã™ã‚‹"><a href="#å½“æ—¥ã®ç‚ºæ›¿ã‚’ä¿å­˜ã™ã‚‹" class="headerlink" title="å½“æ—¥ã®ç‚ºæ›¿ã‚’ä¿å­˜ã™ã‚‹"></a>å½“æ—¥ã®ç‚ºæ›¿ã‚’ä¿å­˜ã™ã‚‹</h2><p>å¾“é‡åˆ¶èª²é‡‘ãªã®ã§ã€ç©ºã„ã¦ã„ã‚‹æ™‚ã¯ãƒªã‚½ãƒ¼ã‚¹ã¯é…ã‚‰ã‚Œã‚‹ã‚ã‘ãŒãªã„ã€ãªã®ã§Cloud Functionã¯ç„¡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯ç­‹ãŒé€šã£ã¦ã„ã‚‹ã€‚</p><p>ä¸€ã¤ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¯¾ã—ã¦ã€ç‚ºæ›¿ã‚’å–ã£ã¦ãã‚‹ã®ã¯å•é¡Œãªã„ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã¨ã—ã¦ã¯æœ€ä½ã§ã—ãŸâ€¦</p><p>ã—ã‹ã‚‚ã€ãƒ‡ãƒ¼ã‚¿ãŒå–ã‚‰ã‚ŒãŸã‚µã‚¤ãƒˆã«è¦‹ã¤ã‹ã‚‰ã‚ŒãŸã‚‰ã€AWSã®IPå…¨éƒ¨ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹ã¨ä¸€ç•ªã‚„ã°ã„ã€‚ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ã‚‚ã€å°‘ã—ãƒ¢ãƒ©ãƒ«ãŒã‚ã‚‹æ–¹æ³•ã§å–ã‚‹ã»ã†ãŒã„ã„ã€‚</p><p><code>aws-sdk</code> ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã€TypeScriptã§ã¯ã¡ã‚‡ã£ã¨è»¢æ›é¢ã§ã¯é¢å€’ï¼ˆå‹å®šç¾©ã§ã¯å°‘ã—ã‚³ãƒ¼ãƒ‰å¢—ã‚„ã•ãªãã‚ƒï¼‰ã ã‘ã©ã€åŸºæœ¬çš„ã«ã¯æ™‚é–“ã‹ã‹ã£ã¦ãªã„ã¨æ°—ãŒã™ã‚‹ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; DynamoDB &#125; <span class="keyword">from</span> <span class="string">'aws-sdk'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; format &#125; <span class="keyword">from</span> <span class="string">'date-fns'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> DATE_FORMAT = <span class="string">'yyyy-MM-dd'</span>;</span><br><span class="line"><span class="keyword">const</span> DYANMODB_TABLE: <span class="built_in">string</span> = <span class="string">"currencyTable"</span>;</span><br><span class="line"><span class="keyword">const</span> DYANMODB_PRIMARY_KEY: <span class="built_in">string</span> = <span class="string">"currency"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dynamoDBClient = <span class="keyword">new</span> DynamoDB(&#123;</span><br><span class="line">  region: process.env.DYANMODB_REGION</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> queryFromCache = <span class="keyword">async</span> (</span><br><span class="line">  date: <span class="built_in">Date</span></span><br><span class="line">): <span class="built_in">Promise</span>&lt;DBCurrencyObject | <span class="literal">undefined</span>&gt; =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    Count,</span><br><span class="line">    Items</span><br><span class="line">  &#125; = <span class="keyword">await</span> dynamoDBClient</span><br><span class="line">    .query(&#123;</span><br><span class="line">      TableName: DYANMODB_TABLE,</span><br><span class="line">      KeyConditionExpression: <span class="string">`#key=:dt`</span>,</span><br><span class="line">      ExpressionAttributeNames: &#123;</span><br><span class="line">        <span class="string">'#key'</span>: DYANMODB_PRIMARY_KEY</span><br><span class="line">      &#125;,</span><br><span class="line">      ExpressionAttributeValues: &#123;</span><br><span class="line">        <span class="string">':dt'</span>: &#123;</span><br><span class="line">          S: format(date, DATE_FORMAT)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .promise();</span><br><span class="line">  <span class="keyword">if</span> (Count &amp;&amp; Count == <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> DyanmodbResultAdapter(</span><br><span class="line">      Items![<span class="number">0</span>]</span><br><span class="line">    ) <span class="keyword">as</span> DBCurrencyObject;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> storeResult = <span class="keyword">async</span> (&#123;</span><br><span class="line">  date,</span><br><span class="line">  result,</span><br><span class="line">  billCurr,</span><br><span class="line">  transCurr,</span><br><span class="line">  brand</span><br><span class="line">&#125;): <span class="built_in">Promise</span>&lt;<span class="built_in">void</span>&gt; =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> cacheResult = <span class="keyword">await</span> queryFromCache(</span><br><span class="line">    date</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">if</span> (!cacheResult)</span><br><span class="line">    cacheResult = &#123;</span><br><span class="line">      date: format(date, DATE_FORMAT)</span><br><span class="line">    &#125;;</span><br><span class="line">  <span class="keyword">if</span> (!cacheResult[brand])</span><br><span class="line">    cacheResult[brand] = &#123;&#125;;</span><br><span class="line">  <span class="keyword">if</span> (!cacheResult[brand]![transCurr])</span><br><span class="line">    cacheResult[brand]![transCurr] = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  cacheResult[brand]![transCurr]![</span><br><span class="line">    billCurr</span><br><span class="line">  ] = result;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> dynamoDBClient</span><br><span class="line">    .updateItem(&#123;</span><br><span class="line">      Key: &#123;</span><br><span class="line">        [DYANMODB_PRIMARY_KEY]: &#123;</span><br><span class="line">          S: format(date, DATE_FORMAT)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      TableName: DYANMODB_TABLE,</span><br><span class="line">      UpdateExpression: <span class="string">`set <span class="subst">$&#123;brand&#125;</span>=:<span class="subst">$&#123;brand&#125;</span>`</span>,</span><br><span class="line">      ExpressionAttributeValues: &#123;</span><br><span class="line">        [<span class="string">`:<span class="subst">$&#123;brand&#125;</span>`</span>]: &#123;</span><br><span class="line">          M: DyanmodbRequestAdapter(</span><br><span class="line">            cacheResult[brand]!</span><br><span class="line">          )</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .promise();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; queryFromCache, storeResult &#125;;</span><br></pre></td></tr></table></figure><p><code>DyanmodbRequestAdapter</code>ã¨<code>DyanmodbResultAdapter</code>ã¯ aws-sdk ã‚’ä½¿ã†ãŸã‚ã«ãƒ‡ãƒ¼ã‚¿ã®è»¢æ›é–¢æ•°ã€‚é•·ã„ã®ã§ã“ã“ã§è²¼ã‚‰ãªãã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰è¦‹ã¦ã„ãŸã ã‘ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚‹æ™‚ã¨ä¿å­˜ã™ã‚‹æ™‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ¥ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã™ã®ã§ã€<code>asyncOnce</code>ã®é–¢æ•°ã‚’æ›¸ã„ã¦å…¥ã‚Šå£ã‚’ãƒ©ãƒƒãƒ”ãƒ³ã‚°ã—ã¦ä¸€å›ã ã‘å®Ÿè¡Œã•ã›ã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncOnce</span>&lt;</span></span><br><span class="line"><span class="function">  <span class="title">T</span> <span class="title">extends</span> (<span class="params">...args: <span class="built_in">any</span></span>) =&gt; <span class="title">Promise</span>&lt;<span class="title">any</span>&gt;</span></span><br><span class="line"><span class="function">&gt;(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  func: (</span></span></span><br><span class="line"><span class="function"><span class="params">    ...args: Parameters&lt;T&gt;</span></span></span><br><span class="line"><span class="function"><span class="params">  ) =&gt; ReturnType&lt;T&gt;</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> running: ReturnType&lt;</span><br><span class="line">    <span class="keyword">typeof</span> func</span><br><span class="line">  &gt; | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    ...args: Parameters&lt;<span class="keyword">typeof</span> func&gt;</span><br><span class="line">  ) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (running === <span class="literal">null</span>) &#123;</span><br><span class="line">      running = func(...args);</span><br><span class="line">      running.finally(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        running = <span class="literal">null</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> running;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’è¨ˆç®—ã—ã¾ã™"><a href="#ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’è¨ˆç®—ã—ã¾ã™" class="headerlink" title="ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’è¨ˆç®—ã—ã¾ã™"></a>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’è¨ˆç®—ã—ã¾ã™</h2><p>ã•ã£ãã‚‚è¨€ã£ãŸã‘ã©ã€Nuxt.js ã® Programmatically ã§ä½¿ãˆã‚‹ã®ã¯é‡è¦ã€‚ãªãœé‡è¦ã¨ã„ã†ã¨ã€Cloud Function ã®å…¥ã‚Šå£ã¯ä¸€ã¤ã§ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¥ã‚‹æ™‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨APIã®ã‚µãƒ¼ãƒ“ãƒ³ã‚°ã¯ä¸¡æ–¹ç«‹ãŸãªãã‚ƒã€‚</p><p>å¾“æ¥ã®ã‚„ã‚Šæ–¹ã¨ã—ã¦ã¯ã€<code>Express.js</code> ãªã©ã§Routerã‚’è¿½åŠ ã—ã¦ã€é™çš„HTMLã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã€ã„ã‚ã‚†ã‚‹ã‚µãƒ¼ãƒãƒ¼ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€‚</p><p>ãã‚Œã ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ã¨ã£ã¦ã¯ã¡ã‚‡ã£ã¨ä¸ä¾¿ã€ã§ã‚‚ã“ã‚Œã‚’ä½¿ã£ãŸã‚‰ã€ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ•ãƒ­ãƒ³ãƒˆãŒè³¢ãçºã¾ã£ãŸã€‚</p><p>ã¡ã‚‡ã£ã¨è¦‹ã¦ã¿ã¾ã—ã‚‡ã†</p><p>SFC ã§ã•ã£ãæ›¸ã„ãŸã‚µãƒ¼ãƒãƒ¼é–¢æ•°ã‚’ import ã—ã¾ã™</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; response &#125; <span class="keyword">from</span> <span class="string">'@/api/functions/currency'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> asyncData(context) &#123;</span><br><span class="line">    <span class="keyword">let</span> currencyData;</span><br><span class="line">    <span class="keyword">if</span> (process.server &amp;&amp; context) &#123;</span><br><span class="line">      currencyData = <span class="keyword">await</span> response(</span><br><span class="line">        context.req</span><br><span class="line">      );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> data = <span class="keyword">await</span> axios.$<span class="keyword">get</span>(</span><br><span class="line">        '/currency',</span><br><span class="line">        &#123;</span><br><span class="line">          params: &#123; ...someParams &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      currencyData = data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123; currencyData &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãã—ãŸã‚‰ã€SSR ã®å ´åˆã¯ã‚µãƒ¼ãƒãƒ¼è‡ªèº«ãŒè‡ªèº«ã® <code>/currency</code> ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã“ã¨ã¯ãªããªã‚Šã¾ã—ãŸã€‚</p><p>ã¾ãŸã€ã“ã®è¨­è¨ˆã®ã„ã„ã¨ã“ã‚ã¯ã€ã‚‚ã—ã»ã‹ã®ãƒšãƒ¼ã‚¸ãŒãªã‘ã‚Œã°ã€<code>/currency</code> ã® API ã‚‚å¤–ã«å‡ºã•ãªãã¦ã‚‚ã„ã„ã§ã™ã€Nuxt.js ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã¨ã—ã¦ä½¿ã£ãŸã€‚</p><p>Node.js ã‚’ã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦ä½¿ã£ãŸæ–¹ã¯ã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€æ™®é€šã®ã‚µãƒ¼ãƒãƒ¼ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã—ã¦ã‹ã‚‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ãŒã€ã“ã“ã§ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’å…ˆã«æ›¸ã„ã¡ã‚ƒã£ã¦ã€ãã®å¾Œã‚µãƒ¼ãƒãƒ¼ã®é–¢æ•°ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚‹ã€‚</p><p>æ›¸ãå¿ƒåœ°ã‚‚ã‚ã‹ã‚Šã‚„ã™ã„ã€‚</p><p>ã™ã”ããªã„ï¼Ÿ</p><p>æ®‹ã‚Šã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ãªã©ã¯ã€ã“ã“ã§ã¯ç•¥ã—ã¾ã™ã€‚</p><h1 id="å•é¡Œã‚’è§£æ±º"><a href="#å•é¡Œã‚’è§£æ±º" class="headerlink" title="å•é¡Œã‚’è§£æ±º"></a>å•é¡Œã‚’è§£æ±º</h1><h2 id="extractCSS-ã‚’ã¤ã‘ã‚‹"><a href="#extractCSS-ã‚’ã¤ã‘ã‚‹" class="headerlink" title="extractCSS ã‚’ã¤ã‘ã‚‹"></a>extractCSS ã‚’ã¤ã‘ã‚‹</h2><p>Nuxt.js ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦ã¯ <code>extractCSS</code> ã‚’é–‰ã˜ã¦ã¾ã™ã€UI Frameworkã‚’ä½¿ã£ãŸæ–¹ã¯ã‚‚ã—ã‹ã—ã¦HTMLã¯ã¨ã‚“ã§ã‚‚ãªã„é•·ã•ã«ã•ã‚Œã¾ã—ãŸã€‚<code>nuxt.config.js</code> ã«ã¦ã®èµ·ç”¨ã‚’ãŠå¿˜ã‚Œãªãã€‚</p><h2 id="Nuxt-js-ãŒ-aws-sdk-ã‚’ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®JavaScriptã«ãƒãƒ³ãƒ‰ãƒ«ã—ã¾ã£ãŸ"><a href="#Nuxt-js-ãŒ-aws-sdk-ã‚’ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®JavaScriptã«ãƒãƒ³ãƒ‰ãƒ«ã—ã¾ã£ãŸ" class="headerlink" title="Nuxt.js ãŒ aws-sdk ã‚’ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®JavaScriptã«ãƒãƒ³ãƒ‰ãƒ«ã—ã¾ã£ãŸ"></a>Nuxt.js ãŒ aws-sdk ã‚’ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®JavaScriptã«ãƒãƒ³ãƒ‰ãƒ«ã—ã¾ã£ãŸ</h2><p>Nuxt.js ã® webpackã‹ã€<code>vue-loader</code>ã‹ã©ã£ã¡ã®å•é¡Œã¾ã æ·±ãè¦‹ã¦ãªã„ãŒï¼ˆçˆ†é€Ÿã§ä½œã‚‹ã‚ã‘ï¼‰ã€nuxt plugin ã§è¿‚å›ã™ã‚‹ã“ã¨ã¯ã§ãã‚‹ã€‚</p><p><code>plguins</code> ãƒ•ã‚©ãƒ«ãƒ€ä¸‹ã« <a href="https://github.com/xingoxu/whichcard-abroad/blob/master/src/plugins/getData.server.ts" target="_blank" rel="noopener"><code>getData.server.ts</code></a>ã‚’ä½œã‚Šã¾ã™ã€</p><p>ã‚µãƒ¼ãƒãƒ¼é–¢æ•°ã‚’handlerã«ã—ã¦ã€<code>Vue</code> ã§ã‚‚ã„ã„ã—ã€<code>context</code> ã§ã‚‚ã„ã„ã— SFC ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã§ã‚ã‚Œã°OKã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; response &#125; <span class="keyword">from</span> <span class="string">'@/api/functions/currency'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Context &#125; <span class="keyword">from</span> <span class="string">'@nuxt/types'</span>;</span><br><span class="line"></span><br><span class="line">Vue.$serverGetCurrency = <span class="function">(<span class="params">context: Context</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> response(context.req);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>SFCã§ã•ã£ãã®ã¨ã“ã‚ã§ã“ã®é–¢æ•°ã‚’ä½¿ã†</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (process.server &amp;&amp; context) &#123;</span><br><span class="line">  currencyData = <span class="keyword">await</span> Vue.$serverGetCurrency(</span><br><span class="line">    context</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>TypeScriptã®å‹å®šç¾©ãªã‚‰ã€ãã®é–¢æ•°ã®éš£ã§ declare ã™ã‚Œã°ã©ã“ã§ã‚‚å•é¡Œãªã„ã¯ãšã§ã™ï¼ˆ<a href="https://github.com/xingoxu/whichcard-abroad/blob/master/src/plugins/getData.server.ts" target="_blank" rel="noopener">ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰</a>ï¼‰</p><blockquote><p>ãƒ¬ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ <a href="https://nuxtjs.org/guide/plugins/" target="_blank" rel="noopener">Nuxt.js Plugins</a> &amp; <a href="https://vuejs.org/v2/guide/typescript.html#Augmenting-Types-for-Use-with-Plugins" target="_blank" rel="noopener">Vue.js Augumenting Types for Use With Plugins</a></p></blockquote><h1 id="ã‚ã£ã¡ã‚ƒä¾¿åˆ©ã€è½ã¨ã—ç©´ãªã„ã®ï¼Ÿ"><a href="#ã‚ã£ã¡ã‚ƒä¾¿åˆ©ã€è½ã¨ã—ç©´ãªã„ã®ï¼Ÿ" class="headerlink" title="ã‚ã£ã¡ã‚ƒä¾¿åˆ©ã€è½ã¨ã—ç©´ãªã„ã®ï¼Ÿ"></a>ã‚ã£ã¡ã‚ƒä¾¿åˆ©ã€è½ã¨ã—ç©´ãªã„ã®ï¼Ÿ</h1><p>Serverless ã¯æ–°ã—ã„ã‚‚ã®ã§ã¯ãªã„ã€Cloud Functionã€Object Storageã€Cloud Database ã©ã£ã¡ã§ã‚‚2020å¹´ã‹ã‚‰å‡ºãŸã‚‚ã®ã§ã¯ãªã„ã€‚ãŸã ãã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ä¼æ¥­ã®ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ©ã‚¦ãƒ³ãƒã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’ã™ã”ãæ‰‹åŠ©ã‘ã—ã¾ã—ãŸã€‚å½¼é”ã«ã¨ã£ã¦ã€ã‚µãƒ¼ãƒãƒ¼ã•ãˆã‚‚ãªã„ã—ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚‚ã‚ãšã‹æ•°äººã‚‚ã—ãã¯ä¸€äººã ã‘ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãã‚“ãªçŠ¶æ³ã®ä¼æ¥­ã«ã¯ã¨ã¦ã‚‚ãµã•ã‚ã—ã„ã‚‚éè¨€ã§ã¯ãªã„ã€‚æ™‚é–“ã¨ã‚³ã‚¹ãƒˆä¸¡æ–¹çœã‘ã‚‰ã‚Œã‚‹é¸æŠã§ã™ã€‚</p><p>ã§ã‚‚ã­â€¦</p><h2 id="ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã€ãã‚‰ã§ãƒ‡ãƒãƒƒã‚°"><a href="#ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã€ãã‚‰ã§ãƒ‡ãƒãƒƒã‚°" class="headerlink" title="ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã€ãã‚‰ã§ãƒ‡ãƒãƒƒã‚°"></a>ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã€ãã‚‰ã§ãƒ‡ãƒãƒƒã‚°</h2><p>ã€Œã‚ã‚‰ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ã¡ã‚ƒã‚“ã¨å‹•ã„ã¦ã‚‹ã®ã«ã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸã‚‰ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¡ã‚ƒã£ãŸï¼ã€<br>ãã‚Œã¯ãªãœã§ã™ã‹ï¼ŸAWS ã‚’ä¾‹ã¨ã—ã¦Cloud Native ã¯ã©ã† node_modules ã‚’å‡¦ç†ã—ã¦ã‚‹ã®ã¯è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><blockquote><p><a href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/nodejs-package.html" target="_blank" rel="noopener">Node.js ã® AWS Lambda ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</a></p></blockquote><p>ãã®ç­”ãˆã¯ã€ã‚³ãƒ¼ãƒ‰ã¨ä¸€ç·’ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚</p><p>ã¤ã¾ã‚Šã€node_modulesã«node-gypãªã© native ã‚’ä¾å­˜ã—ã¦ã‚‹ã‹ã¤ aws ã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢é©ã—ã¦ãªã„å ´åˆã¯å¿…ãšã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã®ã§ã¯ãªã„ã‹ã€ã—ã‹ã‚‚ãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯æ¤œçŸ¥ã§ããªã„ã€‚</p><blockquote><p>ã»ã‚‰ <a href="https://stackoverflow.com/questions/36079438/npm-install-with-aws-lambda" target="_blank" rel="noopener">npm install with AWS Lambda - Stack Overflow</a></p></blockquote><h2 id="ã‚³ã‚¹ãƒˆ"><a href="#ã‚³ã‚¹ãƒˆ" class="headerlink" title="ã‚³ã‚¹ãƒˆ"></a>ã‚³ã‚¹ãƒˆ</h2><p>ã•ã£ãã¾ã ã‚³ã‚¹ãƒˆã‚’çœã‘ã‚‹ã¨è¨€ã£ãŸã®ã«ã€ãã‚Œãªãœã¾ãŸå•é¡Œã¨è¦–ã•ã‚Œã¾ã™ã‹ï¼Ÿ</p><p>ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ãªãŒã‚‰ã€ã‚¤ãƒ³ãƒ•ãƒ©ã€è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã€ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚‚æä¾›ã—ã€ãã‚“ãªã«ã„ã„ã“ã¨ç„¡æ–™ã®ã‚ã‘ãŒãªã„ã€‚æœ€åˆã«ä¸€å¹´ç„¡æ–™ã€å¾“é‡åˆ¶èª²é‡‘ã®å¾Œã‚ã¯ã€ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’åŒæ¢±ã—ã¦ä¸€ç·’ã«èª²é‡‘ã—ã¡ã‚ƒã†ã¨ã€ä¾¡æ ¼ã«å¯¾ã—ã¦æ•æ„Ÿã§ã¯ãªã„äººã‚’ã€Œé¨™ã™ã€</p><p>Serverless ã¨å¾“æ¥ã®ã‚µãƒ¼ãƒãƒ¼ã‚’ç›´æ¥ã§æ¯”è¼ƒã™ã‚‹ã“ã¨ã¯ã§ããªã„ã€ãŸã ã€AWS ã® API Gateway ç™¾ä¸‡å› $3.5ã®æ–™é‡‘ã¯é«˜ããªã„ï¼ŸDDNSã‚’å—ã‘ãŸã‚‰ã€ãŠå®¶é£›ã‚“ã§ããã†ã‚ˆã€‚</p><p>$5ã§ã¯ vultr è²·ãˆã¾ã™ã€ã—ã‹ã‚‚ç„¡é™ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã€å®‰å®šã—ã¦ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã€ã‚µãƒ¼ãƒ“ã‚¹ãŒã§ã‹ããªã£ãŸã‚‰ã‚³ã‚¹ãƒˆçš„ã«ã¯çµ¶å¯¾å‹ã¤ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«å¯¾ã—ã¦ã®ä¾å­˜æ€§"><a href="#ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«å¯¾ã—ã¦ã®ä¾å­˜æ€§" class="headerlink" title="ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«å¯¾ã—ã¦ã®ä¾å­˜æ€§"></a>ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«å¯¾ã—ã¦ã®ä¾å­˜æ€§</h2><p>AWS ã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç«‹ã£ãŸãŒã€å¾Œæ—¥ AWS ã¨æ‰ã‚ãŸã‚‰ã€ã¾ãŸ Amazon ã¨åˆ©ç›Šä¸Šã§å¯¾ç«‹ã—ã¦ä»–ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã«è¡ŒããŸã„ã€ã‚‚ã—ãã¯è‡ªåˆ†ã®ã‚µãƒ¼ãƒãƒ¼ãŒã‚ã‚Šã¾ã—ã¦è‡ªåˆ†ã®ã‚µãƒ¼ãƒãƒ¼ã«ç§»è¡Œã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€ã‚³ãƒ¼ãƒ‰ã‚’ã‚‚ã†ä¸€åº¦æ›¸ã‹ãªãã‚ƒã—ã€è¨­å®šã¨ã‹è¦‹ç›´ã•ãªã„ã¨ã‚‚è¡Œã‘ãªã„ã—â€¦</p><h2 id="ã§ã‚‚ãã®ã„ã„ã¨ã“ã‚ã‚’å¿˜ã‚Œãªã„ã§"><a href="#ã§ã‚‚ãã®ã„ã„ã¨ã“ã‚ã‚’å¿˜ã‚Œãªã„ã§" class="headerlink" title="ã§ã‚‚ãã®ã„ã„ã¨ã“ã‚ã‚’å¿˜ã‚Œãªã„ã§"></a>ã§ã‚‚ãã®ã„ã„ã¨ã“ã‚ã‚’å¿˜ã‚Œãªã„ã§</h2><p>ã‚‚ã—ã§ã‹ã„ä¼šç¤¾ã®ã§ã‚ã‚Œã°ã€è‡ªåˆ†ãŒãã®ã‚¤ãƒ³ãƒ•ãƒ©æŒã£ã¦ã¦ã€Serverless ã¿ãŸã„ã®ã‚‚ã®ã‚’ä½œã£ãŸã‚‰ã€é©å½“ã«ç°¡å˜ãªã‚‚ã®ã‚’ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã«ä»»ã›ãŸã‚‰åŠ¹ç‡çš„ã«ã¯ã™ã”ãæ—©ã„ã®ã§ã¯ãªã„ã‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã­ã€‚</p><h1 id="ä»¥ä¸Š"><a href="#ä»¥ä¸Š" class="headerlink" title="ä»¥ä¸Š"></a>ä»¥ä¸Š</h1><p>ã”é–²è¦§ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€ã“ã®è¨˜äº‹ã®è€ƒãˆã€ã‚³ãƒ¼ãƒ‰ã€ã‚ãªãŸã«ã‚¢ã‚¤ãƒ‡ã‚¢ã¾ãŸã¯ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚‚ãŸã‚‰ã—ãŸã‚‰å¬‰ã—ã„ã§ã™ã€‚</p><p>è¨˜äº‹ã«ã¤ã„ã¦è³ªå•ã€ã¾ãŸã¯ã“ã®å°å­¦ç”Ÿã‚‚ä½œã‚Œã‚‹ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«ã¤ã„ã¦æ„è¦‹ãŒã‚ã‚Œã°å¤§æ­“è¿ã§ã™ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘ Serverless ã‚’è§¦ã£ã¦ã¿ã¾ã—ã¦ã‚ã‚‹ã‚µã‚¤ãƒˆã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€ã£ã¦ã™ã”ãä¾¿åˆ©ã§çˆ†é€Ÿã§ã‚¦ã‚§ãƒ–ã‚’ä½œã‚Œã¦ã€ä¸€ç•ªãªã®ã¯Nuxt.jsã¨ç›¸æ€§è‰¯ãã¦ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒçºã¾ã£ã¦ç®¡ç†ã‚ã£ã¡ã‚ƒå®‰ããªã£ãŸã®ã§ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
      <category term="Front-End-Dev" scheme="https://blog.xingoxu.com/categories/dev/Front-End-Dev/"/>
    
    
  </entry>
  
  <entry>
    <title>Google I/O 2019 Web å‰ç«¯å†…å®¹æ€»ç»“</title>
    <link href="https://blog.xingoxu.com/2019/05/2019-05-17-google-io-tech/"/>
    <id>https://blog.xingoxu.com/2019/05/2019-05-17-google-io-tech/</id>
    <published>2019-05-17T08:55:59.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Web-æ–°äº§å“-æ–°æŠ€æœ¯"><a href="#Web-æ–°äº§å“-æ–°æŠ€æœ¯" class="headerlink" title="Web æ–°äº§å“ / æ–°æŠ€æœ¯"></a>Web æ–°äº§å“ / æ–°æŠ€æœ¯</h1><ul><li>web.dev<ul><li><a href="https://web.dev" target="_blank" rel="noopener">https://web.dev</a></li><li>ä¸€ä¸ªå¯ä»¥ç”¨æ¥å­¦ä¹ æ¡†æ¶ã€æ€§èƒ½ã€å„ç§ Web æŠ€æœ¯çš„åœ°æ–¹</li><li>è¿˜æœ‰å®æˆ˜ Codelab</li><li>æ­£åœ¨è¿›è¡Œå¤šå›½ç¿»è¯‘</li></ul></li><li>Lighthouse Performance Budgets<ul><li><a href="https://developers.google.com/web/tools/lighthouse/audits/budgets" target="_blank" rel="noopener">https://developers.google.com/web/tools/lighthouse/audits/budgets</a></li><li>åœ¨Lighthouseä¸­è®¾å®šæ€§èƒ½é¢„ç®—ï¼Œè®©Lighthouseåœ¨æµ‹è¯•æ€§èƒ½æ—¶ä½¿ç”¨å¹¶æ‰“åˆ†</li></ul></li><li>PWA Desktop<ul><li>PWAç°åœ¨å¯ä»¥å„å¤§æ¡Œé¢å¹³å°ç³»ç»Ÿä¸­å®‰è£…äº†</li></ul></li><li>Trusted Web Activity<ul><li><a href="https://developers.google.com/web/updates/2019/02/using-twa" target="_blank" rel="noopener">https://developers.google.com/web/updates/2019/02/using-twa</a></li><li>Chrome Custom Tab çš„å‡çº§ç‰ˆï¼Œä¸å†æ˜¾ç¤ºæ ‡é¢˜æ </li><li>ä¸€ä¸ªå¸¸è§çš„ä½¿ç”¨åœºæ™¯æ˜¯åœ¨å·²æœ‰çš„Appä¸­å»ä½¿ç”¨PWAæ¥æ‰“åŒ…å®¶æ—åº”ç”¨å¹¶æ‰“é€ åŸç”Ÿä½“éªŒ</li><li>åœ¨ç½‘é¡µä¸­å¯ä»¥ä½¿ç”¨schema urlæ¥ä¸Appé€šä¿¡</li><li>Appå¯ä»¥åœ¨ç½‘å€åé™„ä¸Šå‚æ•°ç»™ç½‘é¡µå‘é€æ•°æ®</li></ul></li><li>Perception Toolkit<ul><li><a href="https://web.dev/perception-toolkit" target="_blank" rel="noopener">https://web.dev/perception-toolkit</a></li><li>ä¸€ä¸ªå·¥å…·åŒ…ä½¿ç”¨Shape Detection APIå»æ‰«ææ¡ç æˆ–è€…è·å–å®ç‰©ä¿¡æ¯</li><li>ä»ç½‘ç«™çš„ meta ä¿¡æ¯å±•ç¤ºç›¸å…³å¡ç‰‡</li><li>æä¾›äº†WebAssemblyç‰ˆä»¥å‘ä¸‹å…¼å®¹</li></ul></li><li>Puppeteer with Firefox<ul><li>å¯ä»¥ä½¿ç”¨Firefoxè¿›è¡Œè‡ªåŠ¨åŒ–äº†</li><li><code>npm i puppeteer-firefox</code></li></ul></li></ul><a id="more"></a><h1 id="Web-å°†æ¥å¯ä»¥ä½¿ç”¨çš„æ–°åŠŸèƒ½-æ–°Web-API-æ–°-JavaScript-API-ç­‰"><a href="#Web-å°†æ¥å¯ä»¥ä½¿ç”¨çš„æ–°åŠŸèƒ½-æ–°Web-API-æ–°-JavaScript-API-ç­‰" class="headerlink" title="Web å°†æ¥å¯ä»¥ä½¿ç”¨çš„æ–°åŠŸèƒ½ / æ–°Web API / æ–° JavaScript API ç­‰"></a>Web å°†æ¥å¯ä»¥ä½¿ç”¨çš„æ–°åŠŸèƒ½ / æ–°Web API / æ–° JavaScript API ç­‰</h1><h2 id="Chrome-Only-ç›®å‰ä¸ºæ­¢ï¼Œæ²¡æœ‰å†™å…¥w3cæ ‡å‡†"><a href="#Chrome-Only-ç›®å‰ä¸ºæ­¢ï¼Œæ²¡æœ‰å†™å…¥w3cæ ‡å‡†" class="headerlink" title="Chrome Only (ç›®å‰ä¸ºæ­¢ï¼Œæ²¡æœ‰å†™å…¥w3cæ ‡å‡†)"></a>Chrome Only (ç›®å‰ä¸ºæ­¢ï¼Œæ²¡æœ‰å†™å…¥w3cæ ‡å‡†)</h2><ul><li>Lazy loading<ul><li>åœ¨å›¾ç‰‡å’Œiframeä¸­æ·»åŠ  loading=â€lazyâ€ å±æ€§æ¥è®©æµè§ˆå™¨è‡ªåŠ¨æ‡’åŠ è½½</li><li>Chrome 75 å¯ç”¨</li></ul></li><li>Portals<ul><li><a href="https://web.dev/hands-on-portals" target="_blank" rel="noopener">https://web.dev/hands-on-portals</a></li><li>ä¸€ä¸ªæ–°tagï¼Œç±»ä¼¼iframeï¼Œä»¥æä¾›è½¬åˆ°ç½‘é¡µä¸­åµŒå…¥å†…å®¹çš„æ— ç¼ä½“éªŒ</li><li>å¯ä»¥åœ¨Chrome Canaryä½“éªŒ</li></ul></li><li>Web Packaging<ul><li><a href="https://github.com/WICG/webpackage" target="_blank" rel="noopener">https://github.com/WICG/webpackage</a></li><li>å¯¹ç½‘é¡µè¿›è¡Œç­¾åæ‰“åŒ…ï¼Œåœ¨ä¸åŒæœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Œä½¿å¾—æµè§ˆå™¨å¯ä»¥ä¸ä»…åœ¨æºæœåŠ¡å™¨ä¸Šè·å–å†…å®¹ï¼ˆp2pçš„æ„Ÿè§‰ï¼‰</li><li>æš‚æ—¶æ²¡æœ‰ä»»ä½• demo</li></ul></li><li>Paint Holding<ul><li>åŒä¸€ç½‘ç«™åˆ‡æ¢é¡µé¢æ—¶å°†ä¿æŒä¹‹å‰çš„ç»˜åˆ¶ä¸ä¼šç™½å±ä¸€æ¬¡</li><li>Chrome Canary å¯é¢„è§ˆ</li></ul></li><li>Cookie Changes upcoming in Chrome 76<ul><li><a href="https://web.dev/samesite-cookies-explained" target="_blank" rel="noopener">https://web.dev/samesite-cookies-explained</a></li><li>æ²¡æœ‰æ·»åŠ Same-Siteçš„Cookieå°†ä¼šè‡ªåŠ¨é€‚ç”¨<code>Same-Site=LAX</code></li></ul></li></ul><p>Chrome æ­£åœ¨å¼€å‘çš„</p><ul><li><a href="https://github.com/WICG/native-file-system" target="_blank" rel="noopener">åŸç”Ÿæ–‡ä»¶ç³»ç»Ÿ</a></li><li><a href="https://bugs.chromium.org/p/chromium/issues/detail?id=897276" target="_blank" rel="noopener">æ— éœ€æå‰ç”³è¯·å³å¯å­˜å‚¨æ–‡ä»¶åœ¨æœ¬åœ°</a></li><li><a href="https://github.com/sso-google/sms-otp-retrieval" target="_blank" rel="noopener">åŸºäºçŸ­ä¿¡çš„éªŒè¯</a></li></ul><blockquote><p>å…³è”Sessionï¼š Whatâ€™s New with Chrome and the Web (Google I/O â€™19)</p></blockquote><h2 id="Web-API"><a href="#Web-API" class="headerlink" title="Web API"></a>Web API</h2><ul><li><p>å¼€å‘ä¸­</p><ul><li>åˆ†äº« -&gt; Web Share API (Shipped) -&gt; Web Share Target (v2) (Working)</li><li>media control on System level -&gt; mediaSession API (Shipped)</li><li>æ£€æµ‹æ¡ç ä¸å½¢çŠ¶ -&gt; Shape Detection API (FaceDetect / BarcodeDetect both shipped in Chrome Canary) </li><li>App Badging (Appä¸Šçš„æ•°å­—) -&gt; window.Badge / window.ExperimentalBadge (Origin Trial 78)</li><li>å”¤é†’é” -&gt; (Screen wake lock / System wake lock) -&gt; Wake Lock (In Development)</li><li>æ–‡ä»¶æ“ä½œ -&gt; File Picker -&gt; chooseFileSystemEntries (propse stage / In Development)</li><li>è®¿é—®ä¸²å£è®¾å¤‡ï¼ˆä¾‹å¦‚æ‰“å°æœºï¼‰ -&gt; Serial API (Proposed API)</li><li>HID è®¾å¤‡è®¿é—® -&gt; WebHID (Proposed API / In Development)</li><li>è®¿é—®é€šè®¯å½• -&gt; Contacts Picker (Proposed API / Experimenting)</li><li>è®¿é—®å®‰è£…å­—ä½“åˆ—è¡¨ -&gt; Proposed / In Development</li></ul></li><li><p>å¾ˆå¿«å®è£…</p><ul><li>å‰ªè´´æ¿å¤åˆ¶ä¸ç²˜è´´å›¾ç‰‡ Clipboard API</li><li><a href="https://bit.ly/sms-verification-explainer" target="_blank" rel="noopener">åŸºäºçŸ­ä¿¡çš„æ‰‹æœºå·éªŒè¯æµç¨‹</a></li><li>åŸºäºæ—¶é—´çš„æ¨é€é€šçŸ¥API Notification Triggers API</li></ul></li></ul><blockquote><p>ä»¥ä¸Šå†…å®¹å¹´å†…å®è£…</p></blockquote><blockquote><p>åœ¨ Chrome ä¸­å¯å‚ä¸è¯•ç”¨å¹¶å‚ä¸åé¦ˆ<br><a href="https://developers.chrome.com/origintrials" target="_blank" rel="noopener">https://developers.chrome.com/origintrials</a></p></blockquote><blockquote><p>Web API å¯åœ¨ Project hugu å‚é˜…è¿›åº¦ <a href="https://bugs.chromium.org/p/chromium/issues/list?can=2&q=proj-fugu&sort=m&colspec=ID%20Pri%20M%20Stars%20ReleaseBlock%20Component%20Status%20Owner%20Summary%20OS%20Modified" target="_blank" rel="noopener">Project hugu</a></p></blockquote><p><img src="http://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1g356dbrkpgj21rs0xs4qp.jpg" alt="Web API é¢„å®š"></p><blockquote><p>ç›¸å…³Sessionï¼š Unlocking New Capabilities for the Web (Google I/O â€™19)</p></blockquote><h2 id="JavaScript-API-Syntax"><a href="#JavaScript-API-Syntax" class="headerlink" title="JavaScript API / Syntax"></a>JavaScript API / Syntax</h2><ul><li>ç±»çš„ç§æœ‰å­—æ®µ (å·²å®è£…) - working on privatter method and getters and setters</li><li>String.prototype.matchAll (å·²å®è£…)</li><li>æ•°å­—åˆ†éš” (Chrome 75)</li><li>BigInt (Chrome 74 ä¸ Firefox nightly ä¸ node å®è£… &amp; transpiler available)</li><li>Array.prototype.flat (in chrome firefox safari node)</li><li>ä» Entries åè½¬åŒ–ä¸º Object  (in chrome firefox safari node )</li><li>globalThis (in chrome firefox safari node )</li><li>æ­£åœ¨å°†æ•°å­—æ’åºçš„ç¨³å®šæ€§å†™å…¥æ ‡å‡†</li><li>å¤šå›½è¯­è¨€ç›¸å…³<ul><li>Intl.RelativeTimeFormat -&gt; today yesterday tomorrow (in chrome firefox node)</li><li>Intl.ListFormat -&gt; ex. A, B or C  (in chrome node)</li><li>Intl.DateTimeFormat -&gt; ex. May, 5  (in chrome)</li><li>Intl.Locale -&gt; Internal Translation (in chrome node)</li></ul></li><li>Promise.allSettled (in chrome 76 nightly) / Promise.any</li><li>WeakRef and finalizers (in chrome with flags) &amp; å†™å…¥æ ‡å‡†</li></ul><blockquote><p>å…³è”Sessionï¼š Whatâ€™s new in JavaScript (Google I/O â€™19)</p></blockquote><h1 id="ç»éªŒåˆ†äº«ä¸æ€§èƒ½æå‡"><a href="#ç»éªŒåˆ†äº«ä¸æ€§èƒ½æå‡" class="headerlink" title="ç»éªŒåˆ†äº«ä¸æ€§èƒ½æå‡"></a>ç»éªŒåˆ†äº«ä¸æ€§èƒ½æå‡</h1><p>Chrome æƒ³ä¸ºå„ä¸ªæ¡†æ¶æä¾›ä¸€äº›APIè¿™æ ·ä»–ä»¬åœ¨è¿ç»­æ‰§è¡Œåˆ†å—ä»»åŠ¡æ—¶åŒæ—¶ç›¸åº”ç”¨æˆ·è¾“å…¥</p><ul><li>Scheduling API<ul><li><a href="https://github.com/WICG/main-thread-scheduling" target="_blank" rel="noopener">https://github.com/WICG/main-thread-scheduling</a></li><li><a href="https://github.com/WICG/is-input-pending" target="_blank" rel="noopener">https://github.com/WICG/is-input-pending</a></li><li><a href="https://github.com/WICG/display-locking" target="_blank" rel="noopener">https://github.com/WICG/display-locking</a></li></ul></li></ul><p>Google åˆ†äº«äº†ä»–ä»¬åœ¨æ€§èƒ½ä¸Šçš„ä¸€äº›åšæ³•å’Œå»ºè®®</p><ul><li>é˜¶æ®µå¼SSR</li><li>æ•è·JSå®Œå…¨åŠ è½½å‰çš„ç”¨æˆ·ç‚¹å‡»</li><li>ä¿æŒåˆå§‹å¤§å°çš„JS</li><li>äº¤äº’é©±åŠ¨æ‡’åŠ è½½ç»„ä»¶</li><li>å»ºç«‹ä¾èµ–å…³ç³»å›¾ï¼Œå£°æ˜æ€§åŠ è½½åŠŸèƒ½ï¼ŒåŒæ—¶è·å–æ•°æ®</li></ul><p><img src="http://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1g356nnvqhfj21ra0z2e81.jpg" alt="Google Important Piece"></p><p>Google çš„æ€§èƒ½å»ºè®®</p><ol><li>æ‡’åŠ è½½</li><li>å“åº”å¼å›¾ç‰‡ï¼ˆæ ¹æ®è®¾å¤‡åƒç´ å¯†åº¦ç­‰åŠ è½½ä¸åŒåˆ†è¾¨ç‡å›¾ç‰‡ï¼‰</li><li>å›¾ç‰‡CDN</li><li>å»¶è¿Ÿç¬¬ä¸‰æ–¹JS</li><li>ç§»é™¤ä»£ä»·å·¨å¤§çš„åº“</li><li>åˆ†ç¦»ä»£ç </li><li>é¿å…Web Fontå­—ä½“é—ªçƒ</li><li>Prefetch</li><li>Preconnect</li><li>Preload</li><li>é¦–å±å…³é”®CSS</li><li>gzip -&gt; Brotli </li><li>å“åº”å¼åŠ è½½JSï¼ˆé€‚åº”ä¸åŒæµè§ˆå™¨åˆ†åˆ«åŠ è½½ä¸åŒJSï¼‰</li></ol><p>ä»¥åŠä½¿ç”¨Lighthouse ä¸è®¾å®šæ€§èƒ½é¢„ç®— LightWallet</p><p><img src="http://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1g358gekpplj21430l4k2y.jpg" alt="Performance Suggestion"></p><blockquote><p>ç›¸å…³Sessionï¼š<br>Elevating the Web Platform with the JavaScript Framework Community (Google I/O â€™19)<br>Speed at Scale: Web Performance Tips and Tricks from the Trenches (Google I/O â€™19)</p></blockquote><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><p>æ›´å¤šæ€§èƒ½å…¶ä»–æ¡ˆä¾‹ã€How toã€ä»¥åŠWebå†…å®¹å¯å‚ç…§<br><a href="https://www.youtube.com/playlist?list=PLNYkxOF6rcIATmAmz7HcCzongGvQEtx8i" target="_blank" rel="noopener">https://www.youtube.com/playlist?list=PLNYkxOF6rcIATmAmz7HcCzongGvQEtx8i</a></p><!-- Google çš„æ¶æ„å»ºè®®1. ä¸ºä¸æ–­å‘å±•çš„Web APIè€Œè®¾è®¡ç¨‹åº2. é¿å…æƒ©ç½šæ–°æµè§ˆå™¨ï¼ˆpolyfillç­‰ï¼‰3. æŒç»­æœåŠ¡å™¨ç¼“å­˜ï¼Œä¿æŒé«˜CDNå‘½ä¸­ç‡4. é¿å…é‡å¤§ä¿®æ”¹å¹¶å¢å¼ºç°æœ‰å·¥å…· -->]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Web-æ–°äº§å“-æ–°æŠ€æœ¯&quot;&gt;&lt;a href=&quot;#Web-æ–°äº§å“-æ–°æŠ€æœ¯&quot; class=&quot;headerlink&quot; title=&quot;Web æ–°äº§å“ / æ–°æŠ€æœ¯&quot;&gt;&lt;/a&gt;Web æ–°äº§å“ / æ–°æŠ€æœ¯&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;web.dev&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://web.dev&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://web.dev&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªå¯ä»¥ç”¨æ¥å­¦ä¹ æ¡†æ¶ã€æ€§èƒ½ã€å„ç§ Web æŠ€æœ¯çš„åœ°æ–¹&lt;/li&gt;
&lt;li&gt;è¿˜æœ‰å®æˆ˜ Codelab&lt;/li&gt;
&lt;li&gt;æ­£åœ¨è¿›è¡Œå¤šå›½ç¿»è¯‘&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Lighthouse Performance Budgets&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developers.google.com/web/tools/lighthouse/audits/budgets&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://developers.google.com/web/tools/lighthouse/audits/budgets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;åœ¨Lighthouseä¸­è®¾å®šæ€§èƒ½é¢„ç®—ï¼Œè®©Lighthouseåœ¨æµ‹è¯•æ€§èƒ½æ—¶ä½¿ç”¨å¹¶æ‰“åˆ†&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PWA Desktop&lt;ul&gt;
&lt;li&gt;PWAç°åœ¨å¯ä»¥å„å¤§æ¡Œé¢å¹³å°ç³»ç»Ÿä¸­å®‰è£…äº†&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Trusted Web Activity&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developers.google.com/web/updates/2019/02/using-twa&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://developers.google.com/web/updates/2019/02/using-twa&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Chrome Custom Tab çš„å‡çº§ç‰ˆï¼Œä¸å†æ˜¾ç¤ºæ ‡é¢˜æ &lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªå¸¸è§çš„ä½¿ç”¨åœºæ™¯æ˜¯åœ¨å·²æœ‰çš„Appä¸­å»ä½¿ç”¨PWAæ¥æ‰“åŒ…å®¶æ—åº”ç”¨å¹¶æ‰“é€ åŸç”Ÿä½“éªŒ&lt;/li&gt;
&lt;li&gt;åœ¨ç½‘é¡µä¸­å¯ä»¥ä½¿ç”¨schema urlæ¥ä¸Appé€šä¿¡&lt;/li&gt;
&lt;li&gt;Appå¯ä»¥åœ¨ç½‘å€åé™„ä¸Šå‚æ•°ç»™ç½‘é¡µå‘é€æ•°æ®&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Perception Toolkit&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://web.dev/perception-toolkit&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://web.dev/perception-toolkit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªå·¥å…·åŒ…ä½¿ç”¨Shape Detection APIå»æ‰«ææ¡ç æˆ–è€…è·å–å®ç‰©ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;ä»ç½‘ç«™çš„ meta ä¿¡æ¯å±•ç¤ºç›¸å…³å¡ç‰‡&lt;/li&gt;
&lt;li&gt;æä¾›äº†WebAssemblyç‰ˆä»¥å‘ä¸‹å…¼å®¹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Puppeteer with Firefox&lt;ul&gt;
&lt;li&gt;å¯ä»¥ä½¿ç”¨Firefoxè¿›è¡Œè‡ªåŠ¨åŒ–äº†&lt;/li&gt;
&lt;li&gt;&lt;code&gt;npm i puppeteer-firefox&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
      <category term="Front-End-Dev" scheme="https://blog.xingoxu.com/categories/dev/Front-End-Dev/"/>
    
    
  </entry>
  
  <entry>
    <title>Google I/O 2019 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¾ã¨ã‚</title>
    <link href="https://blog.xingoxu.com/ja/2019/05/2019-05-17-google-io-tech/"/>
    <id>https://blog.xingoxu.com/ja/2019/05/2019-05-17-google-io-tech/</id>
    <published>2019-05-17T08:55:59.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Web-æ–°ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ-æ–°æŠ€è¡“"><a href="#Web-æ–°ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ-æ–°æŠ€è¡“" class="headerlink" title="Web æ–°ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ / æ–°æŠ€è¡“"></a>Web æ–°ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ / æ–°æŠ€è¡“</h1><ul><li>web.dev ã¨ã„ã†ã‚µã‚¤ãƒˆ<ul><li><a href="https://web.dev" target="_blank" rel="noopener">https://web.dev</a></li><li>ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€Webå„ç¨®æŠ€è¡“ãªã©è¼‰ã£ã¦ã„ã‚‹ã‚°ãƒ¼ã‚°ãƒ«ãŒä½œã£ãŸã¾ã¨ã‚ã‚µã‚¤ãƒˆ</li><li>å…¨éƒ¨ç„¡æ–™ã§å­¦ã¹ã‚‹</li><li>ä»Šãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯React.jsã ã‘ã‘ã©ã€ä»Šå¾Œè¿½åŠ äºˆå®š</li><li>å®Ÿè·µ Codelabã€ãã®å ´ã§è©¦ã™ã“ã¨ã¯ã§ãã¾ã™</li><li>ç¿»è¨³ã¯ä»Šé€²è¡Œä¸­ã‚‰ã—ã„</li></ul></li><li>Lighthouse Performance Budgets<ul><li><a href="https://developers.google.com/web/tools/lighthouse/audits/budgets" target="_blank" rel="noopener">https://developers.google.com/web/tools/lighthouse/audits/budgets</a></li><li>Lighthouseã«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ™‚é–“ / ãƒ•ã‚¡ã‚¤ãƒ«å¤§ãã•äºˆç®—ã‚’è¨­å®šã—ã€LighthouseãŒæ¸¬ã£ã¦ãã‚Œã‚‹</li></ul></li><li>PWA Desktop<ul><li>PWA ä»Šãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—OSã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™</li></ul></li><li>Trusted Web Activity<ul><li><a href="https://developers.google.com/web/updates/2019/02/using-twa" target="_blank" rel="noopener">https://developers.google.com/web/updates/2019/02/using-twa</a></li><li>Chrome Custom Tab ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ç‰ˆã€ã‚¿ã‚¤ãƒˆãƒ«ãƒãƒ¼ãŒãªã„</li><li>ã‚ˆãè¦‹ã‚‰ã‚Œã‚‹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ã€ç¾å­˜ã®ã‚¢ãƒ—ãƒªã®ä¸­ã§ã€ãƒ•ã‚¡ãƒŸãƒªãƒ¼ã‚¢ãƒ—ãƒªã®ã‚¦ã‚§ãƒ–ç‰ˆã‚’å…¥ã‚Œã¦ã€ãƒã‚¤ãƒ†ã‚¤ãƒ–æ„Ÿã‚’ä½œã‚‹</li><li>ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã«ã¯schema urlã§ã‚¢ãƒ—ãƒªã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ã‚Œã¾ã™</li><li>ã‚¢ãƒ—ãƒªã¯ URL ã®å¾Œã‚ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ã‘ã‚‹ãªã‚‰ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ã‚Œã¾ã™</li></ul></li><li>Perception Toolkit<ul><li><a href="https://web.dev/perception-toolkit" target="_blank" rel="noopener">https://web.dev/perception-toolkit</a></li><li>Shape Detection APIã‚’ä½¿ã£ã¦ã‚‹ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆ</li><li>ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã€å®Ÿç‰©ã€ç”»åƒã‚’å–å¾—ã—ã¦ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®metaã‹ã‚‰å–ã£ãŸæƒ…å ±ã¨æ¯”è¼ƒã—ã¦ã€é–¢é€£ã‚«ãƒ¼ãƒ‰ã‚’å‡ºã™</li><li>APIã¾ã ä½¿ãˆãªã„ãƒ–ãƒ©ã‚¦ã‚¶ã«Web Assemblyã‚’ä½¿ã†ã€äº’æ›æ€§ã‚’ä¿ã¤</li></ul></li><li>Puppeteer with Firefox<ul><li>FirefoxãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</li><li><code>npm i puppeteer-firefox</code></li></ul></li></ul><a id="more"></a><h1 id="Web-ã«ã‚‚ã†ã™ãä½¿ãˆã‚‹ã‚‚ã®-æ–°Web-API-æ–°-JavaScript-API-ãªã©"><a href="#Web-ã«ã‚‚ã†ã™ãä½¿ãˆã‚‹ã‚‚ã®-æ–°Web-API-æ–°-JavaScript-API-ãªã©" class="headerlink" title="Web ã«ã‚‚ã†ã™ãä½¿ãˆã‚‹ã‚‚ã® / æ–°Web API / æ–° JavaScript API ãªã©"></a>Web ã«ã‚‚ã†ã™ãä½¿ãˆã‚‹ã‚‚ã® / æ–°Web API / æ–° JavaScript API ãªã©</h1><h2 id="Chrome-Only-w3cã«ã¾ã æ›¸ã„ã¦ãªã„"><a href="#Chrome-Only-w3cã«ã¾ã æ›¸ã„ã¦ãªã„" class="headerlink" title="Chrome Only (w3cã«ã¾ã æ›¸ã„ã¦ãªã„)"></a>Chrome Only (w3cã«ã¾ã æ›¸ã„ã¦ãªã„)</h2><ul><li>Lazy loading<ul><li>ç”»åƒã¨iframeã®ä¸­ loading=â€lazyâ€ ã®ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹ã¨é…å»¶ãƒ­ãƒ¼ãƒ‰ãã‚Œã¾ã™</li><li>Chrome 75 ã‹ã‚‰</li></ul></li><li>Portals<ul><li><a href="https://web.dev/hands-on-portals" target="_blank" rel="noopener">https://web.dev/hands-on-portals</a></li><li>æ–°ãŸãªè¦ç´ ã€iframeã¿ãŸã„ã€åŸ‹ã‚è¾¼ã‚€å†…å®¹ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã‚¹ãƒ ãƒ¼ã‚ºä½“é¨“ã‚’æä¾›ã™ã‚‹</li><li>Chrome Canary ä½¿ãˆã‚‹</li></ul></li><li>Web Packaging<ul><li><a href="https://github.com/WICG/webpackage" target="_blank" rel="noopener">https://github.com/WICG/webpackage</a></li><li>ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’ã‚µã‚¤ãƒ³ã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã—ã¦ã€ã©ã“ã§ã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ã¯ã©ã“ã§ã‚‚åŒã˜ã‚µã‚¤ãƒˆã¨ã¿ãªã™ï¼ˆp2pã®æ„Ÿã˜ï¼‰</li><li>ä¾‹ã¯ã¾ã ãªã„</li></ul></li><li>Paint Holding<ul><li>åŒã˜ã‚µã‚¤ãƒˆç”»é¢é·ç§»æ™‚ç™½ã„ç”»é¢ã¯å‡ºãªã„</li><li>Chrome Canary è¦‹ã‚Œã‚‹</li></ul></li><li>Cookie ã¯ Chrome 76 ã‹ã‚‰ã¡ã‚‡ã£ã¨å¤‰ã‚ã‚‹<ul><li><a href="https://web.dev/samesite-cookies-explained" target="_blank" rel="noopener">https://web.dev/samesite-cookies-explained</a></li><li>Same-Siteä½¿ã£ã¦ã„ãªã„Cookieã¯<code>Same-Site=LAX</code>ã‚’é©ç”¨ã™ã‚‹</li></ul></li></ul><p>Chromeä»Šé–‹ç™ºä¸­ã‚‚ã®</p><ul><li><a href="https://github.com/WICG/native-file-system" target="_blank" rel="noopener">ãƒã‚¤ãƒ†ã‚¤ãƒ–ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ </a></li><li><a href="https://bugs.chromium.org/p/chromium/issues/detail?id=897276" target="_blank" rel="noopener">ç”³è«‹ã—ãªãã‚‚ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã§ãã‚‹</a></li><li><a href="https://github.com/sso-google/sms-otp-retrieval" target="_blank" rel="noopener">SMSåŸºã¥ããƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œè¨¼</a></li></ul><blockquote><p>é–¢é€£Sessionï¼š Whatâ€™s New with Chrome and the Web (Google I/O â€™19)</p></blockquote><p><em>ç‹¬è‡ªAPIã‚’é–‹ç™ºã™ã‚‹ã‹ã‚‰æµ·å¤–ã§ã‚‚å¥½è©•å¾—ã¦ã„ãªã„ã‚‰ã—ã„â€¦</em></p><h2 id="Web-API"><a href="#Web-API" class="headerlink" title="Web API"></a>Web API</h2><ul><li><p>é–‹ç™ºä¸­</p><ul><li>ã‚¦ã‚§ãƒ–ã‚·ã‚§ã‚¢ -&gt; Web Share API (Shipped) -&gt; Web Share Target (v2) (Working)</li><li>media control on System level -&gt; mediaSession API (Shipped)</li><li>ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã€ç”»åƒã€å®Ÿç‰©æ¢çŸ¥ -&gt; Shape Detection API (FaceDetect / BarcodeDetect both shipped in Chrome Canary) </li><li>App Badging (ã‚¢ãƒ—ãƒªã‚¢ã‚¤ã‚³ãƒ³ã®æ•°å­—) -&gt; window.Badge / window.ExperimentalBadge (Origin Trial 78)</li><li>Wake Lock -&gt; (Screen wake lock / System wake lock) -&gt; Wake Lock (In Development)</li><li>ãƒ•ã‚¡ã‚¤ãƒ« -&gt; File Picker -&gt; chooseFileSystemEntries (ææ¡ˆä¸­ / In Development)</li><li>ã‚·ãƒªã‚¢ãƒ«ãƒ‡ãƒã‚¤ã‚¹ã‚µã‚¯ã‚»ã‚¹ï¼ˆãƒ—ãƒªãƒ³ã‚¿ãƒ¼ãªã©ï¼‰ -&gt; Serial API (ææ¡ˆæ¸ˆã¿)</li><li>HID ãƒ‡ãƒã‚¤ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ -&gt; WebHID (ææ¡ˆæ¸ˆã¿ / In Development)</li><li>é€£çµ¡å¸³ã‚µã‚¯ã‚»ã‚¹ -&gt; Contacts Picker (ææ¡ˆæ¸ˆã¿ / Experimenting)</li><li>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ•ã‚©ãƒ³ãƒˆã‚’ã‚¢ã‚¯ã‚»ã‚¹ -&gt; ææ¡ˆæ¸ˆã¿ / In Development</li></ul></li><li><p>ã‚‚ã†ã™ãå®Ÿè£…ã—ã¾ã™</p><ul><li>Clipboard API with Image ï¼ˆã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰APIã«ç”»åƒã‚‚æ·»ä»˜ã§ãã‚‹ï¼‰</li><li><a href="https://bit.ly/sms-verification-explainer" target="_blank" rel="noopener">SMSåŸºã¥ãOTPæ¤œè¨¼</a></li><li>Notification Triggers API ï¼ˆæ™‚é–“åŸºã¥ããƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ï¼‰</li></ul></li></ul><blockquote><p>ä¸Šè¨˜å†…å®¹å¹´å†…å®Ÿè£…<br>Chrome ã§è©¦ã™ã¾ãŸãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¯ä¸‹è¨˜ã‚µã‚¤ãƒˆã¾ã§<br><a href="https://developers.chrome.com/origintrials" target="_blank" rel="noopener">https://developers.chrome.com/origintrials</a></p></blockquote><blockquote><p>Web API ã¯ Project huguã§ ç¢ºèªã§ãã¾ã™ <a href="https://bugs.chromium.org/p/chromium/issues/list?can=2&q=proj-fugu&sort=m&colspec=ID%20Pri%20M%20Stars%20ReleaseBlock%20Component%20Status%20Owner%20Summary%20OS%20Modified" target="_blank" rel="noopener">Project hugu</a></p></blockquote><p><img src="http://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1g356dbrkpgj21rs0xs4qp.jpg" alt="Web API ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«"></p><blockquote><p>é–¢é€£Sessionï¼š Unlocking New Capabilities for the Web (Google I/O â€™19)</p></blockquote><h2 id="JavaScript-API-Syntax"><a href="#JavaScript-API-Syntax" class="headerlink" title="JavaScript API / Syntax"></a>JavaScript API / Syntax</h2><ul><li>Class ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆå±æ€§ (å®Ÿè£…æ¸ˆã¿) - working on privatter method and getters and setters</li><li>String.prototype.matchAll (å®Ÿè£…æ¸ˆã¿)</li><li>Number spearater (Chrome 75)</li><li>BigInt (Chrome 74 ã¨ Firefox nightly ã¨ node å®Ÿè£…æ¸ˆã¿ &amp; transpiler available)</li><li>Array.prototype.flat (in chrome firefox safari node)</li><li>Entries ã‹ã‚‰ Object ã«è»¢æ›ã™ã‚‹ Object.entriesã®é€†æ“ä½œ (in chrome firefox safari node )</li><li>globalThis (in chrome firefox safari node )</li><li>Array.sortã®å®‰å®šæ€§ã‚’æ¨™æº–ã®ä¸­ã«æ›¸ãã‚ˆã†ã«åŠªåŠ›ã—ã¦ã‚‹</li><li>å¤šè¨€èªã«ã¤ã„ã¦<ul><li>Intl.RelativeTimeFormat -&gt; today yesterday tomorrow (in chrome firefox node)</li><li>Intl.ListFormat -&gt; ex. A, B or C  (in chrome node)</li><li>Intl.DateTimeFormat -&gt; ex. May, 5  (in chrome)</li><li>Intl.Locale -&gt; Internal Translation (in chrome node)</li></ul></li><li>Promise.allSettled (in chrome 76 nightly) / Promise.any</li><li>WeakRef and finalizers (in chrome with flags) &amp; æ¨™æº–ã®ä¸­ã«æ›¸ãã‚ˆã†ã«</li></ul><blockquote><p>é–¢é€£Sessionï¼š Whatâ€™s new in JavaScript (Google I/O â€™19)</p></blockquote><h1 id="çµŒé¨“ã‚·ã‚§ã‚¢ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹"><a href="#çµŒé¨“ã‚·ã‚§ã‚¢ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹" class="headerlink" title="çµŒé¨“ã‚·ã‚§ã‚¢ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹"></a>çµŒé¨“ã‚·ã‚§ã‚¢ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</h1><p>Chrome ã¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãªã©ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«APIã‚’æä¾›ã—ãŸã„ã€<br>é€£ç¶šå®Ÿè¡Œã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®æ™‚ã‚‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œå—ã‘ã‚‹ã‚ˆã†ã«ã€‚</p><ul><li>Scheduling API<ul><li><a href="https://github.com/WICG/main-thread-scheduling" target="_blank" rel="noopener">https://github.com/WICG/main-thread-scheduling</a></li><li><a href="https://github.com/WICG/is-input-pending" target="_blank" rel="noopener">https://github.com/WICG/is-input-pending</a></li><li><a href="https://github.com/WICG/display-locking" target="_blank" rel="noopener">https://github.com/WICG/display-locking</a></li></ul></li></ul><p>Google ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã‚„ã‚Šæ–¹ã¨ã‚¢ãƒ‰ãƒã‚¤ã‚¹</p><ul><li>æ®µéšçš„SSR</li><li>JSå®Œå…¨ãƒ­ãƒ¼ãƒ‰å‰ã®ã‚¯ãƒªãƒƒã‚¯äº‹ä»¶ã‚’å–ã‚‹ã‚ˆã†ã«</li><li>ä¸€å®šã‚µã‚¤ã‚ºã®åˆæœŸJS</li><li>ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³é§†å‹•å‹é…å»¶ãƒ­ãƒ¼ãƒ‰</li><li>ä¾å­˜é–¢ä¿‚ã‚°ãƒ©ãƒ•ã€å®£è¨€å‹æ©Ÿèƒ½ãƒ­ãƒ¼ãƒ‰ã€åŒæ™‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚‹</li></ul><p><img src="http://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1g356nnvqhfj21ra0z2e81.jpg" alt="Google Important Piece"></p><p>Google ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚¢ãƒ‰ãƒã‚¤ã‚¹</p><ol><li>é…å»¶ãƒ­ãƒ¼ãƒ‰</li><li>ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒï¼ˆãƒ”ã‚¯ã‚»ãƒ«å¯†åº¦ã«ã‚ˆã‚‹ç”»åƒã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ï¼‰</li><li>ç”»åƒCDN</li><li>ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®JSã‚’é…å»¶ã™ã‚‹</li><li>é«˜ä¾¡ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å‰Šé™¤ã™ã‚‹</li><li>ã‚³ãƒ¼ãƒ‰åˆ†å‰²</li><li>Web Fontã®ç™½ã„ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚’é¿ã‘ã‚‹</li><li>Prefetch</li><li>Preconnect</li><li>Preload</li><li>ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«CSSï¼ˆã¯ã˜ã‚ã®ç”»é¢ã ã‘å¿…è¦ã®CSSã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ï¼‰</li><li>gzip -&gt; Brotli </li><li>ç«¯æœ«ã€ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚ˆã‚‹JSã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹</li></ol><p>ã¾ãŸã€Lighthouse ã‚’ä½¿ã£ã¦ã€æ€§èƒ½äºˆç®—ã‚’è¨­å®šã™ã‚‹</p><p><img src="http://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1g358gekpplj21430l4k2y.jpg" alt="Performance Suggestion"></p><blockquote><p>é–¢é€£Sessionï¼š<br>Elevating the Web Platform with the JavaScript Framework Community (Google I/O â€™19)<br>Speed at Scale: Web Performance Tips and Tricks from the Trenches (Google I/O â€™19)</p></blockquote><h1 id="ãã®ä»–"><a href="#ãã®ä»–" class="headerlink" title="ãã®ä»–"></a>ãã®ä»–</h1><p>ä»–ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã€ãƒã‚¦ãƒã‚¦ã€Webå†…å®¹ã¯ã“ã“ã¸<br><a href="https://www.youtube.com/playlist?list=PLNYkxOF6rcIATmAmz7HcCzongGvQEtx8i" target="_blank" rel="noopener">https://www.youtube.com/playlist?list=PLNYkxOF6rcIATmAmz7HcCzongGvQEtx8i</a></p><!-- Google çš„æ¶æ„å»ºè®®1. ä¸ºä¸æ–­å‘å±•çš„Web APIè€Œè®¾è®¡ç¨‹åº2. é¿å…æƒ©ç½šæ–°æµè§ˆå™¨ï¼ˆpolyfillç­‰ï¼‰3. æŒç»­æœåŠ¡å™¨ç¼“å­˜ï¼Œä¿æŒé«˜CDNå‘½ä¸­ç‡4. é¿å…é‡å¤§ä¿®æ”¹å¹¶å¢å¼ºç°æœ‰å·¥å…· -->]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Web-æ–°ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ-æ–°æŠ€è¡“&quot;&gt;&lt;a href=&quot;#Web-æ–°ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ-æ–°æŠ€è¡“&quot; class=&quot;headerlink&quot; title=&quot;Web æ–°ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ / æ–°æŠ€è¡“&quot;&gt;&lt;/a&gt;Web æ–°ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ / æ–°æŠ€è¡“&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;web.dev ã¨ã„ã†ã‚µã‚¤ãƒˆ&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://web.dev&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://web.dev&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€Webå„ç¨®æŠ€è¡“ãªã©è¼‰ã£ã¦ã„ã‚‹ã‚°ãƒ¼ã‚°ãƒ«ãŒä½œã£ãŸã¾ã¨ã‚ã‚µã‚¤ãƒˆ&lt;/li&gt;
&lt;li&gt;å…¨éƒ¨ç„¡æ–™ã§å­¦ã¹ã‚‹&lt;/li&gt;
&lt;li&gt;ä»Šãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯React.jsã ã‘ã‘ã©ã€ä»Šå¾Œè¿½åŠ äºˆå®š&lt;/li&gt;
&lt;li&gt;å®Ÿè·µ Codelabã€ãã®å ´ã§è©¦ã™ã“ã¨ã¯ã§ãã¾ã™&lt;/li&gt;
&lt;li&gt;ç¿»è¨³ã¯ä»Šé€²è¡Œä¸­ã‚‰ã—ã„&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Lighthouse Performance Budgets&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developers.google.com/web/tools/lighthouse/audits/budgets&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://developers.google.com/web/tools/lighthouse/audits/budgets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Lighthouseã«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ™‚é–“ / ãƒ•ã‚¡ã‚¤ãƒ«å¤§ãã•äºˆç®—ã‚’è¨­å®šã—ã€LighthouseãŒæ¸¬ã£ã¦ãã‚Œã‚‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PWA Desktop&lt;ul&gt;
&lt;li&gt;PWA ä»Šãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—OSã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Trusted Web Activity&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developers.google.com/web/updates/2019/02/using-twa&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://developers.google.com/web/updates/2019/02/using-twa&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Chrome Custom Tab ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ç‰ˆã€ã‚¿ã‚¤ãƒˆãƒ«ãƒãƒ¼ãŒãªã„&lt;/li&gt;
&lt;li&gt;ã‚ˆãè¦‹ã‚‰ã‚Œã‚‹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ã€ç¾å­˜ã®ã‚¢ãƒ—ãƒªã®ä¸­ã§ã€ãƒ•ã‚¡ãƒŸãƒªãƒ¼ã‚¢ãƒ—ãƒªã®ã‚¦ã‚§ãƒ–ç‰ˆã‚’å…¥ã‚Œã¦ã€ãƒã‚¤ãƒ†ã‚¤ãƒ–æ„Ÿã‚’ä½œã‚‹&lt;/li&gt;
&lt;li&gt;ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã«ã¯schema urlã§ã‚¢ãƒ—ãƒªã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ã‚Œã¾ã™&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ—ãƒªã¯ URL ã®å¾Œã‚ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ã‘ã‚‹ãªã‚‰ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ã‚Œã¾ã™&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Perception Toolkit&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://web.dev/perception-toolkit&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://web.dev/perception-toolkit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Shape Detection APIã‚’ä½¿ã£ã¦ã‚‹ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆ&lt;/li&gt;
&lt;li&gt;ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã€å®Ÿç‰©ã€ç”»åƒã‚’å–å¾—ã—ã¦ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®metaã‹ã‚‰å–ã£ãŸæƒ…å ±ã¨æ¯”è¼ƒã—ã¦ã€é–¢é€£ã‚«ãƒ¼ãƒ‰ã‚’å‡ºã™&lt;/li&gt;
&lt;li&gt;APIã¾ã ä½¿ãˆãªã„ãƒ–ãƒ©ã‚¦ã‚¶ã«Web Assemblyã‚’ä½¿ã†ã€äº’æ›æ€§ã‚’ä¿ã¤&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Puppeteer with Firefox&lt;ul&gt;
&lt;li&gt;FirefoxãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;npm i puppeteer-firefox&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
      <category term="Front-End-Dev" scheme="https://blog.xingoxu.com/categories/dev/Front-End-Dev/"/>
    
    
  </entry>
  
  <entry>
    <title>ç¾¤æ™– NAS æ‰“é€ è‡ªåŠ¨ç”µè§†å½•åƒæœåŠ¡å™¨</title>
    <link href="https://blog.xingoxu.com/2019/05/2019-05-16-record-jp-digital-TV-on-nas/"/>
    <id>https://blog.xingoxu.com/2019/05/2019-05-16-record-jp-digital-TV-on-nas/</id>
    <published>2019-05-16T07:47:37.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯å½•åƒæœåŠ¡å™¨"><a href="#ä»€ä¹ˆæ˜¯å½•åƒæœåŠ¡å™¨" class="headerlink" title="ä»€ä¹ˆæ˜¯å½•åƒæœåŠ¡å™¨"></a>ä»€ä¹ˆæ˜¯å½•åƒæœåŠ¡å™¨</h1><p>å½•åƒæœåŠ¡å™¨å°±æ˜¯æŒ‡å°†ç”µè„‘æ¥ä¸Šç”µè§†å¤©çº¿ï¼ŒæŠŠç”µè§†èŠ‚ç›®è‡ªåŠ¨å½•åˆ¶ä¸‹æ¥å¹¶ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šã€‚åœ¨æ—¥æœ¬è®¸å¤šç”µè§†æœºéƒ½ä¼šè‡ªå¸¦å½•åˆ¶åŠŸèƒ½ï¼ŒæŒ‡å®šèŠ‚ç›®ä¹‹åæ¯å‘¨å½•åˆ¶ç›¸åŒæ—¶é—´æ®µçš„èŠ‚ç›®ï¼Œæˆ–è€…æŒ‡å®šæ¡ä»¶ï¼Œè‡ªåŠ¨å½•åˆ¶ç¬¦åˆæ¡ä»¶çš„èŠ‚ç›®ã€‚è¿™æ¬¡æˆ‘ä»¬å°±è¦æ¥å°è¯•åœ¨NASä¸Šæ­å»ºè¿™ä¹ˆä¸€ä¸ªå½•åˆ¶æœåŠ¡å™¨ã€‚</p><h1 id="ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ­å»ºè¿™æ ·çš„æœåŠ¡å™¨"><a href="#ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ­å»ºè¿™æ ·çš„æœåŠ¡å™¨" class="headerlink" title="ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ­å»ºè¿™æ ·çš„æœåŠ¡å™¨"></a>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ­å»ºè¿™æ ·çš„æœåŠ¡å™¨</h1><p>æ—¢ç„¶ç”µè§†æœºå·²ç»æœ‰äº†è¿™æ ·çš„åŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦é¢å¤–æ­å»ºè¿™æ ·çš„æœåŠ¡å™¨å‘¢ã€‚<br>ç”µè§†æœºç¡®å®å·²ç»å¾ˆå¼ºå¤§ï¼Œä½†æˆ‘ä»¬ä¹Ÿæœ‰ä¸²æµéœ€æ±‚ï¼Œåœ¨å®¶ï¼Œåœ¨å¤–è¾¹ï¼Œåœ¨ç¬”è®°æœ¬ä¸Šéšæ—¶éšåœ°éƒ½æƒ³æ”¶çœ‹å½•åˆ¶çš„ç”µè§†èŠ‚ç›®çš„è¯ï¼Œåªæœ‰ä¸€ä¸ªç”µè§†æœºå’Œæ”¶çœ‹è®¾å¤‡çš„è¯å¾ˆéš¾åšåˆ°ã€‚<br>æ­å»ºäº†è¿™ä¸ªæœåŠ¡å™¨ä¹‹åï¼Œæˆ‘ä»¬è¿˜èƒ½å®ç°åœ¨æ‰‹æœºåœ¨ç”µè„‘å®æ—¶è§‚çœ‹ç”µè§†ç›´æ’­åŠŸèƒ½ï¼Œç”»è´¨å½“ç„¶ä¸ç”µè§†å°ä¸€è‡´ã€‚</p><h1 id="ä¸ºä»€ä¹ˆè¦æ”¾åœ¨NASä¸Š"><a href="#ä¸ºä»€ä¹ˆè¦æ”¾åœ¨NASä¸Š" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æ”¾åœ¨NASä¸Š"></a>ä¸ºä»€ä¹ˆè¦æ”¾åœ¨NASä¸Š</h1><p>è¿˜ä¸æ˜¯ä¸ºäº†æ‹¯æ•‘æˆ‘é‚£24å°æ—¶å¼€æœºçš„NASä½†å´åªç”¨æ¥åŒæ­¥æ–‡ä»¶çš„ç”µè€è™å—</p><a id="more"></a><h1 id="éœ€è¦å‡†å¤‡çš„ä¸œè¥¿"><a href="#éœ€è¦å‡†å¤‡çš„ä¸œè¥¿" class="headerlink" title="éœ€è¦å‡†å¤‡çš„ä¸œè¥¿"></a>éœ€è¦å‡†å¤‡çš„ä¸œè¥¿</h1><ul><li>ä½ çš„ä¸€å°NAS<ul><li>æˆ‘ä»¬éœ€è¦åœ¨ä¸Šè¾¹æ¥ä¸Šç”µè§†å¤©çº¿å¹¶è¿è¡Œå½•åˆ¶ç¨‹åº</li><li>éœ€è¦èƒ½å¤Ÿè¿è¡ŒDockerä¸è™šæ‹Ÿæœº ï¼ˆ<a href="https://www.synology.com/en-us/dsm/packages/Virtualization" target="_blank" rel="noopener">ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹å…¼å®¹æœºå‹</a>ï¼‰</li></ul></li><li>PLEX USBåœ°ä¸Šæ³¢å¤©çº¿ PX-S1UD V2.0<ul><li>ä¸€ä¸ªä½œä¸ºå½•åˆ¶ç”µè§†çš„åˆå§‹å…¥é—¨çš„USBå¤©çº¿</li><li>ä¸è´µï¼Œçº¦4530æ—¥å…ƒ</li><li>ä¸€æ ¹å¤©çº¿åªèƒ½å½•åˆ¶ä¸€ä¸ªèŠ‚ç›®ï¼Œéœ€è¦å½•åˆ¶å¤šä¸ªç”µè§†èŠ‚ç›®å¯ä»¥ä¹°å¤šä¸ª</li><li><a href="https://www.amazon.co.jp/gp/product/B0141NFWSG/" target="_blank" rel="noopener">äºšé©¬é€Šè´­ä¹°é“¾æ¥</a></li></ul></li><li>SCM ICè¯»å¡å™¨<ul><li>ç”¨æ¥è¯»å– B-CAS å¡ã€1000æ—¥å…ƒå·¦å³</li><li><a href="https://www.amazon.co.jp/gp/product/B0085H4YZC/" target="_blank" rel="noopener">äºšé©¬é€Šè´­ä¹°é“¾æ¥</a></li><li>æ³¨æ„è¿™ä¸ªå‘è´§å¹¶ä¸ä¸€å®šæ˜¯åŒä¸€ä¸ªå“ç‰ŒåŒä¸€å‹å·çš„è¯»å¡å™¨ï¼Œåœ¨ä¹‹åçš„æµ‹è¯•è¯»å¡å™¨éƒ¨åˆ†å¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œéœ€è¦åšå¥½å¼ºå¤§çš„å¿ƒç†å‡†å¤‡</li><li>ä¹Ÿå¯ä»¥ç”¨SoftCASï¼Œä¸è¿‡æ„Ÿè§‰ä¸æ˜¯å¾ˆå¯é ä»¥åŠæœ‰è§¦çŠ¯æ³•å¾‹é£é™©ï¼Œä¸åœ¨æœ¬ç¯‡è®¨è®ºèŒƒå›´</li></ul></li><li>å¤§ç¡¬ç›˜<ul><li>ç”¨æ¥ä¿å­˜ä½ çš„èŠ‚ç›®</li></ul></li><li>B-CAS å¡<ul><li>æµ‹è¯•ä½ å¯ä»¥ä»ç°åœ¨çš„ç”µè§†ä¸Šæ‹¿ä¸‹æ¥å€Ÿç”¨</li><li>åæœŸä½ å¯ä»¥ä»ä¸ç”¨çš„ä¸­å¤ç”µè§†æˆ–è€…DVDå½•åƒæœºä¸Šå–ä¸‹æ¥å€Ÿç”¨</li><li>äºšé©¬é€Šä¸Šå¯èƒ½æœ‰äººå‡ºå“ï¼Œä½†ä¹°å–B-CASå¡å¯èƒ½è§¦åŠæ³•å¾‹é£é™©éœ€è¦æ³¨æ„</li></ul></li><li>å¤©çº¿åˆ†æ³¢å™¨ / åˆ†é…å™¨ã€ä¸€æ ¹å¤©çº¿è¿æ¥çº¿<ul><li>æŠŠä¸€æ ¹å¤©çº¿å˜æˆä¸¤æ ¹å¤©çº¿çš„ä¸œè¥¿ï¼Œæˆ–è€…æŠŠåœ°ä¸Šæ³¢ä¸BS/CSæ³¢åˆ†å¼€çš„ä¸œè¥¿ï¼Œæ ¹æ®ä¸ªäººéœ€è¦è¿›è¡Œè´­ä¹°ï¼Œå¹¶ä¸å¿…é¡»</li></ul></li></ul><h1 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h1><p>ä»¥ä¸‹å†…å®¹ä»…ä¿è¯æ–‡ç« æ’°å†™æ—¶ç‚¹çš„æœ‰æ•ˆæ€§ï¼Œæœ¬æ–‡å¹¶ä¸é¢å‘åˆçº§ç”¨æˆ·ï¼Œè¯·ä»…æœ‰ä¸€å®šåŠ¨æ‰‹èƒ½åŠ›ä»¥åŠè‡ªå·±èƒ½å¤Ÿè§£å†³é€”ä¸­å‡ºç°çš„é—®é¢˜çš„è¯»è€…è¿›è¡Œæ­å»ºï¼Œå¹¶è¯·è‡ªè¡Œè´Ÿæ‹…å‡ºç°çš„ä»»ä½•é—®é¢˜ä¸è´£ä»»ã€‚<br>ç”µè§†èŠ‚ç›®çš„å¤åˆ¶ï¼Œä¼ æ’­å¯èƒ½è§¦åŠç›¸å…³æ³•å¾‹ï¼Œåœ¨ä½¿ç”¨æ—¶è¯·ååˆ†æ³¨æ„ã€‚<br>ç”±äºå‚è€ƒäº†æœ¬æ–‡è¿›è¡Œçš„æ“ä½œå‘ç”Ÿçš„ä»»ä½•æŸå¤±ï¼Œä½œè€…ä¸è´Ÿæ‹…ä»»ä½•è´£ä»»ä¸èµ”å¿ã€‚</p><h1 id="æ¶æ„è¯´æ˜"><a href="#æ¶æ„è¯´æ˜" class="headerlink" title="æ¶æ„è¯´æ˜"></a>æ¶æ„è¯´æ˜</h1><p><img src="https://static.xingoxu.com/blog/sinaimg/005BYqpggy1g336pg2yuyj30fm0akgm2.jpg" alt="æ¶æ„"></p><h1 id="NAS-å‡†å¤‡"><a href="#NAS-å‡†å¤‡" class="headerlink" title="NAS å‡†å¤‡"></a>NAS å‡†å¤‡</h1><ul><li>å®‰è£…Docker</li><li>å®‰è£… Virtual Machine Manager</li><li>åœ¨è™šæ‹Ÿæœºé‡Œå®‰è£…Ubuntu 16æˆ–è€…18.04 æˆ–è€…éšä¾¿ä½ å–œæ¬¢çš„å‘è¡Œç‰ˆ<ul><li>æœ¬æ–‡å°†ä»¥Ubuntu 18.04ä½œä¸ºå‚è€ƒè¿›è¡Œï¼Œå…¶ä»–å‘è¡Œç‰ˆæœ¬è¯·è‡ªè¡Œæ³¨æ„è·¯å¾„ç­‰</li><li>ä½†æ— è®ºå¦‚ä½•æ³¨æ„ Linux å†…æ ¸ç‰ˆæœ¬å¿…é¡»é«˜äº3.15ï¼ˆåŸå› ä¸‹è¿°ï¼‰</li><li>å»ºè®®å°†è™šæ‹Ÿæœºçš„Ubuntuè®¾ç½®æˆä»…å†…ç½‘è®¿é—®</li></ul></li></ul><h1 id="å‡†å¤‡å¤©çº¿"><a href="#å‡†å¤‡å¤©çº¿" class="headerlink" title="å‡†å¤‡å¤©çº¿"></a>å‡†å¤‡å¤©çº¿</h1><p>è¿›å…¥Ubuntuè™šæ‹Ÿæœºï¼Œå®‰è£…å¤©çº¿é©±åŠ¨ï¼Œå…·ä½“æ“ä½œæ­¥éª¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ wget http:&#x2F;&#x2F;plex-net.co.jp&#x2F;plex&#x2F;px-s1ud&#x2F;PX-S1UD_driver_Ver.1.0.1.zip</span><br><span class="line">$ unzip PX-S1UD_driver_Ver.1.0.1.zip</span><br><span class="line">$ sudo cp PX-S1UD_driver_Ver.1.0.1&#x2F;x64&#x2F;amd64&#x2F;isdbt_rio.inp &#x2F;lib&#x2F;firmware&#x2F;</span><br></pre></td></tr></table></figure><p>å°±ç®—å®Œæˆäº†</p><p>å› ä¸ºå¤©çº¿é©±åŠ¨æœ€ä½æ”¯æŒ3.15çš„Linuxå†…æ ¸ï¼Œè€Œç¾¤æ™–çš„å†…æ ¸æ˜¯3.10ï¼Œå¯¼è‡´æ²¡æœ‰åŠæ³•å°†å¤©çº¿ä¸è°ƒç”¨å¤©çº¿é©±åŠ¨çš„å†…å®¹æ”¾ç½®åœ¨ä¸»æœºæœ¬ä½“è¿è¡Œï¼Œæ‰ä¸å¾—ä¸ä½¿ç”¨äº†è™šæ‹Ÿæœºè¿™æ ·çš„ç»“æ„ã€‚</p><p>å¦‚æœç¾¤æ™–ä¹‹åå‡çº§åˆ°äº†3.15ä»¥ä¸Šçš„å†…æ ¸ï¼Œé‚£å¯ä»¥å°è¯•ä¸€ä¸‹ä½¿ç”¨ <a href="https://github.com/Chinachu/docker-mirakurun-chinachu" target="_blank" rel="noopener">https://github.com/Chinachu/docker-mirakurun-chinachu</a> çš„ Docker é•œåƒã€‚</p><h1 id="å‡†å¤‡è¯»å¡å™¨ä¸B-CASå¡"><a href="#å‡†å¤‡è¯»å¡å™¨ä¸B-CASå¡" class="headerlink" title="å‡†å¤‡è¯»å¡å™¨ä¸B-CASå¡"></a>å‡†å¤‡è¯»å¡å™¨ä¸B-CASå¡</h1><p>åœ¨Ubuntuè™šæ‹Ÿæœºå†…å®‰è£…ä¸€äº›å·¥å…·ï¼ˆä¹‹åä¹Ÿä¼šä½¿ç”¨åˆ°ï¼‰ä¸è¯»å¡å™¨é©±åŠ¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install build-essential git cmake g++</span><br><span class="line">$ sudo apt-get install pcscd libpcsclite-dev libccid pcsc-tools</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæ¯•ä¹‹åï¼Œä½¿ç”¨ <code>sudo pcsc_scan</code> å‘½ä»¤ï¼Œå¦‚æœå‡ºç°äº† <code>Japanese Chijou Digital B-CAS Card (pay TV)</code> ç±»ä¼¼çš„å­—æ ·ï¼Œé‚£ä¹ˆB-CASå¡çš„å®‰è£…å’Œé©±åŠ¨å°±é¡ºåˆ©å®Œæˆäº†</p><p>ç¬”è€…åœ¨è¿™é‡Œç¢°åˆ°è¿‡ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯B-CASæ’åäº†ï¼Œæ²¡è¯»åˆ°èŠ¯ç‰‡ï¼ˆæ±—ï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯B-CASå¡æ— æ•ˆé—®é¢˜ã€‚<br>B-CASå¡å¦‚æœæ— æ•ˆçš„è¯ï¼Œæ˜¯ä¼šé¡ºåˆ©å‡ºçº¿ä¸Šè¿°å­—æ ·çš„ï¼Œä½†æ˜¯ä¹‹åæ— æ³•æ­£å¸¸ä½¿ç”¨å½•åˆ¶ç”µè§†ï¼Œå¯ä»¥å°†B-CASæ’ä¸Šç”µè§†çœ‹ä¸€ä¸‹æ˜¯å¦æœ‰é”™è¯¯æç¤ºã€‚</p><p>å¦å¤–å¦‚æœä½¿ç”¨çš„ä¸æ˜¯NECè¯»å¤´çš„è¯»å¡å™¨ï¼Œå¯èƒ½ä¼šæ²¡æ³•æ‰«æå‡ºæˆ–è€…æ²¡æ³•å¯åŠ¨pcscdï¼ˆå‚è€ƒçš„åŸæ–‡ç« ä½œè€…ç¢°åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼‰ï¼Œè¯»è€…å¯ä»¥è‡ªè¡Œæœç´¢ç›¸å…³æ–¹æ³•æˆ–å‚è€ƒä¸‹æ–¹å‚è€ƒæ–‡ç« é“¾æ¥ã€‚</p><h1 id="å®‰è£…B-CASè§£ç ç”¨çš„ç›¸å…³åº“"><a href="#å®‰è£…B-CASè§£ç ç”¨çš„ç›¸å…³åº“" class="headerlink" title="å®‰è£…B-CASè§£ç ç”¨çš„ç›¸å…³åº“"></a>å®‰è£…B-CASè§£ç ç”¨çš„ç›¸å…³åº“</h1><p>ç”±äºæ—¥æœ¬åœ°ä¸Šæ³¢åŠ å¯†åè¿›è¡Œå¹¿æ’­ï¼Œç›´æ¥å½•åˆ¶çš„è¯ä¹Ÿæ²¡æ³•æ’­æ”¾å’Œä¿å­˜ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦åœ¨æ¥æ”¶ä¿¡å·çš„åŒæ—¶ä½¿ç”¨B-CASå¡è¿›è¡Œè§£ç å¹¶æ— è§†åŠ å¯†ã€‚å®ç°è¿™ä¸ªçš„æ˜¯ä¸€ä¸ªå«libarib25çš„åº“ã€‚</p><p>è¿™ä¸ªåº“éœ€è¦ç¼–è¯‘ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ wget https:&#x2F;&#x2F;github.com&#x2F;stz2012&#x2F;libarib25&#x2F;archive&#x2F;master.zip</span><br><span class="line">$ unzip master.zip</span><br><span class="line">$ cd libarib25-master</span><br><span class="line">$ cmake .</span><br><span class="line">$ make</span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure><p>å®Œæˆå®‰è£…</p><h1 id="å®‰è£…å½•åƒæŒ‡ä»¤"><a href="#å®‰è£…å½•åƒæŒ‡ä»¤" class="headerlink" title="å®‰è£…å½•åƒæŒ‡ä»¤"></a>å®‰è£…å½•åƒæŒ‡ä»¤</h1><p>æˆ‘ä»¬éœ€è¦å®‰è£…recdvbè¿™ä¸ªå½•åƒæŒ‡ä»¤ï¼Œä¹‹åçš„å½•åƒç®¡ç†éƒ½ä¼šè°ƒç”¨è¿™ä¸ªæŒ‡ä»¤æ¥è¿›è¡Œã€‚<br>æºä»£ç æ˜¯å…¬å¼€çš„ä½†æ˜¯æ²¡æœ‰æ”¾åœ¨githubä¸Šï¼Œéœ€è¦ç¼–è¯‘å®‰è£…ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ wget http:&#x2F;&#x2F;www13.plala.or.jp&#x2F;sat&#x2F;recdvb&#x2F;recdvb-1.3.2.tgz</span><br><span class="line">$ tar xvzf recdvb-1.3.2.tgz</span><br><span class="line">$ cd recdvb-1.3.2</span><br><span class="line">$ .&#x2F;autogen.sh</span><br><span class="line">$ .&#x2F;configure --enable-b25</span><br><span class="line">$ make </span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure><p>å®Œæˆå®‰è£…ã€‚</p><p>å®‰è£…ä¹‹åå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤ç›´æ¥å½•åˆ¶ç”µè§†èŠ‚ç›®äº†ã€‚<br>æ¯”å¦‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ recdvb --b25 --strip &lt;channel&gt; &lt;seconds&gt; test.m2ts</span><br></pre></td></tr></table></figure><p>channelæ ¹æ®åœ°åŒºï¼Œæ”¾é€ç”µæ³¢å¡”ä¸åŒï¼Œæ•°å­—ä¸åŒï¼Œå¯ä»¥åœ¨<a href="http://www.maspro.co.jp/contact/channel.pdf" target="_blank" rel="noopener">è¿™é‡Œ</a>è¿›è¡Œç¡®è®¤ã€‚</p><p>å¦å¤–ï¼Œå¯ä»¥ä½¿ç”¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ recdvb --b25 --strip --http &lt;port&gt;</span><br></pre></td></tr></table></figure><p>æŒ‡ä»¤ï¼Œåœ¨æœ¬åœ°èµ·ä¸€ä¸ªæœåŠ¡å™¨æ¨é€æµï¼Œ<br>ä½¿ç”¨VLCæˆ–è€…IINAå¯ä»¥æ‰“å¼€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;[IPã‚¢ãƒ‰ãƒ¬ã‚¹]:8080&#x2F;[channel number]</span><br></pre></td></tr></table></figure><p>channel numberå°±æ˜¯ä¸Šè¾¹é‚£ä¸ªæ•°å­—ã€‚</p><p>ä½†ï¼Œåœ¨è¿™ä¹‹å‰ï¼Œ<br>éœ€è¦åœ¨Ubuntuè™šæ‹Ÿæœºçš„<code>/etc/hosts</code>ä¸­è®¾å®šè¿æ¥è€…çš„ipåŸŸåï¼ˆä¸ºäº†ä¿è¯å®‰å…¨ï¼‰ï¼Œ<br>æˆ‘çš„è¯å¹¶æ²¡æœ‰åœ¨å¤–ç½‘è®¿é—®Tuner Serverçš„æƒ³æ³•ï¼Œå¹¶ä¸éœ€è¦è¿™æ ·çš„è®¾å®šï¼Œå› æ­¤ä¿®æ”¹æºä»£ç é‡æ–°ç¼–è¯‘å®‰è£…ã€‚</p><blockquote><p>å‚è€ƒ <a href="https://nyanonon.hatenablog.com/entries/2015/11/17" target="_blank" rel="noopener">https://nyanonon.hatenablog.com/entries/2015/11/17</a></p></blockquote><p>æŒ‰ä¸‹ <code>Ctrl+C</code> å…³é—­æ¨é€æµæœåŠ¡å™¨ã€‚</p><h1 id="å®‰è£…mirakurun-å»ºç«‹Tuner-Server"><a href="#å®‰è£…mirakurun-å»ºç«‹Tuner-Server" class="headerlink" title="å®‰è£…mirakurun å»ºç«‹Tuner Server"></a>å®‰è£…mirakurun å»ºç«‹Tuner Server</h1><p>Mirakurunæ˜¯ä¸€ä¸ªNode.jsç¼–å†™çš„ç³»ç»Ÿï¼Œå…·æœ‰åŒæ—¶å¤šé¢‘é“å½•åƒï¼Œå¤šå¤©çº¿ç®¡ç†ï¼Œä¼˜å…ˆåº¦å¤„ç†åŠŸèƒ½ã€‚<br>ä»¥åŠæä¾›äº†å„ç§APIï¼Œä»¥æ–¹ä¾¿å¯¹åº”å„ç§å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œåœ¨å¤–ç½‘æ— æ³•ç›´æ¥è®¿é—®æœåŠ¡å™¨ä¹Ÿå¯ä»¥ç®¡ç†é¢„çº¦å½•åˆ¶èŠ‚ç›®ç­‰ã€‚</p><p>å®‰è£…Mirakurunå¯ä»¥å‚ç…§</p><blockquote><p><a href="https://github.com/Chinachu/Mirakurun/blob/master/doc/Platforms.md" target="_blank" rel="noopener">https://github.com/Chinachu/Mirakurun/blob/master/doc/Platforms.md</a></p></blockquote><p>ä»¥ä¸‹å†…å®¹æ–¹ä¾¿å‚ç…§éƒ¨åˆ†æ¬è¿</p><h2 id="å®‰è£…-Node-js-10"><a href="#å®‰è£…-Node-js-10" class="headerlink" title="å®‰è£… Node.js 10"></a>å®‰è£… Node.js 10</h2><blockquote><p>è¯·å‚ç…§ <a href="https://github.com/nodesource/distributions/blob/master/README.md#debinstall" target="_blank" rel="noopener">https://github.com/nodesource/distributions/blob/master/README.md#debinstall</a></p></blockquote><h2 id="å®‰è£…-PM2"><a href="#å®‰è£…-PM2" class="headerlink" title="å®‰è£… PM2"></a>å®‰è£… PM2</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install pm2 -g</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…Mirakurunä¸»ç¨‹åº"><a href="#å®‰è£…Mirakurunä¸»ç¨‹åº" class="headerlink" title="å®‰è£…Mirakurunä¸»ç¨‹åº"></a>å®‰è£…Mirakurunä¸»ç¨‹åº</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install mirakurun -g --unsafe-perm --production</span><br></pre></td></tr></table></figure><h2 id="é…ç½®Mirakurun"><a href="#é…ç½®Mirakurun" class="headerlink" title="é…ç½®Mirakurun"></a>é…ç½®Mirakurun</h2><p>ä¸»è¦æ˜¯å¯¹Tunerè¿›è¡Œé…ç½®ï¼Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mirakurun config tuners</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¡äº†å¾ˆä¹…ï¼Œä¸€ç›´æ²¡æ³•æˆåŠŸå½•åˆ¶ï¼Œä½†æœ€ç»ˆæ³¨é‡Šæ‰äº†ä¸€äº›å¥‡æ€ªçš„é…ç½®å°±æå®šäº†</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">PX-S1UD-1</span></span><br><span class="line">  <span class="attr">types:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">GR</span></span><br><span class="line">  <span class="attr">command:</span> <span class="string">recdev</span> <span class="string">--b25</span> <span class="string">--strip</span> <span class="string">&lt;channel&gt;</span> <span class="bullet">-</span> <span class="bullet">-</span></span><br><span class="line">  <span class="attr">isDisabled:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mirakurun restart</span><br></pre></td></tr></table></figure><p>é‡å¯mirakurunä¹‹åæŸ¥çœ‹ pm2 logï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯æ­£å¸¸å¼€å§‹Recordingï¼Œè¡¨ç¤ºæ­å»ºæˆåŠŸã€‚</p><p>é¢‘é“çš„è¯å¯¹Tunerè®¾ç½®æˆåŠŸä¹‹åä¼šè‡ªå·±æ›´æ–°é¢‘é“å¹¶æ›´æ–°èŠ‚ç›®åˆ—è¡¨ï¼Œå› æ­¤æ— éœ€å…¶ä»–æ“ä½œï¼Œä¸€ä¸ªå¤©çº¿çš„æƒ…å†µä¸‹è€å¿ƒç­‰å¾…5åˆ†é’Ÿåˆ°10åˆ†é’Ÿå·¦å³å³å¯ã€‚</p><p>åˆ°è¿™é‡Œä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€æœ‰æœåŠ¡ç«¯çš„è®¾ç½®åŸºæœ¬å°±å®Œæˆäº†ï¼ŒMirakurunæœ¬èº«å·²ç»æä¾›äº†APIï¼Œå¯ä»¥é€šè¿‡APIè¿›è¡Œè°ƒç”¨è·å¾—èŠ‚ç›®ä¿¡æ¯æˆ–è€…å½•åˆ¶ï¼Œä¹Ÿæä¾›äº†Httpæµæ¨é€ï¼Œæ¥æ–¹ä¾¿å…¶ä»–å®¢æˆ·ç«¯è¿›è¡Œå½•åˆ¶ã€‚</p><p>APIä½¿ç”¨ç­‰å¯ä»¥å‚é˜…</p><blockquote><p><a href="https://github.com/Chinachu/Mirakurun" target="_blank" rel="noopener">https://github.com/Chinachu/Mirakurun</a></p></blockquote><h1 id="å®‰è£…Chinachuä»¥åŠffmpegç­‰è½¯ä»¶"><a href="#å®‰è£…Chinachuä»¥åŠffmpegç­‰è½¯ä»¶" class="headerlink" title="å®‰è£…Chinachuä»¥åŠffmpegç­‰è½¯ä»¶"></a>å®‰è£…Chinachuä»¥åŠffmpegç­‰è½¯ä»¶</h1><p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯è§†åŒ–å®¢æˆ·ç«¯æ¥å¸®åŠ©æˆ‘ä»¬ç®¡ç†é¢„çº¦ï¼Œå¯¹Mirakurunè¿›è¡Œä¸‹è¾¾å‘½ä»¤ã€‚<br>äºæ˜¯æˆ‘ä»¬éœ€è¦å®‰è£…Chinachuã€‚</p><p>ç”±äºè¿™é‡Œå¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Dockerä¸­ä¹Ÿèƒ½å®Œæˆè¿™æ ·çš„ä»»åŠ¡ï¼Œæ­å»ºè¿‡ç¨‹å°±çœç•¥ï¼Œå–è€Œä»£ä¹‹å¤§å®¶å¯ä»¥åˆ°</p><blockquote><p><a href="https://github.com/xingoxu/docker-chinachu-vaapi-ffmpeg" target="_blank" rel="noopener">https://github.com/xingoxu/docker-chinachu-vaapi-ffmpeg</a></p></blockquote><p>æŸ¥çœ‹DockerFileï¼Œæˆ–è€…å‚ç…§DockerFileè‡ªè¡Œç¼–å†™è‡ªå·±éœ€è¦çš„è„šæœ¬æ¥è¿›è¡Œæ­å»ºChinachuã€‚</p><p>å¦‚æœè¯»è€…æŒ‰ç…§æˆ‘çš„é•œåƒè¿›è¡Œæ­å»ºï¼Œéœ€è¦æ³¨æ„å¦‚ä¸‹ï¼ˆè‡ªå·±ç¼–å†™Dockerè„šæœ¬æ—¶ä¹Ÿéœ€æ³¨æ„ä¸€äº›Dockeré—®é¢˜ï¼‰</p><ul><li><p>æ—¶åŒºé—®é¢˜</p><ul><li>éœ€è¦æŒ‚è½½ <code>/etc/localtime:/etc/localtime:ro</code></li></ul></li><li><p>Chinachu çš„é¢„çº¦/è®¾ç½®æ•°æ®</p><ul><li>æŒ‚è½½å¦‚ä¸‹æ–‡ä»¶ä¸ç›®å½•ä»¥é˜²æ­¢å®¹å™¨é‡å»ºä¸¢å¤±æ•°æ®ã€</li><li>./chinachu/data:/chinachu/data</li><li>./chinachu/rules.json:/chinachu/rules.json</li><li>./chinachu/config.json:/chinachu/config.json</li></ul></li><li><p>æ—¥å¿—é—®é¢˜</p><ul><li>Chinachuå’Œpm2å·²ç»è‡ªå¸¦æ—¥å¿—ï¼Œå°±ä¸éœ€è¦Dockerå†å¸®æˆ‘ä»¬å…œä¸€å±‚æ—¥å¿—äº†</li><li>ç¼–å†™å¯åŠ¨è„šæœ¬ å¹¶è®¾ç½®å…¥å£ç‚¹<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line"></span><br><span class="line">npm install</span><br><span class="line">pm2-runtime processes.json &gt; &#x2F;dev&#x2F;null</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ä¸è¦å¿˜è®°æŒ‚è½½å½•åƒç›®å½•</p><ul><li>/volume2/TVRecorded:/chinachu/recorded</li></ul></li><li><p>ä¸è¦å¿˜è®°æš´éœ²ç«¯å£</p></li></ul><h2 id="é…ç½®Chinachuè®¾ç½®"><a href="#é…ç½®Chinachuè®¾ç½®" class="headerlink" title="é…ç½®Chinachuè®¾ç½®"></a>é…ç½®Chinachuè®¾ç½®</h2><p>Chinachuçš„å®˜æ–¹é…ç½®æ–‡æ¡£åœ¨è¿™é‡Œ</p><blockquote><p><a href="https://github.com/Chinachu/Chinachu/wiki/Gamma-Configuration" target="_blank" rel="noopener">https://github.com/Chinachu/Chinachu/wiki/Gamma-Configuration</a></p></blockquote><p>åŸºæœ¬æ²¡æœ‰ä»€ä¹ˆå¤ªå¤šéœ€è¦æ³¨æ„çš„ï¼Œå°†é¢„è®¾å†…å®¹æ‹·è´ä¸€ä»½æŒ‚è½½è¿›Dockerå°±å¯ä»¥ã€‚</p><p>éœ€è¦æ³¨æ„vaapiç›¸å…³å†…å®¹ï¼Œä¸‹è¿°ã€‚</p><p>ä¹‹åå°±å¯åŠ¨Dockerå®¹å™¨å§ï¼Œå¯åŠ¨è„šæœ¬å°±è¯·å„ä½è‡ªè¡ŒæŒ‚è½½å¹¶å¯åŠ¨äº†<br>ä¹Ÿå¯ä»¥ä½¿ç”¨docker-composeæ¥å¯åŠ¨ï¼Œ<code>docker-compose up</code></p><h2 id="æ­å»ºæˆåŠŸ"><a href="#æ­å»ºæˆåŠŸ" class="headerlink" title="æ­å»ºæˆåŠŸ"></a>æ­å»ºæˆåŠŸ</h2><p>è¾“å…¥ NAS åœ°å€å’Œç«¯å£å·åè¿›å…¥Chinachuç•Œé¢å¹¶èƒ½çœ‹åˆ°èŠ‚ç›®è¡¨åŸºæœ¬å°±ç®—æˆåŠŸäº†ã€‚</p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1g336sgurv5j224s17k1ky.jpg" alt="èŠ‚ç›®è¡¨"></p><h2 id="æ·»åŠ å½•åˆ¶åè½¬ç è„šæœ¬"><a href="#æ·»åŠ å½•åˆ¶åè½¬ç è„šæœ¬" class="headerlink" title="æ·»åŠ å½•åˆ¶åè½¬ç è„šæœ¬"></a>æ·»åŠ å½•åˆ¶åè½¬ç è„šæœ¬</h2><p>å½•åˆ¶åæ˜¯m2tsçš„TSæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ NAS é—²æš‡ CPU ï¼ˆx86æ¶æ„çš„ nas åŸºæœ¬éƒ½å…·æœ‰ç¡¬ä»¶åŠ é€Ÿï¼‰å°† TS æ–‡ä»¶è½¬æ¢æˆ mp4ï¼Œç¼©å°æ–‡ä»¶ä½“ç§¯ä¿å­˜ç­‰ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä½¿ç”¨vaapiï¼ˆIntel CPUçš„ç¡¬ä»¶åŠ é€Ÿè§£ç ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨å¯åŠ¨Dockeræ—¶éœ€è¦ä½¿ç”¨rootæƒé™ï¼Œå¦åˆ™æ— æ³•è®¿é—® <code>/dev/dri/renderD128</code>ç¡¬ä»¶ã€‚</p><p>ä½†æ˜¯å½•åˆ¶åçš„æ–‡ä»¶çš„æ‰€æœ‰è€…å°±ä¼šå˜æˆrootï¼Œå…¶ä»–åº”ç”¨ç¨‹åºè¯»å–æˆ–ä¿®æ”¹çš„æ—¶å€™ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œå› æ­¤æˆ‘æ¨èåœ¨å½•åˆ¶åï¼Œè½¬ç åï¼Œå¯ä»¥è‡ªå·±ç¼–å†™è„šæœ¬æ¥é‡æ–°è®¾ç½®æƒé™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chown &lt;uid&gt;:&lt;gid&gt; &lt;&#x2F;path&#x2F;to&#x2F;file&gt;</span><br></pre></td></tr></table></figure><p>ffmpegçš„ç›¸å…³å‚æ•°æˆ‘åœ¨è¿™é‡Œè´´å‡ºè‡ªå·±çš„è¿›è¡Œå…±äº«ï¼Œä½ å½“ç„¶ä¹Ÿå¯ä»¥å‚ç…§å®˜æ–¹æ–‡æ¡£è¿›è¡Œè°ƒæ•´ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg \</span><br><span class="line">  -init_hw_device vaapi&#x3D;intel:&#x2F;dev&#x2F;dri&#x2F;renderD128 -hwaccel vaapi -hwaccel_output_format vaapi -hwaccel_device intel -filter_hw_device intel \</span><br><span class="line">  -i &#x2F;path&#x2F;to&#x2F;recorded&#x2F;file \</span><br><span class="line">  -analyzeduration 30M -probesize 30M \</span><br><span class="line">  -vf &#39;format&#x3D;nv12|vaapi,hwupload,deinterlace_vaapi&#39; \</span><br><span class="line">  -c:v h264_vaapi  \</span><br><span class="line">  -threads 4 \</span><br><span class="line">  &#x2F;path&#x2F;to&#x2F;output&#x2F;file</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šè¿™é‡Œçš„ç¯å¢ƒPATHæ¯”è¾ƒå¾®å¦™ï¼Œè¯·ä¸€å®šä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚</p><p>æˆ‘å†™äº†ä¸€ä¸ª shell è„šæœ¬ï¼Œå°†è„šæœ¬å‘½åæˆä½ å–œæ¬¢çš„åç§°ï¼Œå‡è®¾ <code>afterRecord</code> ï¼Œä¸è¦å¿˜è®°èµ‹äºˆæ‰§è¡Œæƒé™ï¼Œåœ¨ <code>config.json</code> ä¸­ä¿®æ”¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;recordedCommand&quot;: &quot;.&#x2F;userScripts&#x2F;afterRecord&quot;,</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚ä¿®æ”¹è½¬ç è®¾ç½®ï¼Œæˆ–è€…æ·»åŠ LINEé€šçŸ¥ç­‰åŠŸèƒ½ï¼Œæ‰“é€ å±äºè‡ªå·±çš„å½•åƒæœåŠ¡å™¨ã€‚</p><h1 id="å¦å¤–ä¸€äº›é…ç½®"><a href="#å¦å¤–ä¸€äº›é…ç½®" class="headerlink" title="å¦å¤–ä¸€äº›é…ç½®"></a>å¦å¤–ä¸€äº›é…ç½®</h1><h2 id="ç»™WebGUIè®¾ç½®è®¿é—®æƒé™"><a href="#ç»™WebGUIè®¾ç½®è®¿é—®æƒé™" class="headerlink" title="ç»™WebGUIè®¾ç½®è®¿é—®æƒé™"></a>ç»™WebGUIè®¾ç½®è®¿é—®æƒé™</h2><p>ç›´æ¥æŠŠ WebGUI æš´éœ²åœ¨å…¬ç½‘ä¸Šè¿˜æ˜¯å¾ˆå±é™©çš„ï¼Œæˆ‘ä»¬ç»™ç•Œé¢æ·»åŠ ä¸€ä¸ªå¯†ç è¾“å…¥ï¼Œä¿è¯å½•åƒæœåŠ¡å™¨åªèƒ½è‡ªå·±ç”¨ã€‚</p><p>ç”±äºæˆ‘ç”¨äº† docker-compose ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ·»åŠ  nginx å¹¶è®¾ç½®åä»£</p><h3 id="ç”Ÿæˆå¯†ç "><a href="#ç”Ÿæˆå¯†ç " class="headerlink" title="ç”Ÿæˆå¯†ç "></a>ç”Ÿæˆå¯†ç </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo htpasswd -c &#x2F;path&#x2F;to&#x2F;.htpasswd &lt;username&gt;</span><br></pre></td></tr></table></figure><h3 id="æ‹·è´è‡³æœåŠ¡å™¨"><a href="#æ‹·è´è‡³æœåŠ¡å™¨" class="headerlink" title="æ‹·è´è‡³æœåŠ¡å™¨"></a>æ‹·è´è‡³æœåŠ¡å™¨</h3><p>åœ¨æœåŠ¡å™¨ä¸Šç›´æ¥ç”Ÿæˆçš„å¯ä»¥è·³è¿‡</p><h3 id="ä¿®æ”¹nginx-é…ç½®-é‡å¯-docker"><a href="#ä¿®æ”¹nginx-é…ç½®-é‡å¯-docker" class="headerlink" title="ä¿®æ”¹nginx é…ç½® é‡å¯ docker"></a>ä¿®æ”¹nginx é…ç½® é‡å¯ docker</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">location &#x2F; &#123;</span><br><span class="line">    proxy_pass   http:&#x2F;&#x2F;localhost:5601;</span><br><span class="line">    auth_basic &quot; Basic Authentication &quot;;      </span><br><span class="line">    auth_basic_user_file &quot;&#x2F;etc&#x2F;nginx&#x2F;.htpasswd&quot;;       </span><br><span class="line">&#125;</span><br><span class="line">.....</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose restart</span><br></pre></td></tr></table></figure><p>åˆ·æ–°ç•Œé¢ï¼Œæ­¤æ—¶åº”è¯¥è¢«è¦æ±‚è¾“å…¥å¯†ç </p><h2 id="æ·»åŠ ç´¢å¼•"><a href="#æ·»åŠ ç´¢å¼•" class="headerlink" title="æ·»åŠ ç´¢å¼•"></a>æ·»åŠ ç´¢å¼•</h2><p>é€šè¿‡è‡ªå·±çš„è„šæœ¬æ¥åˆ›å»ºçš„æ–‡ä»¶ç¾¤æ™–æ˜¯æ— æ³•å¢åŠ ç´¢å¼•çš„ï¼Œä»¥è‡³äºåœ¨DLNAå¹¿æ’­ä¸­æ— æ³•æ˜¾ç¤ºæˆ‘ä»¬è½¬ç æˆ–è€…å½•åˆ¶çš„æ–‡ä»¶</p><p>å‡è®¾æˆ‘ä»¬çš„å½•åƒæ–‡ä»¶ç›´æ¥å­˜å‚¨åœ¨<code>/path/to/record/folder</code>ä¸‹é¢ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™è„šæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /path/to/record/folder</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> mediafile <span class="keyword">in</span> $(find /path/to/record/folder -maxdepth 1 -<span class="built_in">type</span> f -mmin -&lt;minutes&gt; -not -name .DS_Store)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">synoindex -a <span class="variable">$mediafile</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ç¬¬ä¸‰è¡Œ <code>cd</code> ä¸å¯æ¼å»ï¼Œå¦åˆ™ç¾¤æ™–ä¸ä¼šåœ¨æ­¤æ–‡ä»¶å¤¹ä¸­æ‰§è¡Œ <code>find</code> ã€‚</p><p>ä¿å­˜è„šæœ¬ï¼Œå‡è®¾ <code>reindexTVRecorded</code>ï¼Œåœ¨ <code>æ§åˆ¶é¢æ¿ - ä»»åŠ¡è®¡åˆ’ - æ–°å¢ - è®¡åˆ’ä»»åŠ¡ - ç”¨æˆ·è„šæœ¬</code>ï¼Œè¾“å…¥è®¡åˆ’ï¼Œè¾“å…¥ä»»åŠ¡è¿è¡Œè„šæœ¬ä¿å­˜å³å¯</p><p><img src="https://static.xingoxu.com/blog/sinaimg/005BYqpggy1g336q15opxj31bx0u0wmy.jpg" alt="é‡æ–°ç´¢å¼•"></p><h1 id="å­˜åœ¨çš„é—®é¢˜ï¼ˆæ²¡æœ‰å®ç°çš„éœ€æ±‚ï¼‰"><a href="#å­˜åœ¨çš„é—®é¢˜ï¼ˆæ²¡æœ‰å®ç°çš„éœ€æ±‚ï¼‰" class="headerlink" title="å­˜åœ¨çš„é—®é¢˜ï¼ˆæ²¡æœ‰å®ç°çš„éœ€æ±‚ï¼‰"></a>å­˜åœ¨çš„é—®é¢˜ï¼ˆæ²¡æœ‰å®ç°çš„éœ€æ±‚ï¼‰</h1><ul><li>å­—å¹•<ul><li>æœ‰éƒ¨åˆ†ç”µè§†å°åŒæ—¶æ”¾é€å­—å¹•ï¼Œå½•åˆ¶çš„TSæ˜¯æœ‰å­—å¹•çš„ï¼Œå¯ä»¥åœ¨VLCç¡®è®¤åˆ°</li><li>ä½†æ²¡æœ‰åŠæ³•ä½¿ç”¨ç½‘ä¸Šçš„é€šç”¨æ–¹æ³•æ¯”å¦‚assdumperæå–å‡ºæ¥ï¼Œæå–å‡ºæ¥æ˜¯ç©ºçš„</li><li>æš‚æ—¶æ²¡æœ‰å°è¯•ä½¿ç”¨ <code>Caption2Ass.exe</code>ç­‰windowsç¨‹åº</li></ul></li><li>å¤šå›½å£°é“<ul><li>å­˜åœ¨ä¸¤ä¸ªé—®é¢˜</li></ul><ol><li>ä½¿ç”¨åŒå£°é“åœ¨å•å£°é“ä¸­åˆ†åˆ«æ”¾é€ä¸¤ä¸ªå›½å®¶çš„éŸ³æºï¼ˆå¤šå­˜åœ¨äºNHKæ–°é—»ï¼‰</li><li>ä½¿ç”¨å¤šä¸ªæµæ¨é€å¤šå›½å£°é“</li></ol><ul><li>æ— è®ºå“ªç§æƒ…å†µï¼Œä½¿ç”¨äº†ç½‘ä¸Šçš„æ— è®ºå“ªç§åŒ…æ‹¬<br><code>-filter_complex channelsplit</code> æˆ–è€…<br><code>-dual_mono_mode main</code><br>éƒ½æ— æ³•æˆåŠŸè§£å†³</li></ul></li></ul><p>å¯¹ä»¥ä¸Šé—®é¢˜å¦‚æœæœ‰åŠæ³•è§£å†³çš„è¯»è€…è¯·è”ç³»æˆ‘ m__m</p><h1 id="ç»“æŸ"><a href="#ç»“æŸ" class="headerlink" title="ç»“æŸ"></a>ç»“æŸ</h1><p>åœ¨æ‰‹ä¸­æœ‰NASçš„æƒ…å†µä¸‹1wä¸åˆ°æ­å»ºä¸€ä¸ªè¿™æ ·çš„å½•åƒæœåŠ¡å™¨è¿˜æ˜¯æ€§ä»·æ¯”å¾ˆé«˜çš„ï¼Œä¹‹åå°±å¯ä»¥éšæ—¶éšåœ°è§‚çœ‹ä¸€äº›å¹¶ä¸é‚£ä¹ˆéœ€è¦å¤§å±å¹•è§‚çœ‹çš„å†…å®¹ã€‚</p><p>æ–‡ç« ä¸­è¿˜æ˜¯å……æ»¡äº†è‡ªå·±è‡ªèº«çš„éœ€æ±‚ï¼Œå¦å¤–æ–‡ç« ç¼–å†™çš„æ—¶å€™å·²ç»é—´éš”æ­å»ºå®Œå·®ä¸å¤šæœ‰ä¸€ä¸ªæœˆå·¦å³çš„æ—¶é—´ï¼Œæœ‰äº›ç»†èŠ‚å¯èƒ½æ²¡æœ‰åŠæ³•å¾ˆåˆ°ä½æå†™æ¸…æ¥šï¼Œå¦‚æœä½ æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><blockquote><p><a href="https://qiita.com/shotasano/items/3809b8f3e0b62d51d3c3" target="_blank" rel="noopener">Raspberry Pi 3+Chinachuã§åœ°ãƒ‡ã‚¸éŒ²ç”»ã‚µãƒ¼ãƒãƒ¼æ§‹ç¯‰</a><br><a href="https://ywnb.net/p/201612/3264" target="_blank" rel="noopener">Linuxã®è‡ªå®…ã‚µãƒ¼ãƒã‚’ãƒ†ãƒ¬ãƒ“åŒ–ã—ã¦å®¶ä¸­ã©ã“ã§ã‚‚ãƒ†ãƒ¬ãƒ“ãŒè¦‹ã‚Œã‚‹ç’°å¢ƒã‚’ä½œã‚ã†(2)</a><br><a href="https://www.jianshu.com/p/e62c2a1cd3ab" target="_blank" rel="noopener">é€šè¿‡Nginxåå‘ä»£ç†é…ç½®Basic Authenticationå®ç°kibanaçš„è®¿é—®å®‰å…¨</a><br><a href="http://arc680.hatenablog.jp/entry/2017/01/31/005135" target="_blank" rel="noopener">2017/01/30 æ™‚ç‚¹ã§ã®éŒ²ç”»ã‚µãƒ¼ãƒæ§‹ç¯‰æ‰‹é †</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä»€ä¹ˆæ˜¯å½•åƒæœåŠ¡å™¨&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯å½•åƒæœåŠ¡å™¨&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯å½•åƒæœåŠ¡å™¨&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯å½•åƒæœåŠ¡å™¨&lt;/h1&gt;&lt;p&gt;å½•åƒæœåŠ¡å™¨å°±æ˜¯æŒ‡å°†ç”µè„‘æ¥ä¸Šç”µè§†å¤©çº¿ï¼ŒæŠŠç”µè§†èŠ‚ç›®è‡ªåŠ¨å½•åˆ¶ä¸‹æ¥å¹¶ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šã€‚åœ¨æ—¥æœ¬è®¸å¤šç”µè§†æœºéƒ½ä¼šè‡ªå¸¦å½•åˆ¶åŠŸèƒ½ï¼ŒæŒ‡å®šèŠ‚ç›®ä¹‹åæ¯å‘¨å½•åˆ¶ç›¸åŒæ—¶é—´æ®µçš„èŠ‚ç›®ï¼Œæˆ–è€…æŒ‡å®šæ¡ä»¶ï¼Œè‡ªåŠ¨å½•åˆ¶ç¬¦åˆæ¡ä»¶çš„èŠ‚ç›®ã€‚è¿™æ¬¡æˆ‘ä»¬å°±è¦æ¥å°è¯•åœ¨NASä¸Šæ­å»ºè¿™ä¹ˆä¸€ä¸ªå½•åˆ¶æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;h1 id=&quot;ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ­å»ºè¿™æ ·çš„æœåŠ¡å™¨&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ­å»ºè¿™æ ·çš„æœåŠ¡å™¨&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ­å»ºè¿™æ ·çš„æœåŠ¡å™¨&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ­å»ºè¿™æ ·çš„æœåŠ¡å™¨&lt;/h1&gt;&lt;p&gt;æ—¢ç„¶ç”µè§†æœºå·²ç»æœ‰äº†è¿™æ ·çš„åŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦é¢å¤–æ­å»ºè¿™æ ·çš„æœåŠ¡å™¨å‘¢ã€‚&lt;br&gt;ç”µè§†æœºç¡®å®å·²ç»å¾ˆå¼ºå¤§ï¼Œä½†æˆ‘ä»¬ä¹Ÿæœ‰ä¸²æµéœ€æ±‚ï¼Œåœ¨å®¶ï¼Œåœ¨å¤–è¾¹ï¼Œåœ¨ç¬”è®°æœ¬ä¸Šéšæ—¶éšåœ°éƒ½æƒ³æ”¶çœ‹å½•åˆ¶çš„ç”µè§†èŠ‚ç›®çš„è¯ï¼Œåªæœ‰ä¸€ä¸ªç”µè§†æœºå’Œæ”¶çœ‹è®¾å¤‡çš„è¯å¾ˆéš¾åšåˆ°ã€‚&lt;br&gt;æ­å»ºäº†è¿™ä¸ªæœåŠ¡å™¨ä¹‹åï¼Œæˆ‘ä»¬è¿˜èƒ½å®ç°åœ¨æ‰‹æœºåœ¨ç”µè„‘å®æ—¶è§‚çœ‹ç”µè§†ç›´æ’­åŠŸèƒ½ï¼Œç”»è´¨å½“ç„¶ä¸ç”µè§†å°ä¸€è‡´ã€‚&lt;/p&gt;
&lt;h1 id=&quot;ä¸ºä»€ä¹ˆè¦æ”¾åœ¨NASä¸Š&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆè¦æ”¾åœ¨NASä¸Š&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆè¦æ”¾åœ¨NASä¸Š&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆè¦æ”¾åœ¨NASä¸Š&lt;/h1&gt;&lt;p&gt;è¿˜ä¸æ˜¯ä¸ºäº†æ‹¯æ•‘æˆ‘é‚£24å°æ—¶å¼€æœºçš„NASä½†å´åªç”¨æ¥åŒæ­¥æ–‡ä»¶çš„ç”µè€è™å—&lt;/p&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
    
  </entry>
  
  <entry>
    <title>Synology NASã«è‡ªå®…ã§éŒ²ç”»ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¦ã¾ã—ãŸ</title>
    <link href="https://blog.xingoxu.com/ja/2019/05/2019-05-16-record-jp-digital-TV-on-nas/"/>
    <id>https://blog.xingoxu.com/ja/2019/05/2019-05-16-record-jp-digital-TV-on-nas/</id>
    <published>2019-05-16T07:47:37.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ãªãœNASã«"><a href="#ãªãœNASã«" class="headerlink" title="ãªãœNASã«"></a>ãªãœNASã«</h1><p>NASã‚’æŒã£ã¦ã‚‹æ–¹å¤šã„ã¨æ€ã„ã¾ã™ã—ã€NASã¯24æ™‚é–“èµ·å‹•ã—ã¦ã‚‹ã®ã§ã€æ–°ã—ã„ãƒ‡ãƒã‚¤ã‚¹è²·ã‚ãªãç¯€é›»ã§ãã¦éŒ²ç”»ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä»»ã›ã‚ã†ã€‚</p><h1 id="ä½¿ã†ã‚‚ã®"><a href="#ä½¿ã†ã‚‚ã®" class="headerlink" title="ä½¿ã†ã‚‚ã®"></a>ä½¿ã†ã‚‚ã®</h1><ul><li>Synology NAS ä¸€å°<ul><li>ã‚¢ãƒ³ãƒ†ãƒŠã‚’æ¥ç¶šã—ã¦ãƒªã‚³ãƒ¼ãƒ‰ã™ã‚‹</li><li>Dockerã¨Virtual Machine Managerå¯¾å¿œæ©Ÿç¨® ï¼ˆ<a href="https://www.synology.com/en-us/dsm/packages/Virtualization" target="_blank" rel="noopener">æ©Ÿç¨®ä¸€è¦§</a>ï¼‰</li></ul></li><li>PLEX USBåœ°ä¸Šæ³¢ã‚¢ãƒ³ãƒ†ãƒŠ PX-S1UD V2.0<ul><li>åˆå¿ƒè€…ã«å„ªã—ã„åœ°ãƒ‡ã‚¸ã‚¢ãƒ³ãƒ†ãƒŠ</li><li>é«˜ããªã„ã€4530å††</li><li>1ãƒãƒ£ãƒ³ãƒãƒ«ã®ã¿ã®è¦–è´ã€éŒ²ç”»ãŒå¯èƒ½ã€è²·ã„è¶³ã—ã¦åŒæ™‚å—ä¿¡ãƒãƒ£ãƒ³ãƒãƒ«ãŒå¢—ã‚„ã›ã‚‹</li><li><a href="https://www.amazon.co.jp/gp/product/B0141NFWSG/" target="_blank" rel="noopener">è²·ã†</a></li></ul></li><li>SCM ICè¯»å¡å™¨<ul><li>B-CASã‚«ãƒ¼ãƒ‰ã®èª­ã¿å–ã‚Šç”¨ã€1000å††ãã‚‰ã„</li><li><a href="https://www.amazon.co.jp/gp/product/B0085H4YZC/" target="_blank" rel="noopener">è²·ã†</a></li><li>å‹ç•ªã¯åŒã˜ã§ã¯ãªã„ã‹ã‚‚ã€SCMã˜ã‚ƒãªã„ã‚„ã¤å±Šã‘ã‚‰ã‚ŒãŸã‚‰è‡ªå·±èª¿æ•´å¿…è¦</li><li>SoftCASã‚‚ä½¿ãˆã‚‹ã‚‰ã—ã„ãŒã€ç§ã¯ä½¿ã‚ãªã„</li></ul></li><li>HDD<ul><li>éŒ²ç”»ã—ãŸæ˜ åƒä¿å­˜ç”¨</li></ul></li><li>B-CAS ã‚«ãƒ¼ãƒ‰<ul><li>ãƒ†ã‚¹ãƒˆã¯ãƒ†ãƒ¬ãƒ“ã‹ã‚‰å€Ÿã‚Šã‚‹ã®ã¯ã„ã„ã¨æ€ã„ã¾ã™</li><li>ã‚¢ãƒã‚¾ãƒ³ã«ã‚‚èª°ãŒå£²ã£ã¦ã‚‹ã‚‰ã—ã„ãŒã€è‡ªå·±è²¬ä»»ã§ãŠé¡˜ã„ã—ã¾ã™</li></ul></li><li>ã‚¢ãƒ³ãƒ†ãƒŠåˆ†æ³¢å™¨ / åˆ†é…å™¨ ã€æ¥ç¶šç·š<ul><li>TVã¨åŒæ™‚è¦–è´ã™ã‚‹ãŸã‚ã€‚å¿…é ˆã§ã¯ãªã„ã€‚</li></ul></li></ul><a id="more"></a><h1 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h1><p>è¨˜äº‹æ›¸ãæ™‚ç‚¹ã ã‘ã®æœ‰åŠ¹æ€§ã‚’ä¿è¨¼ã—ã¾ã™ã€ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿åˆå¿ƒè€…å‘ã‘ã§ã¯ãªã„ã€‚<br>ä»¥ä¸‹ã®æ‰‹é †ã¯å…¨ã¦è‡ªå·±è²¬ä»»ã§ã€ä½•ã‹ã—ã‚‰ã®å•é¡ŒãŒç™ºç”Ÿã—ã¦ã‚‚è‡ªåŠ›ã§å¯¾å‡¦ã§ãã‚‹æ–¹ã®ã¿å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚<br>ãƒ†ãƒ¬ãƒ“ç•ªçµ„ã®ã‚³ãƒ”ãƒ¼ã€é…ä¿¡ã¯é•æ³•ã¨ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ä½¿ç”¨ã«ã¤ã„ã¦ã‚‚ååˆ†æ³¨æ„ã—ã¦ä¸‹ã•ã„ã€‚<br>ã“ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ãŸã“ã¨ã«ã‚ˆã‚Šç”Ÿã˜ãŸã‚ã‚‰ã‚†ã‚‹æå®³ã«ã¤ã„ã¦ã€è‘—è€…ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</p><h1 id="æ§‹é€ "><a href="#æ§‹é€ " class="headerlink" title="æ§‹é€ "></a>æ§‹é€ </h1><p><img src="https://static.xingoxu.com/blog/sinaimg/005BYqpggy1g336pg2yuyj30fm0akgm2.jpg" alt="æ¶æ„"></p><p>å¤§ä½“ã“ã†ã„ã†æ„Ÿã˜ã§ã‚„ã£ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="NAS-ã®æº–å‚™"><a href="#NAS-ã®æº–å‚™" class="headerlink" title="NAS ã®æº–å‚™"></a>NAS ã®æº–å‚™</h1><ul><li>Dockerã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li><li>Virtual Machine Managerã€€ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li><li>VMM ã« Ubuntu 16.04/18.04ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«<ul><li>ä»–ã®Linux Distrubtionã‚‚ã§ãã‚‹ã‹ã‚‚ã€æœ¬è¨˜äº‹ã¯Ubuntu 18.04ã§èª¬æ˜ã—ã¾ã™</li><li>Linuxã®ã‚«ãƒ¼ãƒãƒ«ã¯3.15ã‚’è¶Šãˆãªã„ã¨ã„ã‘ãªã„ï¼ˆç†ç”±ã‚ã¨èª¬æ˜ï¼‰</li><li>LANã®ã¿ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«è¨­å®šã™ã‚‹ã®ã¯ãŠã™ã™ã‚</li></ul></li></ul><h1 id="ã‚¢ãƒ³ãƒ†ãƒŠè¨­ç½®"><a href="#ã‚¢ãƒ³ãƒ†ãƒŠè¨­ç½®" class="headerlink" title="ã‚¢ãƒ³ãƒ†ãƒŠè¨­ç½®"></a>ã‚¢ãƒ³ãƒ†ãƒŠè¨­ç½®</h1><p>VMã«ã‚¢ãƒ³ãƒ†ãƒŠã®ãƒ‰ãƒ©ã‚¤ãƒã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ wget http:&#x2F;&#x2F;plex-net.co.jp&#x2F;plex&#x2F;px-s1ud&#x2F;PX-S1UD_driver_Ver.1.0.1.zip</span><br><span class="line">$ unzip PX-S1UD_driver_Ver.1.0.1.zip</span><br><span class="line">$ sudo cp PX-S1UD_driver_Ver.1.0.1&#x2F;x64&#x2F;amd64&#x2F;isdbt_rio.inp &#x2F;lib&#x2F;firmware&#x2F;</span><br></pre></td></tr></table></figure><p>å®Œäº†ã€‚</p><p>ã‚¢ãƒ³ãƒ†ãƒŠãƒ‰ãƒ©ã‚¤ãƒæœ€ä½3.15ã®Linux ã‚«ãƒ¼ãƒãƒ«å¿…è¦ãªã®ã§ã€Synology NASã®Linuxã‚«ãƒ¼ãƒãƒ«ã¯3.10ãªã®ã§VMã‚’ç«‹ã£ã¦ä½¿ã„ã¾ã™ã€‚</p><p>ã‚‚ã—ä»Šå¾Œ NAS ã®ã‚«ãƒ¼ãƒãƒ«ãŒ3.15ä»¥ä¸Šã«ãªã£ãŸã‚‰ã€æ¬¡å› <a href="https://github.com/Chinachu/docker-mirakurun-chinachu" target="_blank" rel="noopener">https://github.com/Chinachu/docker-mirakurun-chinachu</a> ã® Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="ã‚«ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã¨B-CASã®æº–å‚™"><a href="#ã‚«ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã¨B-CASã®æº–å‚™" class="headerlink" title="ã‚«ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã¨B-CASã®æº–å‚™"></a>ã‚«ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã¨B-CASã®æº–å‚™</h1><p>ã‚«ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã‚½ãƒ•ãƒˆã¨ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install build-essential git cmake g++</span><br><span class="line">$ sudo apt-get install pcscd libpcsclite-dev libccid pcsc-tools</span><br></pre></td></tr></table></figure><p>å®Œäº†å¾Œã€<code>sudo pcsc_scan</code> ã‚’å®Ÿè¡Œã—ã¦ã€<code>Japanese Chijou Digital B-CAS Card (pay TV)</code>ã¿ãŸã„ã‚‚ã®ã§ãŸã‚‰å®Œæˆã§ã™ã€‚</p><p>ã—ã‹ã—ã€ç§ã¯ã“ã“ï¼’ã¤å•é¡Œé­ã£ãŸã€<br>ï¼‘ã¤ç›®ã¯å…¥ã‚Œé–“é•ãˆãŸwwã€<br>ï¼’ã¤ç›®ã¯B-CASã‚«ãƒ¼ãƒ‰ç„¡åŠ¹å•é¡Œã€B-CASã‚«ãƒ¼ãƒ‰ã‚’æœ€åˆã«ãƒ†ãƒ¬ãƒ“ã«å…¥ã‚Œã¦è¦‹ã¦ã¿ãŸã‚‰å¤šåˆ†åˆ†ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>å‹ç•ªã‚‚å•é¡Œã«ãªã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€å‚è€ƒã—ãŸè¨˜äº‹ã®ä½œå®¶ã•ã‚“ã¯é­ã£ãŸã®ã§ãã¡ã‚‰ã®è¨˜äº‹ã‚’ãŠè¶Šã—ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="B-CASã®ãƒ‡ã‚³ãƒ¼ãƒ‰ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#B-CASã®ãƒ‡ã‚³ãƒ¼ãƒ‰ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="B-CASã®ãƒ‡ã‚³ãƒ¼ãƒ‰ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>B-CASã®ãƒ‡ã‚³ãƒ¼ãƒ‰ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h1><p>æ—¥æœ¬ã®åœ°ãƒ‡ã‚¸æ”¾é€ã¯æš—å·åŒ–ã•ã‚ŒãŸçŠ¶æ…‹ã§é…ä¿¡ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãã®ã¾ã¾å—ä¿¡ã—ã¦ä¿å­˜ã™ã‚‹ã¨å†ç”Ÿã‚„è¤‡è£½ã®éš›ã«å•é¡ŒãŒèµ·ã“ã‚‹ã€‚ãã“ã§ã€B-CASã‚«ãƒ¼ãƒ‰ã®æƒ…å ±ã‚’ä½¿ã£ã¦å—ä¿¡ã¨åŒæ™‚ã«å¾©å·ã™ã‚‹ã®ãŒæœ›ã¾ã—ã„ã€‚ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒlibarib25ã ã€‚</p><p>ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¿…è¦ã§ã™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ wget https:&#x2F;&#x2F;github.com&#x2F;stz2012&#x2F;libarib25&#x2F;archive&#x2F;master.zip</span><br><span class="line">$ unzip master.zip</span><br><span class="line">$ cd libarib25-master</span><br><span class="line">$ cmake .</span><br><span class="line">$ make</span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure><p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã§ã™ã€‚</p><h1 id="éŒ²ç”»ç”¨ã‚³ãƒãƒ³ãƒ‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#éŒ²ç”»ç”¨ã‚³ãƒãƒ³ãƒ‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="éŒ²ç”»ç”¨ã‚³ãƒãƒ³ãƒ‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>éŒ²ç”»ç”¨ã‚³ãƒãƒ³ãƒ‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h1><p>éŒ²ç”»ã‚½ãƒ•ãƒˆã¯ã“ã‚Œã‚’ä½¿ã£ã¦éŒ²ç”»ã—ã¾ã™ã®ã§ã€recdvbã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚<br>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚ã‚‹ã‚“ã‘ã©ã€Githubã«è¼‰ã£ã¦ã„ãªã„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ wget http:&#x2F;&#x2F;www13.plala.or.jp&#x2F;sat&#x2F;recdvb&#x2F;recdvb-1.3.2.tgz</span><br><span class="line">$ tar xvzf recdvb-1.3.2.tgz</span><br><span class="line">$ cd recdvb-1.3.2</span><br><span class="line">$ .&#x2F;autogen.sh</span><br><span class="line">$ .&#x2F;configure --enable-b25</span><br><span class="line">$ make </span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure><p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã€‚</p><p>ã“ã®æ™‚ç‚¹ã§ã€ã‚³ãƒãƒ³ãƒ‰ã§ã®éŒ²ç”»ãŒå¯èƒ½ã«ãªã£ãŸã€‚ä¾‹ãˆã°ã€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ recdvb --b25 --strip &lt;channel&gt; &lt;seconds&gt; test.m2ts</span><br></pre></td></tr></table></figure><p>ãƒãƒ£ãƒ³ãƒãƒ«ã¯å—ä¿¡ã‚¿ãƒ¯ãƒ¼ã«ã‚ˆã‚‹é•ã„ã¾ã™ã®ã§ã€<a href="http://www.maspro.co.jp/contact/channel.pdf" target="_blank" rel="noopener">ã“ã¡ã‚‰</a>ã‹ã‚‰ç¢ºèªã§ãã¾ã™ã€‚</p><p>ã¾ãŸã€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ recdvb --b25 --strip --http &lt;port&gt;</span><br></pre></td></tr></table></figure><p>ã‚’ä½¿ã£ãŸã‚‰ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚’é…ä¿¡ã—ã¾ã™ã€‚</p><p>Windows / Macã®VLCã‹Macã®IINAã‹ã‚‰URLã‚’é–‹ã„ãŸã‚‰ç›´æ¥è¦‹ã‚Œã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;[IPã‚¢ãƒ‰ãƒ¬ã‚¹]:8080&#x2F;[channel number]</span><br></pre></td></tr></table></figure><p>ãƒãƒ£ãƒ³ãƒãƒ«ã¯ä¸Šã¨åŒã˜ã§ã™ã€‚</p><p>ã ãŒã€ãã®å‰ã«ã€<br>VMã®<code>/etc/hosts</code>ã‚’è¨­å®šã—ãªã‘ã‚Œã°ã„ã‘ãªã„ï¼ˆå®‰å…¨ä¿éšœã‹ãªï¼‰ã€<br>ã§ã‚‚ç§ã®ãƒãƒ¥ãƒ¼ãƒŠãƒ¼ã‚µãƒ¼ãƒãƒ¼ã¯WANã«å…¬é–‹ã™ã‚‹ã¤ã‚‚ã‚Šã¯ãªã„ã®ã§ä¸‹ã®ãƒªãƒ³ã‚¯ã‚’å‚è€ƒã—ã¦è§£é™¤ã—ã¾ã—ãŸã€‚</p><blockquote><p><a href="https://nyanonon.hatenablog.com/entries/2015/11/17" target="_blank" rel="noopener">https://nyanonon.hatenablog.com/entries/2015/11/17</a></p></blockquote><p><code>Ctrl+C</code> ã‚’æŠ¼ã—ã¦çµ‚äº†ã•ã›ã¾ã™ã€‚</p><h1 id="Mirakurunã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãƒãƒ¥ãƒ¼ãƒŠãƒ¼ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ã¾ã™"><a href="#Mirakurunã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãƒãƒ¥ãƒ¼ãƒŠãƒ¼ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ã¾ã™" class="headerlink" title="Mirakurunã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãƒãƒ¥ãƒ¼ãƒŠãƒ¼ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ã¾ã™"></a>Mirakurunã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãƒãƒ¥ãƒ¼ãƒŠãƒ¼ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ã¾ã™</h1><p>ãƒãƒ¥ãƒ¼ãƒŠãƒ¼ã‚µãƒ¼ãƒãƒ¼Mirakurunã§ã¯Web APIã‚’æä¾›ã—ã¦ã€éŒ²ç”»ã‚³ãƒãƒ³ãƒ‰ã®ä¸¦åˆ—å‡¦ç†ã‚„ã€è¤‡æ•°ãƒãƒ¥ãƒ¼ãƒŠãƒ¼ã®ç®¡ç†ã€å„ªå…ˆåº¦å‡¦ç†ãªã©æ§˜ã€…ãªæ©Ÿèƒ½ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚<br>Mirakurunã®ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã‚’é€šã˜ã¦å¤–ã§ã‚‚ç•ªçµ„ã‚’äºˆç´„ã‚‚ã§ãã‚‹ã€‚</p><p>Mirakurunã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ã“ã¡ã‚‰ã¸å‚è€ƒã—ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p><blockquote><p><a href="https://github.com/Chinachu/Mirakurun/blob/master/doc/Platforms.md" target="_blank" rel="noopener">https://github.com/Chinachu/Mirakurun/blob/master/doc/Platforms.md</a></p></blockquote><p>ã–ã£ãã‚Šã“ã“ã§æ›¸ãã¾ã™</p><h2 id="Node-js-10-ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#Node-js-10-ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="Node.js 10 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>Node.js 10 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2><blockquote><p>è¯·å‚ç…§ <a href="https://github.com/nodesource/distributions/blob/master/README.md#debinstall" target="_blank" rel="noopener">https://github.com/nodesource/distributions/blob/master/README.md#debinstall</a></p></blockquote><h2 id="PM2ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#PM2ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="PM2ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>PM2ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install pm2 -g</span><br></pre></td></tr></table></figure><h2 id="Mirakurun-ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#Mirakurun-ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="Mirakurun ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>Mirakurun ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install mirakurun -g --unsafe-perm --production</span><br></pre></td></tr></table></figure><h2 id="Mirakurun-ã‚’è¨­å®š"><a href="#Mirakurun-ã‚’è¨­å®š" class="headerlink" title="Mirakurun ã‚’è¨­å®š"></a>Mirakurun ã‚’è¨­å®š</h2><p>Tunerè¨­å®š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mirakurun config tuners</span><br></pre></td></tr></table></figure><p>ã“ã“ã§åŠæ—¥é–“ã‹ã‹ã£ãŸï¼ã‚ã‘ã‚ã‹ã‚‰ã‚“ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’æŠœã„ãŸã‚‰ä½¿ãˆã¾ã—ãŸï¼</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">PX-S1UD-1</span></span><br><span class="line">  <span class="attr">types:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">GR</span></span><br><span class="line">  <span class="attr">command:</span> <span class="string">recdev</span> <span class="string">--b25</span> <span class="string">--strip</span> <span class="string">&lt;channel&gt;</span> <span class="bullet">-</span> <span class="bullet">-</span></span><br><span class="line">  <span class="attr">isDisabled:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>Mirakurunå†èµ·å‹•ã—ã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mirakurun restart</span><br></pre></td></tr></table></figure><p><code>pm2 log</code> ã§çŠ¶æ³ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€ç‰¹ã«ãªã‚“ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ãªãã€<code>Recording</code> ãŒå‡ºãŸã‚‰å¤šåˆ†å¤§ä¸ˆå¤«ã§ã™ã€‚</p><p>ãƒãƒ£ãƒ³ãƒãƒ«ã®è¨­å®šã¯ Mirakurun ã¯è‡ªåˆ†ãŒå–å¾—ã—ã¾ã™ã®ã§ã€5-10åˆ†ãã‚‰ã„å¾…ã¦ã°ã„ã„ã€‚</p><p>ã“ã“ã¾ã§ãƒãƒ¥ãƒ¼ãƒŠãƒ¼ã‚µãƒ¼ãƒãƒ¼ã®è¨­å®šã¯å®Œäº†ã—ã¾ã—ãŸã€‚<br>Mirakurunã¯APIã¨Http Streamingã‚‚æä¾›ã—ã¦ã‚‹ã®ã§ã€<br>APIã®ä½¿ç”¨ã¯ã“ã“ã¸</p><blockquote><p><a href="https://github.com/Chinachu/Mirakurun" target="_blank" rel="noopener">https://github.com/Chinachu/Mirakurun</a></p></blockquote><h1 id="Chinachu-ffmpeg-ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹"><a href="#Chinachu-ffmpeg-ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹" class="headerlink" title="Chinachu / ffmpeg ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹"></a>Chinachu / ffmpeg ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹</h1><p>ã§ã‚‚GUIã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆãŒãªã„ã¨ã‚ã‚“ã©ãã•ã„ã€Chinachuã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p><p>Dockerã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚Šã¾ã—ãŸã®ã§ã€DockerFileå‚ç…§ã—ã¦ä½¿ã†ã‹ã€è‡ªåˆ†ãŒã‚«ã‚¹ãƒˆãƒã‚¤ã‚ºã™ã‚‹ã‚‚ã‚ˆã„ã€‚</p><blockquote><p><a href="https://github.com/xingoxu/docker-chinachu-vaapi-ffmpeg" target="_blank" rel="noopener">https://github.com/xingoxu/docker-chinachu-vaapi-ffmpeg</a></p></blockquote><p>ã‚‚ã—ç§ã®DockerFileã‚’å‚ç…§ã—ã¦ç«‹ã¦ã„ã‚‹ãªã‚‰ã€ä¸‹è¨˜ã‚’æ³¨æ„ã—ã¦ãã ã•ã„ã€‚<br>ï¼ˆDockerã‚’åˆ©ç”¨ã™ã‚‹æ–¹ã‚‚è¦‹ã‚‹ã¨ã„ã„ï¼‰</p><ul><li><p>ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å•é¡Œ</p><ul><li><code>/etc/localtime:/etc/localtime:ro</code>ã‚’ãƒã‚¦ãƒ³ãƒˆ</li></ul></li><li><p>Chinachu ã®äºˆç´„ã€è¨­å®šãƒ‡ãƒ¼ã‚¿</p><ul><li>ä¸‹è¨˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ•ã‚©ãƒ«ãƒ€ã‚’ãƒã‚¦ãƒ³ãƒˆã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¾ã—ã‚‡ã†</li><li><code>./chinachu/data:/chinachu/data</code></li><li><code>./chinachu/rules.json:/chinachu/rules.json</code></li><li><code>./chinachu/config.json:/chinachu/config.json</code></li></ul></li><li><p>è†¨å¤§ãƒ­ã‚°å•é¡Œ</p><ul><li>Chinachuã¨pm2ã¯ãƒ­ã‚°å…¥ã£ã¦ã‚‹ã‹ã‚‰ã€Dockerã®ãƒ­ã‚°ã¯ã„ã‚‰ãªã„ã€ã‚¨ãƒ©ãƒ¼ã ã‘ã‚’å‡ºåŠ›ã•ã›ã‚ã†</li><li>ä¸‹è¨˜ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦ä¿å­˜ã—ã¦å…¥ã‚Šå£ã‚’è¨­å®šã—ã¾ã™ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line"></span><br><span class="line">npm install</span><br><span class="line">pm2-runtime processes.json &gt; &#x2F;dev&#x2F;null</span><br></pre></td></tr></table></figure></li></ul></li><li><p>éŒ²ç”»ãƒ•ã‚¡ãƒ«ãƒ€ã®ãƒã‚¦ãƒ³ãƒˆã‚’ãŠå¿˜ã‚Œãªã</p><ul><li><code>/volume2/TVRecorded:/chinachu/recorded</code></li></ul></li><li><p>ãƒãƒ¼ãƒˆã®å…¬é–‹</p></li></ul><h2 id="Chinachu-è¨­å®š"><a href="#Chinachu-è¨­å®š" class="headerlink" title="Chinachu è¨­å®š"></a>Chinachu è¨­å®š</h2><p>å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</p><blockquote><p><a href="https://github.com/Chinachu/Chinachu/wiki/Gamma-Configuration" target="_blank" rel="noopener">https://github.com/Chinachu/Chinachu/wiki/Gamma-Configuration</a></p></blockquote><p>åŸºæœ¬ã€ã‚³ãƒ”ãƒ¼ã—ã¦ã¡ã‚‡ã£ã¨ã‚«ã‚¹ãƒˆãƒã‚¤ã‚ºã™ã‚Œã°å¤§ä¸ˆå¤«ã€‚</p><p>VAAPIã«ã¤ã„ã¦ã¯ã‚ã¨ãƒˆãƒ©ãƒ³ã‚¹ã‚³ãƒ¼ãƒ‰ã®éƒ¨åˆ†ã§èª¬æ˜ã—ã¾ã™ã€‚</p><p>ãã‚Œã§ã€Dockerã‚’èµ·å‹•ã—ã¦ã€<br><code>docker-compose</code>ã‚‚åˆ©ç”¨å¯èƒ½ã§ã™ã®ã§ã€è‡ªåˆ†ã®ãƒ‹ãƒ¼ã‚ºã‚’ã‚ã‚ã›ã¦Chinachuã‚’èµ·å‹•ã—ã¾ã™ã€‚</p><h2 id="ã§ãã¾ã—ãŸã‹"><a href="#ã§ãã¾ã—ãŸã‹" class="headerlink" title="ã§ãã¾ã—ãŸã‹"></a>ã§ãã¾ã—ãŸã‹</h2><p>NASã®URLã¨ãƒãƒ¼ãƒˆç•ªå·ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã«å…¥åŠ›ã—ã¦ä¸‹ã®ç”»é¢è¦‹ã‚Œã‚‹ã¨æˆåŠŸã§ã™ã€‚</p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1g336sgurv5j224s17k1ky.jpg" alt="èŠ‚ç›®è¡¨"></p><h2 id="éŒ²ç”»å¾Œã®ãƒˆãƒ©ãƒ³ã‚¹ã‚³ãƒ¼ãƒ‰"><a href="#éŒ²ç”»å¾Œã®ãƒˆãƒ©ãƒ³ã‚¹ã‚³ãƒ¼ãƒ‰" class="headerlink" title="éŒ²ç”»å¾Œã®ãƒˆãƒ©ãƒ³ã‚¹ã‚³ãƒ¼ãƒ‰"></a>éŒ²ç”»å¾Œã®ãƒˆãƒ©ãƒ³ã‚¹ã‚³ãƒ¼ãƒ‰</h2><p>éŒ²ç”»ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯å¤§ããªç”ŸTSã€ å¤§ä½“ x86 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã® NAS ã¯ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¤ã„ã¦ã‚‹ã®ã§ã€é€Ÿã„ã‚¹ãƒ”ãƒ¼ãƒ‰ã§mp4ã«ãƒˆãƒ©ãƒ³ã‚¹ã‚³ãƒ¼ãƒ‰ã—ã¦ã€ã©ã“ã§ã‚‚è¦‹ã‚Œã‚‹ã‚³ãƒ¼ãƒ‡ãƒƒã‚¯ã«ã—ãªãŒã‚‰ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚‚å°ã•ãã•ã›ã‚‹ã€‚</p><p>æ³¨æ„ã™ã‚‹ã¹ãã®ã¯Dockerã«vaapiï¼ˆIntel CPUã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã‚’ä½¿ã†ã¨ã€rootã®æ¨©é™ã§ã‚¢ãƒ—ãƒªã‚’èµ°ã‚‰ãªã„ã¨è¡Œã‘ãªã„ï¼ˆ<code>/dev/dri/renderD128</code>ã‚’ã‚¢ã‚¯ã‚»ã‚¹ãŸã‚ã«ï¼‰</p><p>ã ãŒã“ã†ã™ã‚‹ã¨ã€éŒ²ç”»ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯rootãŒæ‰€æœ‰è€…ã«ãªã£ã¦ã€ä»–ã®ã‚¢ãƒ—ãƒªã®ç·¨é›†ã¯å‡ºæ¥ãªã„ã®ã§ã€éŒ²ç”»å¾Œã€ãƒˆãƒ©ãƒ³ã‚¹ã‚³ãƒ¼ãƒ‰ã—ãŸå¾Œã€chownã‚’èµ°ã‚‰ã›ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chown &lt;uid&gt;:&lt;gid&gt; &lt;&#x2F;path&#x2F;to&#x2F;file&gt;</span><br></pre></td></tr></table></figure><p>ffmpegã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚‚å…±æœ‰ã—ã¾ã™ãŒã€è‡ªåˆ†ã®ãƒ‹ãƒ¼ã‚ºã‚’ã‚ã‚ã›ã¦å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦èª¿æ•´ã§ãã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg \</span><br><span class="line">  -init_hw_device vaapi&#x3D;intel:&#x2F;dev&#x2F;dri&#x2F;renderD128 -hwaccel vaapi -hwaccel_output_format vaapi -hwaccel_device intel -filter_hw_device intel \</span><br><span class="line">  -i &#x2F;path&#x2F;to&#x2F;recorded&#x2F;file \</span><br><span class="line">  -analyzeduration 30M -probesize 30M \</span><br><span class="line">  -vf &#39;format&#x3D;nv12|vaapi,hwupload,deinterlace_vaapi&#39; \</span><br><span class="line">  -c:v h264_vaapi  \</span><br><span class="line">  -threads 4 \</span><br><span class="line">  &#x2F;path&#x2F;to&#x2F;output&#x2F;file</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šã“ã“ã®PATHã¯çµ¶å¯¾ã«ãƒ•ãƒ«ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€ãã†ã˜ã‚ƒãªã„ã¨å¦™ãªã¨ã“ã‚ã«è¡Œã£ã¡ã‚ƒã„ã¾ã™ã‚ˆã€‚</p><p>åå‰ã‚’ã¤ã‘ã¦ã€<code>afterRecord</code>ã¨ã—ã€ <code>config.json</code> ã«</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  "recordedCommand": "./userScripts/afterRecord",</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã‚’ç·¨é›†ã—ã¦ã€‚</p><p>è‡ªåˆ†ã®ãƒ‹ãƒ¼ã‚ºåˆã‚ã›ã¦ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚«ã‚¹ãƒˆãƒã‚¤ã‚ºã—ã¦è‡ªåˆ†å”¯ä¸€ç„¡äºŒã®ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ï¼<br>åƒ•ã¯LINEé€šçŸ¥ã‚’å…¥ã£ã¦ã¦éŒ²ç”»ã—ãŸã‚‰é€šçŸ¥ãŒLINEã«æ¥ã¾ã™ã­ã€‚</p><h1 id="NASã§ã‚„ã‚‹ã¹ãã®ã“ã¨"><a href="#NASã§ã‚„ã‚‹ã¹ãã®ã“ã¨" class="headerlink" title="NASã§ã‚„ã‚‹ã¹ãã®ã“ã¨"></a>NASã§ã‚„ã‚‹ã¹ãã®ã“ã¨</h1><h2 id="WebGUI-ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã¤ã‘ã‚‹"><a href="#WebGUI-ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã¤ã‘ã‚‹" class="headerlink" title="WebGUI ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã¤ã‘ã‚‹"></a>WebGUI ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã¤ã‘ã‚‹</h2><p>WebGUIãã®ã¾ã¾WANã«å…¬é–‹ã™ã‚‹ã¨ã¡ã‚‡ã£ã¨å±ãªã„ã€å…¥ã‚‹ã¨ããƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’å…¥ã‚Œã¾ã—ã‚‡ã†ã€è‡ªåˆ†ã ã‘å…¥ã‚‹ã“ã¨ã‚’ç¢ºä¿ã—ã¾ã—ã‚‡ã†ã€‚</p><p>åƒ•docker-compose ã‚’ä½¿ã£ãŸã‹ã‚‰ã€ã™ã nginx ã‚’è¿½åŠ ã§ãã¾ã™ã€‚</p><h3 id="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹"><a href="#ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹" class="headerlink" title="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹"></a>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo htpasswd -c &#x2F;path&#x2F;to&#x2F;.htpasswd &lt;username&gt;</span><br></pre></td></tr></table></figure><h3 id="ã‚µãƒ¼ãƒãƒ¼ã«ã‚³ãƒ”ãƒ¼ã—ã¦"><a href="#ã‚µãƒ¼ãƒãƒ¼ã«ã‚³ãƒ”ãƒ¼ã—ã¦" class="headerlink" title="ã‚µãƒ¼ãƒãƒ¼ã«ã‚³ãƒ”ãƒ¼ã—ã¦"></a>ã‚µãƒ¼ãƒãƒ¼ã«ã‚³ãƒ”ãƒ¼ã—ã¦</h3><p>ã‚µãƒ¼ãƒãƒ¼ã§ç”Ÿæˆã™ã‚‹æ–¹ã¯ã‚¹ã‚­ãƒƒãƒ—ãƒ¼</p><h3 id="nginx-ã‚’è¨­å®šã—ã¦-docker-compose-å†èµ·å‹•"><a href="#nginx-ã‚’è¨­å®šã—ã¦-docker-compose-å†èµ·å‹•" class="headerlink" title="nginx ã‚’è¨­å®šã—ã¦ docker-compose å†èµ·å‹•"></a>nginx ã‚’è¨­å®šã—ã¦ docker-compose å†èµ·å‹•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">location &#x2F; &#123;</span><br><span class="line">    proxy_pass   http:&#x2F;&#x2F;localhost:5601;</span><br><span class="line">    auth_basic &quot; Basic Authentication &quot;;      </span><br><span class="line">    auth_basic_user_file &quot;&#x2F;etc&#x2F;nginx&#x2F;.htpasswd&quot;;       </span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose restart</span><br></pre></td></tr></table></figure><p>ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã—ã¦ã€ã“ã“ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ±‚ã‚ã‚‰ã‚Œã¦ã‚‹ã¯ãšã§ã™ã€‚</p><h2 id="NAS-å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹"><a href="#NAS-å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹" class="headerlink" title="NAS å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹"></a>NAS å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹</h2><p>è‡ªåˆ†ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä½œã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯ NAS ã¯çŸ¥ã‚‰ãªã„ã®ã§ã€DLNAã¨ã‹ã§å‡ºã¦ã“ãªã„ã€‚<br>ãã“ã§å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ä»®ã«ã™ã¹ã¦éŒ²ç”»ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯<code>/path/to/record/folder</code>ã®ç¬¬ä¸€å±¤ã§ã„ã‚‹ã€ã“ã®ã‚ˆã†ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /path/to/record/folder</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> mediafile <span class="keyword">in</span> $(find /path/to/record/folder -maxdepth 1 -<span class="built_in">type</span> f -mmin -&lt;minutes&gt; -not -name .DS_Store)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">synoindex -a <span class="variable">$mediafile</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p><code>reindexTVRecorded</code>ã‚’åå‰ã‚’ä»˜ã‘ã¦ã€ <code>Control Panel - Task - New - Scheduled - User Script</code>ã€æ™‚é–“ã¨ã‹é¸æŠã—ã¦ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ‘ã‚¹å…¥ã‚Œã¦ã€Œã¯ã„ã€ã‚’æŠ¼ã—ãŸã‚‰å®Œäº†ã€‚</p><p><img src="https://static.xingoxu.com/blog/sinaimg/005BYqpggy1g336q15opxj31bx0u0wmy.jpg" alt="é‡æ–°ç´¢å¼•"></p><h1 id="æ®‹ã‚Šã®å•é¡Œã¨èª²é¡Œ"><a href="#æ®‹ã‚Šã®å•é¡Œã¨èª²é¡Œ" class="headerlink" title="æ®‹ã‚Šã®å•é¡Œã¨èª²é¡Œ"></a>æ®‹ã‚Šã®å•é¡Œã¨èª²é¡Œ</h1><ul><li>å­—å¹•<ul><li>éŒ²ç”»ã—ãŸTSã¯VLCã§å­—å¹•è¦‹ã‚Œã¾ã™ã‘ã©ã€ã©ã†ã™ã‚Œã°srtã‚’æŠ½å‡ºã§ãã‚‹</li><li>assdumperä½¿ã£ãŸã‘ã©ã€ä½•ã‚‚å‡ºã¦ã“ãªã„</li><li><code>Caption2Ass.exe</code>ãªã©windowsãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ä½¿ã£ã¦ãªã„</li></ul></li><li>å¤šå›½éŸ³å£°<ul><li>ï¼’ã¤ã®å•é¡ŒãŒã‚ã£ã¦</li></ul><ol><li>ã‚¹ãƒ†ãƒ¬ã‚ªã§ä¸€ã¤ãšã¤ãƒ¢ãƒãƒ©ãƒ«éŸ³å£°ã§ï¼’ã¤å›½ã®éŸ³å£°æ”¾é€ã•ã‚ŒãŸï¼ˆNHKãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚ˆãã‚ã‚‹ï¼‰</li><li>å¤šã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã§å¤šå›½éŸ³å£°æ”¾é€ã•ã‚ŒãŸ</li></ol><ul><li><code>-filter_complex channelsplit</code> ã‹<br><code>-dual_mono_mode main</code><br>ãƒãƒƒãƒˆã«ã‚ˆãè¦‹ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã©ã£ã¡ã‚’ä½¿ã£ã¦ã‚‚ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¡ã‚ƒã†</li></ul></li></ul><p>å¿ƒå½“ãŸã‚ŠãŒã‚ã‚‹æ–¹æ•™ãˆã¦ã„ãŸã ã‘ã‚Œã°å¹¸ã„ã§ã™ï¼ m__m</p><h1 id="æœ€å¾Œ"><a href="#æœ€å¾Œ" class="headerlink" title="æœ€å¾Œ"></a>æœ€å¾Œ</h1><p>NASãŒã‚ã‚‹å ´åˆã¯5000ãã‚‰ã„ã§ç«‹ã¦ã‚‹ã®ã¯ã„ã„ã¨æ€ã„ã¾ã™ã€ä»Šå¾Œã©ã“ã§ã‚‚ãƒ†ãƒ¬ãƒ“ã‚’è¦‹ã‚Œã‚‹ã¨å¬‰ã—ã„ã€‚</p><p>è¨˜äº‹ã®ä¸­ã¯è‡ªåˆ†è‡ªèº«ã®ç‰¹é›†ã®ãƒ‹ãƒ¼ã‚ºã„ã£ã±ã„è©°ã¾ã£ã¦ã‚‹ã—ã€è¨˜äº‹ã‚’æ›¸ãã¨ãã‚‚ç«‹ã¦ãŸã‹ã‚‰ä¸€ãƒ¶æœˆãã‚‰ã„ãŒã‚ã£ã¦ã€æŠœã‘ã¦ã„ã‚‹ç®‡æ‰€ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã—ã€å¤‰ãªæ—¥æœ¬èªã‚‚ã‚ã‚‹ã‹ã‚‚ã€ã‚‚ã—ä½•ãŒä¸æ˜ç‚¹ãŒã‚ã‚Œã°ã‚³ãƒ¡ãƒ³ãƒˆã§æ›¸ã„ã¦ãã ã•ã„ãƒ¼</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><blockquote><p><a href="https://qiita.com/shotasano/items/3809b8f3e0b62d51d3c3" target="_blank" rel="noopener">Raspberry Pi 3+Chinachuã§åœ°ãƒ‡ã‚¸éŒ²ç”»ã‚µãƒ¼ãƒãƒ¼æ§‹ç¯‰</a><br><a href="https://ywnb.net/p/201612/3264" target="_blank" rel="noopener">Linuxã®è‡ªå®…ã‚µãƒ¼ãƒã‚’ãƒ†ãƒ¬ãƒ“åŒ–ã—ã¦å®¶ä¸­ã©ã“ã§ã‚‚ãƒ†ãƒ¬ãƒ“ãŒè¦‹ã‚Œã‚‹ç’°å¢ƒã‚’ä½œã‚ã†(2)</a><br><a href="https://www.jianshu.com/p/e62c2a1cd3ab" target="_blank" rel="noopener">é€šè¿‡Nginxåå‘ä»£ç†é…ç½®Basic Authenticationå®ç°kibanaçš„è®¿é—®å®‰å…¨</a><br><a href="http://arc680.hatenablog.jp/entry/2017/01/31/005135" target="_blank" rel="noopener">2017/01/30 æ™‚ç‚¹ã§ã®éŒ²ç”»ã‚µãƒ¼ãƒæ§‹ç¯‰æ‰‹é †</a></p></blockquote><p>æœ€å¾Œã¾ã§èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ãªãœNASã«&quot;&gt;&lt;a href=&quot;#ãªãœNASã«&quot; class=&quot;headerlink&quot; title=&quot;ãªãœNASã«&quot;&gt;&lt;/a&gt;ãªãœNASã«&lt;/h1&gt;&lt;p&gt;NASã‚’æŒã£ã¦ã‚‹æ–¹å¤šã„ã¨æ€ã„ã¾ã™ã—ã€NASã¯24æ™‚é–“èµ·å‹•ã—ã¦ã‚‹ã®ã§ã€æ–°ã—ã„ãƒ‡ãƒã‚¤ã‚¹è²·ã‚ãªãç¯€é›»ã§ãã¦éŒ²ç”»ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä»»ã›ã‚ã†ã€‚&lt;/p&gt;
&lt;h1 id=&quot;ä½¿ã†ã‚‚ã®&quot;&gt;&lt;a href=&quot;#ä½¿ã†ã‚‚ã®&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ã†ã‚‚ã®&quot;&gt;&lt;/a&gt;ä½¿ã†ã‚‚ã®&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;Synology NAS ä¸€å°&lt;ul&gt;
&lt;li&gt;ã‚¢ãƒ³ãƒ†ãƒŠã‚’æ¥ç¶šã—ã¦ãƒªã‚³ãƒ¼ãƒ‰ã™ã‚‹&lt;/li&gt;
&lt;li&gt;Dockerã¨Virtual Machine Managerå¯¾å¿œæ©Ÿç¨® ï¼ˆ&lt;a href=&quot;https://www.synology.com/en-us/dsm/packages/Virtualization&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;æ©Ÿç¨®ä¸€è¦§&lt;/a&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PLEX USBåœ°ä¸Šæ³¢ã‚¢ãƒ³ãƒ†ãƒŠ PX-S1UD V2.0&lt;ul&gt;
&lt;li&gt;åˆå¿ƒè€…ã«å„ªã—ã„åœ°ãƒ‡ã‚¸ã‚¢ãƒ³ãƒ†ãƒŠ&lt;/li&gt;
&lt;li&gt;é«˜ããªã„ã€4530å††&lt;/li&gt;
&lt;li&gt;1ãƒãƒ£ãƒ³ãƒãƒ«ã®ã¿ã®è¦–è´ã€éŒ²ç”»ãŒå¯èƒ½ã€è²·ã„è¶³ã—ã¦åŒæ™‚å—ä¿¡ãƒãƒ£ãƒ³ãƒãƒ«ãŒå¢—ã‚„ã›ã‚‹&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.amazon.co.jp/gp/product/B0141NFWSG/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;è²·ã†&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;SCM ICè¯»å¡å™¨&lt;ul&gt;
&lt;li&gt;B-CASã‚«ãƒ¼ãƒ‰ã®èª­ã¿å–ã‚Šç”¨ã€1000å††ãã‚‰ã„&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.amazon.co.jp/gp/product/B0085H4YZC/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;è²·ã†&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å‹ç•ªã¯åŒã˜ã§ã¯ãªã„ã‹ã‚‚ã€SCMã˜ã‚ƒãªã„ã‚„ã¤å±Šã‘ã‚‰ã‚ŒãŸã‚‰è‡ªå·±èª¿æ•´å¿…è¦&lt;/li&gt;
&lt;li&gt;SoftCASã‚‚ä½¿ãˆã‚‹ã‚‰ã—ã„ãŒã€ç§ã¯ä½¿ã‚ãªã„&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;HDD&lt;ul&gt;
&lt;li&gt;éŒ²ç”»ã—ãŸæ˜ åƒä¿å­˜ç”¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;B-CAS ã‚«ãƒ¼ãƒ‰&lt;ul&gt;
&lt;li&gt;ãƒ†ã‚¹ãƒˆã¯ãƒ†ãƒ¬ãƒ“ã‹ã‚‰å€Ÿã‚Šã‚‹ã®ã¯ã„ã„ã¨æ€ã„ã¾ã™&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒã‚¾ãƒ³ã«ã‚‚èª°ãŒå£²ã£ã¦ã‚‹ã‚‰ã—ã„ãŒã€è‡ªå·±è²¬ä»»ã§ãŠé¡˜ã„ã—ã¾ã™&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ³ãƒ†ãƒŠåˆ†æ³¢å™¨ / åˆ†é…å™¨ ã€æ¥ç¶šç·š&lt;ul&gt;
&lt;li&gt;TVã¨åŒæ™‚è¦–è´ã™ã‚‹ãŸã‚ã€‚å¿…é ˆã§ã¯ãªã„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
    
  </entry>
  
  <entry>
    <title>å¿ƒçµç›Ÿå‹ Buddy Complex åœ£åœ°å·¡ç¤¼</title>
    <link href="https://blog.xingoxu.com/2018/05/buddy-complex-seichijunrei/"/>
    <id>https://blog.xingoxu.com/2018/05/buddy-complex-seichijunrei/</id>
    <published>2018-05-13T10:13:03.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<p>é»„é‡‘å‘¨é‡Œå› ä¸ºè‡ªå·±å–œæ¬¢çš„ç”»æ‰‹å¤ªå¤ªç”»äº†æ¸¡ç€¬é’è‘‰ï¼Œæ‰€ä»¥åˆæŠŠä¸€å¹´å‰æŠ›å¼ƒçš„ Buddy Complex æ¡èµ·æ¥çœ‹äº†ä¸€ä¸‹ï¼Œæ„å¤–çš„å‘ç°è¿˜æŒºå¥½çœ‹çš„ã€‚å…¨éƒ¨çœ‹å®Œåæ˜¨å¤©åœ£åœ°å·¡ç¤¼äº†ä¸€ä¸‹ã€‚</p><p>è¿™ä¸ªåŠ¨ç”»ä¹Ÿåªæœ‰ç¬¬ä¸€é›†æ˜¯ç°å®ä¸­å‡ºç°çš„åœºæ™¯ï¼Œåè¾¹éƒ½æ˜¯æœªæ¥åœ¨å¤©ä¸Šåœ¨èˆ¹ä¸Šå¹¶æ²¡æœ‰æ—¥æœ¬çš„æ™¯è‰²ã€‚</p><h1 id="åƒè‘‰çœŒç¿’å¿—é‡å¸‚"><a href="#åƒè‘‰çœŒç¿’å¿—é‡å¸‚" class="headerlink" title="åƒè‘‰çœŒç¿’å¿—é‡å¸‚"></a>åƒè‘‰çœŒç¿’å¿—é‡å¸‚</h1><p></p><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v6ybw31j21hc0u0kjt.jpg" alt="é€šå­¦è·¯ã®ã‚«ãƒ¼ãƒ–"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v73zuchj21kw0y5kjp.jpg" alt="é€šå­¦è·¯ã®ã‚«ãƒ¼ãƒ–"></div></p><div class="clear-float img-caption">é€šå­¦è·¯ã®ã‚«ãƒ¼ãƒ–</div><p>éå¸¸é—æ†¾è‡ªè¡Œè½¦åº—å¥½åƒåœ¨ç¿»æ–°ï¼Œå»å¹´åœ¨Google Mapä¸Šè²Œä¼¼è¿˜æœ‰çš„æ ·å­</p><br /><link rel="stylesheet" type="text/css" href="/css/seichi.css"><a id="more"></a><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v74bns8j21hc0u0u15.jpg" alt="æ»‘ã‚Šå°ã®å…¬åœ’"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v73nt2sj21kw121e84.jpg" alt="æ»‘ã‚Šå°ã®å…¬åœ’"></div></p><div class="clear-float img-caption">æ»‘ã‚Šå°ã®å…¬åœ’</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v78ihtxj21hc0u07wp.jpg" alt="å°é«˜å•†åº—ä¿¡å·æ©Ÿ"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v71em5qj21kw108npd.jpg" alt="å°é«˜å•†åº—ä¿¡å·æ©Ÿ"></div></p><div class="clear-float img-caption">å°é«˜å•†åº—ä¿¡å·æ©Ÿ</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v7hhi18j21hc0u0npl.jpg" alt="å°é«˜å•†åº—"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v7dvctbj21j515de82.jpg" alt="å°é«˜å•†åº—"></div></p><div class="clear-float img-caption">å°é«˜å•†åº—</div><p>å°é«˜å•†åº— 2013 å¹´çš„æ—¶å€™å¥½åƒå› ä¸ºè½¦ç«™å‘¨å›´æ”¹é€ æ‰€ä»¥å…³åº—äº†ï¼Œå¥½é—æ†¾</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8vcvggz6j21hc0u04qx.jpg" alt="æ´¥ç”°æ²¼é§…5ç•ªç·š"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8vcrsid5j21kw0xb7wk.jpg" alt="æ´¥ç”°æ²¼é§…5ç•ªç·š"></div></p><div class="clear-float img-caption">æ´¥ç”°æ²¼é§…5ç•ªç·š</div><p>éå¸¸é—æ†¾çš„æ˜¯ï¼Œæ²¡æœ‰07:12å¾€ä¸‰é·¹çš„ç”µè½¦ä¸7:15çš„ä¸­é‡éå§‹å‘ç”µè½¦ï¼Œæ ·å¼ä¹Ÿå¹¶ä¸æ˜¯åŠ¨ç”»çš„æ ·å­ã€‚</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8vcvkz1bj21hc0u0b2h.jpg" alt="æ´¥ç”°æ²¼é§…4ç•ªç·š"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8vcpd680j21kw13fqv5.jpg" alt="æ´¥ç”°æ²¼é§…4ç•ªç·š"></div></p><div class="clear-float img-caption">æ´¥ç”°æ²¼é§…4ç•ªç·š</div><p>åˆšæ‰è¿˜åœ¨5ç•ªç·šçš„ä½†äº‹å®ä¸Šè¿™é‡Œçš„é•œå¤´ç¡®å®æ˜¯4ç•ªç·šå‘5ç•ªç·šæ–¹å‘çš„æ™¯è‰²ï¼Œä½†æ˜¯å·¦è¾¹çš„å¹¿å‘Šç‰Œå´æ˜¯5ç•ªç·šçš„å¹¿å‘Šç‰Œ</p><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8vcvkz1bj21hc0u0b2h.jpg" alt="æ´¥ç”°æ²¼é§…5ç•ªç·šã®åºƒå‘Š"></div><div class="pull-left img"></p><p><img src="https://i.loli.net/2018/05/13/5af80ae8da67b.jpg" alt="æ´¥ç”°æ²¼é§…5ç•ªç·šã®åºƒå‘Š"></div></p><div class="clear-float img-caption">æ´¥ç”°æ²¼é§…5ç•ªç·šã®åºƒå‘Š</div><h1 id="æ±äº¬éƒ½ç¬¹å¡š"><a href="#æ±äº¬éƒ½ç¬¹å¡š" class="headerlink" title="æ±äº¬éƒ½ç¬¹å¡š"></a>æ±äº¬éƒ½ç¬¹å¡š</h1><p>æ¥ä¸‹æ¥å°±æ˜¯ç”·ä¸»è¢«è¿½çš„åœºæ™¯ï¼Œè¿™é‡Œå¤§å¤šéƒ½ä¸€æ¨¡ä¸€æ ·ã€‚</p><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8ypiy343j21hc0u0e89.jpg" alt="å¯Œå£«è¦‹ä¸˜é«˜æ ¡å‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8yphw1vrj21kw17pqv9.jpg" alt="å¯Œå£«è¦‹ä¸˜é«˜æ ¡å‰"></div></p><div class="clear-float img-caption">å¯Œå£«è¦‹ä¸˜é«˜æ ¡å‰</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8ypuq4ilj21hc0u0e89.jpg" alt="é›»æ°—å±‹å‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8yprlci2j21kw0zz4qs.jpg" alt="é›»æ°—å±‹å‰"></div></p><div class="clear-float img-caption">é›»æ°—å±‹å‰</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8yq0qqmdj21hc0u0x6w.jpg" alt="æ¾å±‹å‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8ypt0zd0j21kw15cu0z.jpg" alt="æ¾å±‹å‰"></div></p><div class="clear-float img-caption">æ¾å±‹å‰</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8ypym75nj21hc0u0e89.jpg" alt="ã¿ã®ã‚“æ­¯ç§‘åŒ»é™¢å‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8ypwxe3bj21kw0vxb2b.jpg" alt="ã¿ã®ã‚“æ­¯ç§‘åŒ»é™¢å‰"></div></p><div class="clear-float img-caption">ã¿ã®ã‚“æ­¯ç§‘åŒ»é™¢å‰</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yr9psyzj21hc0u0kjt.jpg" alt="ãŠèŒ¶å±‹å‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yr9386bj21kw1634qr.jpg" alt="ãŠèŒ¶å±‹å‰"></div></p><div class="clear-float img-caption">ãŠèŒ¶å±‹å‰</div>TDK å˜æˆäº† albaï¼Œä¹Ÿæ˜¯å¾ˆä¹…ä»¥å‰å°±å˜äº†çš„è²Œä¼¼<br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yrjdl0nj21hc0u0he1.jpg" alt="æ „æ¹¯ã®è„‡"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yres6h2j21kw0x2u11.jpg" alt="æ „æ¹¯ã®è„‡"></div></p><div class="clear-float img-caption">æ „æ¹¯ã®è„‡</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yrmijcgj21hc0u0e89.jpg" alt="å›½é“20å· ä¸å‹•ç”£å±‹å‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yrlen9dj21kw16ohdw.jpg" alt="å›½é“20å· ä¸å‹•ç”£å±‹å‰"></div></p><div class="clear-float img-caption">å›½é“20å· ä¸å‹•ç”£å±‹å‰</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr9vhnh93jj21hc0u0u14.jpg" alt="å›½é“20å·"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr9vid1c5ij23402454qw.jpg" alt="å›½é“20å·"></div></p><div class="clear-float img-caption">å›½é“20å·</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yrwh3lyj21hc0u01l5.jpg" alt="å›½é“20å·"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yrqaqqvj21kw0rz7wk.jpg" alt="å›½é“20å·"></div></p><div class="clear-float img-caption">å›½é“20å·</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr9vjz73pqj21hc0u07wp.jpg" alt="å›½é“20å·"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr9vkbwy2aj22c00sab2a.jpg" alt="å›½é“20å·"></div></p><div class="clear-float img-caption">å›½é“20å·</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yu1hgwgj21hc0u0b2h.jpg" alt="ç¬¹å¡šäº¤å·®ç‚¹ DARUMAå‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8ytgi9rnj21kw16ox6s.jpg" alt="ç¬¹å¡šäº¤å·®ç‚¹ DARUMAå‰"></div></p><div class="clear-float img-caption">ç¬¹å¡šäº¤å·®ç‚¹ DARUMAå‰</div><p>ã ã‚‹ã¾ 2013 å¹´å…³åº—çš„ï¼Œä¸è¿‡å…¶ä»–çš„åœ°æ–¹éƒ½èƒ½å¯¹ä¸Š</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yucd8gxj21hc0u04qx.jpg" alt="ç¬¹å¡šäº¤å·®ç‚¹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yu0t3xrj21kw151hdv.jpg" alt="ç¬¹å¡šäº¤å·®ç‚¹"></div></p><div class="clear-float img-caption">ç¬¹å¡šäº¤å·®ç‚¹</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yuhfjedj21hc0u0e89.jpg" alt="ç¬¹å¡šäº¤å·®ç‚¹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yu5ays1j21kw13mnpe.jpg" alt="ç¬¹å¡šäº¤å·®ç‚¹"></div></p><div class="clear-float img-caption">ç¬¹å¡šäº¤å·®ç‚¹</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yuhws22j21hc0u07wp.jpg" alt="é«˜æ¶ä¸‹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yucijqmj21kw1umnph.jpg" alt="é«˜æ¶ä¸‹"></div></p><div class="clear-float img-caption">é«˜æ¶ä¸‹</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yv6tavtj21hc0u0qvc.jpg" alt="é«˜æ¶ä¸‹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yvag3s3j21kw14bx6t.jpg" alt="é«˜æ¶ä¸‹"></div></p><div class="clear-float img-caption">é«˜æ¶ä¸‹</div><p>ä»è¿™é‡Œå¼€å§‹éš¾åº¦å°±å˜å¾—å¥½é«˜ï¼Œå¤§å®¶å‡‘åˆçœ‹å§</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yvs0kenj21hc0u07wp.jpg" alt="é«˜æ¶ä¸‹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yv3hcd2j21kw23v7wj.jpg" alt="é«˜æ¶ä¸‹"></div></p><div class="clear-float img-caption">é«˜æ¶ä¸‹</div><p>é«˜æ¶ç”µè½¦æ²¡æœ‰åœ°æ–¹èƒ½æ‹ï¼Œå°±è·‘çš„ç¨å¾®è¿œäº†ä¸€ç‚¹ï¼Œä¸è¿‡è¿˜æ˜¯æ²¡èƒ½æ‹å¥½</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yvuux58j21hc0u0u14.jpg" alt="é«˜æ¶ã®é‰„é“"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yv73ha9j20o20eudri.jpg" alt="é«˜æ¶ã®é‰„é“"></div></p><div class="clear-float img-caption">é«˜æ¶ã®é‰„é“</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yvypfwhj21hc0u0he1.jpg" alt="é«˜æ¶ä¸‹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yvw28eoj21kw1kunph.jpg" alt="é«˜æ¶ä¸‹"></div></p><div class="clear-float img-caption">é«˜æ¶ä¸‹</div><p>æ­£åœ¨åˆ¶ä½œ valiancer çš„ä¸­â—¯å±‹å·¥å‚</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8ywfvp14j21hc0u0b2h.jpg" alt="é«˜æ¶ä¸‹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8ywiii13j21kw12tu10.jpg" alt="é«˜æ¶ä¸‹"></div></p><div class="clear-float img-caption">é«˜æ¶ä¸‹</div><p>å¤§å±±äº¤å·®ç‚¹è¿™é‡Œå¹¶æ²¡æœ‰å®Œå…¨æŒ‰ç…§ç°å®ä¸–ç•Œçš„å¸ƒæ™¯ç”»</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8ywsysjhj21hc0u0e89.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8ywsbvdpj21kw16oqv7.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div></p><div class="clear-float img-caption">å¤§å±±äº¤å·®ç‚¹</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yxg5vp6j21hc0u0b2h.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yx5v5kej21kw16ob2b.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div></p><div class="clear-float img-caption">å¤§å±±äº¤å·®ç‚¹</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yxhyrcfj21hc0u04qx.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yyb62p3j20n00eagv4.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div></p><div class="clear-float img-caption">å¤§å±±äº¤å·®ç‚¹</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yz7327tj21hc0u0b2h.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yz1jo80j21kw16o1l0.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div></p><div class="clear-float img-caption">å¤§å±±äº¤å·®ç‚¹</div><p>åˆ°è¿™é‡Œå°±å…¨éƒ¨ç»“æŸå•¦ï¼Œé¡ºå¸¦ä¸€æä¸»äººå…¬çš„å®¶æ˜¯çœŸå®å­˜åœ¨çš„ï¼Œä¸è¿‡å› ä¸ºç§äººæˆ¿å±‹çš„åŸå› ä¸ä¼šä¸Šä¼ åˆ°SNSç­‰åœ°æ–¹ï¼Œå¦‚æœæœ‰å…´è¶£çš„è®¿é—®çš„è¯ä¹Ÿè¯·ä¸€å®šä¸è¦ç»™å¯¹æ–¹å¸¦æ¥å›°æ‰°ã€‚</p><p>Google Mapsï¼š<a href="https://drive.google.com/open?id=1fTiF9I8exv6jFB-86H49elu6EntfaA1q&amp;usp=sharing" target="_blank" rel="noopener">https://drive.google.com/open?id=1fTiF9I8exv6jFB-86H49elu6EntfaA1q&amp;usp=sharing</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é»„é‡‘å‘¨é‡Œå› ä¸ºè‡ªå·±å–œæ¬¢çš„ç”»æ‰‹å¤ªå¤ªç”»äº†æ¸¡ç€¬é’è‘‰ï¼Œæ‰€ä»¥åˆæŠŠä¸€å¹´å‰æŠ›å¼ƒçš„ Buddy Complex æ¡èµ·æ¥çœ‹äº†ä¸€ä¸‹ï¼Œæ„å¤–çš„å‘ç°è¿˜æŒºå¥½çœ‹çš„ã€‚å…¨éƒ¨çœ‹å®Œåæ˜¨å¤©åœ£åœ°å·¡ç¤¼äº†ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªåŠ¨ç”»ä¹Ÿåªæœ‰ç¬¬ä¸€é›†æ˜¯ç°å®ä¸­å‡ºç°çš„åœºæ™¯ï¼Œåè¾¹éƒ½æ˜¯æœªæ¥åœ¨å¤©ä¸Šåœ¨èˆ¹ä¸Šå¹¶æ²¡æœ‰æ—¥æœ¬çš„æ™¯è‰²ã€‚&lt;/p&gt;
&lt;h1 id=&quot;åƒè‘‰çœŒç¿’å¿—é‡å¸‚&quot;&gt;&lt;a href=&quot;#åƒè‘‰çœŒç¿’å¿—é‡å¸‚&quot; class=&quot;headerlink&quot; title=&quot;åƒè‘‰çœŒç¿’å¿—é‡å¸‚&quot;&gt;&lt;/a&gt;åƒè‘‰çœŒç¿’å¿—é‡å¸‚&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;
&lt;div class=&quot;pull-left img&quot;&gt;

&lt;p&gt;&lt;img src=&quot;https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v6ybw31j21hc0u0kjt.jpg&quot; alt=&quot;é€šå­¦è·¯ã®ã‚«ãƒ¼ãƒ–&quot;&gt;&lt;/div&gt;&lt;div class=&quot;pull-left img&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v73zuchj21kw0y5kjp.jpg&quot; alt=&quot;é€šå­¦è·¯ã®ã‚«ãƒ¼ãƒ–&quot;&gt;&lt;/div&gt;&lt;/p&gt;
&lt;div class=&quot;clear-float img-caption&quot;&gt;é€šå­¦è·¯ã®ã‚«ãƒ¼ãƒ–&lt;/div&gt;

&lt;p&gt;éå¸¸é—æ†¾è‡ªè¡Œè½¦åº—å¥½åƒåœ¨ç¿»æ–°ï¼Œå»å¹´åœ¨Google Mapä¸Šè²Œä¼¼è¿˜æœ‰çš„æ ·å­&lt;/p&gt;
&lt;br /&gt;

&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/css/seichi.css&quot;&gt;
    
    </summary>
    
    
      <category term="ACG" scheme="https://blog.xingoxu.com/categories/ACG/"/>
    
      <category term="Travel" scheme="https://blog.xingoxu.com/categories/ACG/Travel/"/>
    
    
  </entry>
  
  <entry>
    <title>ãƒãƒ‡ã‚£ãƒ»ã‚³ãƒ³ãƒ—ãƒ¬ãƒƒã‚¯ã‚¹ è–åœ°å·¡ç¤¼</title>
    <link href="https://blog.xingoxu.com/ja/2018/05/buddy-complex-seichijunrei/"/>
    <id>https://blog.xingoxu.com/ja/2018/05/buddy-complex-seichijunrei/</id>
    <published>2018-05-13T10:13:03.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<p>GWãªã‹å¥½ããªçµµæãã•ã‚“ãŒæ¸¡ç€¬é’è‘‰ã‚’æãã¾ã—ãŸã®ã§ã€ä¸€å¹´å‰è¦‹æ”¾ã—ãŸãƒãƒ‡ã‚£ãƒ»ã‚³ãƒ³ãƒ—ãƒ¬ãƒƒã‚¯ã‚¹ã‚’ã¾ãŸè¦‹ã¦ã„ã¦ã€æ„å¤–ã¨ã„ã„ä½œå“ã¨æ€ã£ã¦ã„ã¾ã™ã€‚<br>å…¨éƒ¨è¦‹ã¾ã—ãŸæ˜¨æ—¥è–åœ°å·¡ç¤¼ã—ã¾ã—ãŸã€‚</p><p>1è©±ãƒ©ã‚¹ãƒˆã§æœªæ¥ã¸è¡Œã£ã¦ã—ã¾ã£ã¦ä»¥æ¥ã€å®Œçµç·¨ã®æœ€å¾Œã«è‡³ã£ã¦ã‚‚2014å¹´ã®æ±äº¬ã€åƒè‘‰ã®æ™¯è‰²ãŒå†åº¦ç™»å ´ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸ<br>ãªãŠæœ¬ä½œå“ã®èˆå°ã«ã¯é«˜æ ¡ã‚„é–‘é™ãªä½å®…è¡—ã‚’å«ã¿ã¾ã™ã€‚ã‚‚ã—è¨ªå•ã•ã‚Œã‚‹éš›ã¯ç¾åœ°ã®æ–¹ã¸æœ€å¤§é™é…æ…®ã—ã¦è¡Œå‹•ã•ã‚Œã‚‹ã‚ˆã†ãŠé¡˜ã„ã—ãŸãæ€ã„ã¾ã™ã€‚</p><h1 id="åƒè‘‰çœŒç¿’å¿—é‡å¸‚"><a href="#åƒè‘‰çœŒç¿’å¿—é‡å¸‚" class="headerlink" title="åƒè‘‰çœŒç¿’å¿—é‡å¸‚"></a>åƒè‘‰çœŒç¿’å¿—é‡å¸‚</h1><p></p><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v6ybw31j21hc0u0kjt.jpg" alt="é€šå­¦è·¯ã®ã‚«ãƒ¼ãƒ–"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v73zuchj21kw0y5kjp.jpg" alt="é€šå­¦è·¯ã®ã‚«ãƒ¼ãƒ–"></div></p><div class="clear-float img-caption">é€šå­¦è·¯ã®ã‚«ãƒ¼ãƒ–</div><p>æ´¥ç”°æ²¼ã‚µã‚¤ã‚¯ãƒ«ãªããªã£ãŸã€ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ä¸­ã¿ãŸã„ã§ã™ã€ã‚°ãƒ¼ã‚°ãƒ«ãƒãƒƒãƒ—ã«ã‚ˆã‚‹å»å¹´ã¾ã ã‚ã‚‹ã‚‰ã—ã„ã€æ®‹å¿µ</p><br /><link rel="stylesheet" type="text/css" href="/css/seichi.css"><a id="more"></a><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v74bns8j21hc0u0u15.jpg" alt="æ»‘ã‚Šå°ã®å…¬åœ’"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v73nt2sj21kw121e84.jpg" alt="æ»‘ã‚Šå°ã®å…¬åœ’"></div></p><div class="clear-float img-caption">æ»‘ã‚Šå°ã®å…¬åœ’</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v78ihtxj21hc0u07wp.jpg" alt="å°é«˜å•†åº—ä¿¡å·æ©Ÿ"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v71em5qj21kw108npd.jpg" alt="å°é«˜å•†åº—ä¿¡å·æ©Ÿ"></div></p><div class="clear-float img-caption">å°é«˜å•†åº—ä¿¡å·æ©Ÿ</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v7hhi18j21hc0u0npl.jpg" alt="å°é«˜å•†åº—"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v7dvctbj21j515de82.jpg" alt="å°é«˜å•†åº—"></div></p><div class="clear-float img-caption">å°é«˜å•†åº—</div><p>å°é«˜å•†åº—ã‚‚ãªããªã£ãŸã€èª¿ã¹ãŸã‚‰2013å¹´ã®æ™‚é§…å‘¨è¾ºæ”¹é€ ã®ãŸã‚ã€æœ¬å½“æ®‹å¿µ</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8vcvggz6j21hc0u04qx.jpg" alt="æ´¥ç”°æ²¼é§…5ç•ªç·š"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8vcrsid5j21kw0xb7wk.jpg" alt="æ´¥ç”°æ²¼é§…5ç•ªç·š"></div></p><div class="clear-float img-caption">æ´¥ç”°æ²¼é§…5ç•ªç·š</div><p>07:12ã®ä¸‰é·¹è¡Œãé›»è»Šã¨07:15ã®ä¸­é‡è¡Œãéæ´¥ç”°æ²¼é§…å§‹ç™ºé›»è»Šã¯ãªã„ã€ä»•æ§˜ã‚‚ã‚¢ãƒ‹ãƒ¡ã®ã‚‚ã®ã§ã¯ãªã„ã€‚</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8vcvkz1bj21hc0u0b2h.jpg" alt="æ´¥ç”°æ²¼é§…4ç•ªç·š"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8vcpd680j21kw13fqv5.jpg" alt="æ´¥ç”°æ²¼é§…4ç•ªç·š"></div></p><div class="clear-float img-caption">æ´¥ç”°æ²¼é§…4ç•ªç·š</div><p>ä½œä¸­ã§ã¯5ç•ªç·šã«ãªã£ã¦ã„ã‚‹ãŒå®Ÿéš›æã‹ã‚Œã¦ã„ãŸã®ã¯4ç•ªç·šã‹ã‚‰ã®æ™¯è‰²ã€‚ã§ã‚‚å·¦ç«¯ã«å†™ã£ã¦ã„ã‚‹ãƒ¦ã‚¶ãƒ¯ãƒ¤ã®åºƒå‘Šã¯ï¼•ç•ªç·šã®åºƒå‘Šã€‚</p><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8vcvkz1bj21hc0u0b2h.jpg" alt="æ´¥ç”°æ²¼é§…5ç•ªç·šã®åºƒå‘Š"></div><div class="pull-left img"></p><p><img src="https://i.loli.net/2018/05/13/5af80ae8da67b.jpg" alt="æ´¥ç”°æ²¼é§…5ç•ªç·šã®åºƒå‘Š"></div></p><div class="clear-float img-caption">æ´¥ç”°æ²¼é§…5ç•ªç·šã®åºƒå‘Š</div><h1 id="æ±äº¬éƒ½ç¬¹å¡š"><a href="#æ±äº¬éƒ½ç¬¹å¡š" class="headerlink" title="æ±äº¬éƒ½ç¬¹å¡š"></a>æ±äº¬éƒ½ç¬¹å¡š</h1><p>ã“ã‚Œã‹ã‚‰ã¯ä¸»äººå…¬è¿½ã‚ã‚ŒãŸæ™¯è‰²ã€‚å¤§ä½“ä¸€ç·’ã§ã™ã€‚</p><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8ypiy343j21hc0u0e89.jpg" alt="å¯Œå£«è¦‹ä¸˜é«˜æ ¡å‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8yphw1vrj21kw17pqv9.jpg" alt="å¯Œå£«è¦‹ä¸˜é«˜æ ¡å‰"></div></p><div class="clear-float img-caption">å¯Œå£«è¦‹ä¸˜é«˜æ ¡å‰</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8ypuq4ilj21hc0u0e89.jpg" alt="é›»æ°—å±‹å‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8yprlci2j21kw0zz4qs.jpg" alt="é›»æ°—å±‹å‰"></div></p><div class="clear-float img-caption">é›»æ°—å±‹å‰</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8yq0qqmdj21hc0u0x6w.jpg" alt="æ¾å±‹å‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8ypt0zd0j21kw15cu0z.jpg" alt="æ¾å±‹å‰"></div></p><div class="clear-float img-caption">æ¾å±‹å‰</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8ypym75nj21hc0u0e89.jpg" alt="ã¿ã®ã‚“æ­¯ç§‘åŒ»é™¢å‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr8ypwxe3bj21kw0vxb2b.jpg" alt="ã¿ã®ã‚“æ­¯ç§‘åŒ»é™¢å‰"></div></p><div class="clear-float img-caption">ã¿ã®ã‚“æ­¯ç§‘åŒ»é™¢å‰</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yr9psyzj21hc0u0kjt.jpg" alt="ãŠèŒ¶å±‹å‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yr9386bj21kw1634qr.jpg" alt="ãŠèŒ¶å±‹å‰"></div></p><div class="clear-float img-caption">ãŠèŒ¶å±‹å‰</div>TDKã‹ã‚‰albaã«ãªã£ã¡ã‚ƒã£ãŸã€å¤šåˆ†ã‚‚å¤§æ˜”ã®äº‹<br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yrjdl0nj21hc0u0he1.jpg" alt="æ „æ¹¯ã®è„‡"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yres6h2j21kw0x2u11.jpg" alt="æ „æ¹¯ã®è„‡"></div></p><div class="clear-float img-caption">æ „æ¹¯ã®è„‡</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yrmijcgj21hc0u0e89.jpg" alt="å›½é“20å· ä¸å‹•ç”£å±‹å‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yrlen9dj21kw16ohdw.jpg" alt="å›½é“20å· ä¸å‹•ç”£å±‹å‰"></div></p><div class="clear-float img-caption">å›½é“20å· ä¸å‹•ç”£å±‹å‰</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr9vhnh93jj21hc0u0u14.jpg" alt="å›½é“20å·"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr9vid1c5ij23402454qw.jpg" alt="å›½é“20å·"></div></p><div class="clear-float img-caption">å›½é“20å·</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yrwh3lyj21hc0u01l5.jpg" alt="å›½é“20å·"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yrqaqqvj21kw0rz7wk.jpg" alt="å›½é“20å·"></div></p><div class="clear-float img-caption">å›½é“20å·</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr9vjz73pqj21hc0u07wp.jpg" alt="å›½é“20å·"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7egy1fr9vkbwy2aj22c00sab2a.jpg" alt="å›½é“20å·"></div></p><div class="clear-float img-caption">å›½é“20å·</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yu1hgwgj21hc0u0b2h.jpg" alt="ç¬¹å¡šäº¤å·®ç‚¹ DARUMAå‰"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8ytgi9rnj21kw16ox6s.jpg" alt="ç¬¹å¡šäº¤å·®ç‚¹ DARUMAå‰"></div></p><div class="clear-float img-caption">ç¬¹å¡šäº¤å·®ç‚¹ DARUMAå‰</div><p>ã ã‚‹ã¾ 2013 å¹´é–‰åº—ã§ã™ãŒã€ä»–ã®æ–½è¨­ã¡ã‚ƒã‚“ã¨åˆã£ãŸã€‚</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yucd8gxj21hc0u04qx.jpg" alt="ç¬¹å¡šäº¤å·®ç‚¹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yu0t3xrj21kw151hdv.jpg" alt="ç¬¹å¡šäº¤å·®ç‚¹"></div></p><div class="clear-float img-caption">ç¬¹å¡šäº¤å·®ç‚¹</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yuhfjedj21hc0u0e89.jpg" alt="ç¬¹å¡šäº¤å·®ç‚¹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yu5ays1j21kw13mnpe.jpg" alt="ç¬¹å¡šäº¤å·®ç‚¹"></div></p><div class="clear-float img-caption">ç¬¹å¡šäº¤å·®ç‚¹</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yuhws22j21hc0u07wp.jpg" alt="é«˜æ¶ä¸‹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yucijqmj21kw1umnph.jpg" alt="é«˜æ¶ä¸‹"></div></p><div class="clear-float img-caption">é«˜æ¶ä¸‹</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yv6tavtj21hc0u0qvc.jpg" alt="é«˜æ¶ä¸‹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yvag3s3j21kw14bx6t.jpg" alt="é«˜æ¶ä¸‹"></div></p><div class="clear-float img-caption">é«˜æ¶ä¸‹</div><p>é›£æ˜“åº¦é«˜ããªã£ãŸ</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yvs0kenj21hc0u07wp.jpg" alt="é«˜æ¶ä¸‹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yv3hcd2j21kw23v7wj.jpg" alt="é«˜æ¶ä¸‹"></div></p><div class="clear-float img-caption">é«˜æ¶ä¸‹</div><p>é«˜æ¶ã®é›»è»Šã¯ã©ã“ã§ã‚‚å–ã‚Œãªã„ã‹ã‚‰ã€ã¡ã‚‡ã£ã¨é ã„ã‹ã‚‰å–ã£ãŸã‘ã©ã€è‰¯ããªã„ã­</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yvuux58j21hc0u0u14.jpg" alt="é«˜æ¶ã®é‰„é“"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yv73ha9j20o20eudri.jpg" alt="é«˜æ¶ã®é‰„é“"></div></p><div class="clear-float img-caption">é«˜æ¶ã®é‰„é“</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yvypfwhj21hc0u0he1.jpg" alt="é«˜æ¶ä¸‹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yvw28eoj21kw1kunph.jpg" alt="é«˜æ¶ä¸‹"></div></p><div class="clear-float img-caption">é«˜æ¶ä¸‹</div><p>ãƒ´ã‚¡ãƒªã‚¢ãƒ³ã‚µãƒ¼ã‚’ç”Ÿç”£ã—ã¦ã„ã‚‹ä¸­â—¯å±‹å·¥å ´ã§ã™</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8ywfvp14j21hc0u0b2h.jpg" alt="é«˜æ¶ä¸‹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8ywiii13j21kw12tu10.jpg" alt="é«˜æ¶ä¸‹"></div></p><div class="clear-float img-caption">é«˜æ¶ä¸‹</div><p>å¤§å±±äº¤å·®ç‚¹å‘¨ã‚Šã¯ä»Šã¾ã§ã¨é•ã£ã¦ã‚ã¾ã‚Šå®Ÿéš›ã®æ™¯è‰²ã«å¿ å®Ÿã§ã¯ãªã„æ§˜å­ã€‚çœ‹æ¿ã‚„çª“ã®å½¢ãªã©ã€ç´°ã‹ã„ãƒ‘ãƒ¼ãƒ„ãŒä¸€è‡´ã™ã‚‹ç¨‹åº¦ã§ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8ywsysjhj21hc0u0e89.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8ywsbvdpj21kw16oqv7.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div></p><div class="clear-float img-caption">å¤§å±±äº¤å·®ç‚¹</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yxg5vp6j21hc0u0b2h.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yx5v5kej21kw16ob2b.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div></p><div class="clear-float img-caption">å¤§å±±äº¤å·®ç‚¹</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yxhyrcfj21hc0u04qx.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yyb62p3j20n00eagv4.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div></p><div class="clear-float img-caption">å¤§å±±äº¤å·®ç‚¹</div><br /><div class="pull-left img"><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yz7327tj21hc0u0b2h.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div><div class="pull-left img"></p><p><img src="https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8yz1jo80j21kw16o1l0.jpg" alt="å¤§å±±äº¤å·®ç‚¹"></div></p><div class="clear-float img-caption">å¤§å±±äº¤å·®ç‚¹</div><p>ã“ã“ã¾ã§å…¨éƒ¨çµ‚ã‚ã‚Šã¾ã—ãŸã€ã¡ãªã¿ã«ä¸»äººå…¬ã®å®¶ã¯æœ¬å½“ã«å­˜åœ¨ã—ã¦ã„ã‚‹ã€å€‹äººå®…ãªã®ã§æ²è¼‰ã¯ã—ã¾ã›ã‚“ã€èˆˆå‘³ãŒã‚ã‚Œã°è¨ªã‚Œã‚‹æ™‚çµ¶å¯¾è¿·æƒ‘ã‹ã‘ãªã„ã‚ˆã†ã«</p><p>æœ€å¾Œã¾ã§ã”é–²è¦§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p><p>Google Mapsï¼š<a href="https://drive.google.com/open?id=1fTiF9I8exv6jFB-86H49elu6EntfaA1q&amp;usp=sharing" target="_blank" rel="noopener">https://drive.google.com/open?id=1fTiF9I8exv6jFB-86H49elu6EntfaA1q&amp;usp=sharing</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;GWãªã‹å¥½ããªçµµæãã•ã‚“ãŒæ¸¡ç€¬é’è‘‰ã‚’æãã¾ã—ãŸã®ã§ã€ä¸€å¹´å‰è¦‹æ”¾ã—ãŸãƒãƒ‡ã‚£ãƒ»ã‚³ãƒ³ãƒ—ãƒ¬ãƒƒã‚¯ã‚¹ã‚’ã¾ãŸè¦‹ã¦ã„ã¦ã€æ„å¤–ã¨ã„ã„ä½œå“ã¨æ€ã£ã¦ã„ã¾ã™ã€‚&lt;br&gt;å…¨éƒ¨è¦‹ã¾ã—ãŸæ˜¨æ—¥è–åœ°å·¡ç¤¼ã—ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;1è©±ãƒ©ã‚¹ãƒˆã§æœªæ¥ã¸è¡Œã£ã¦ã—ã¾ã£ã¦ä»¥æ¥ã€å®Œçµç·¨ã®æœ€å¾Œã«è‡³ã£ã¦ã‚‚2014å¹´ã®æ±äº¬ã€åƒè‘‰ã®æ™¯è‰²ãŒå†åº¦ç™»å ´ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸ&lt;br&gt;ãªãŠæœ¬ä½œå“ã®èˆå°ã«ã¯é«˜æ ¡ã‚„é–‘é™ãªä½å®…è¡—ã‚’å«ã¿ã¾ã™ã€‚ã‚‚ã—è¨ªå•ã•ã‚Œã‚‹éš›ã¯ç¾åœ°ã®æ–¹ã¸æœ€å¤§é™é…æ…®ã—ã¦è¡Œå‹•ã•ã‚Œã‚‹ã‚ˆã†ãŠé¡˜ã„ã—ãŸãæ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h1 id=&quot;åƒè‘‰çœŒç¿’å¿—é‡å¸‚&quot;&gt;&lt;a href=&quot;#åƒè‘‰çœŒç¿’å¿—é‡å¸‚&quot; class=&quot;headerlink&quot; title=&quot;åƒè‘‰çœŒç¿’å¿—é‡å¸‚&quot;&gt;&lt;/a&gt;åƒè‘‰çœŒç¿’å¿—é‡å¸‚&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;
&lt;div class=&quot;pull-left img&quot;&gt;

&lt;p&gt;&lt;img src=&quot;https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v6ybw31j21hc0u0kjt.jpg&quot; alt=&quot;é€šå­¦è·¯ã®ã‚«ãƒ¼ãƒ–&quot;&gt;&lt;/div&gt;&lt;div class=&quot;pull-left img&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://static.xingoxu.com/blog/sinaimg/6b8bbe7ely1fr8v73zuchj21kw0y5kjp.jpg&quot; alt=&quot;é€šå­¦è·¯ã®ã‚«ãƒ¼ãƒ–&quot;&gt;&lt;/div&gt;&lt;/p&gt;
&lt;div class=&quot;clear-float img-caption&quot;&gt;é€šå­¦è·¯ã®ã‚«ãƒ¼ãƒ–&lt;/div&gt;

&lt;p&gt;æ´¥ç”°æ²¼ã‚µã‚¤ã‚¯ãƒ«ãªããªã£ãŸã€ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ä¸­ã¿ãŸã„ã§ã™ã€ã‚°ãƒ¼ã‚°ãƒ«ãƒãƒƒãƒ—ã«ã‚ˆã‚‹å»å¹´ã¾ã ã‚ã‚‹ã‚‰ã—ã„ã€æ®‹å¿µ&lt;/p&gt;
&lt;br /&gt;

&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/css/seichi.css&quot;&gt;
    
    </summary>
    
    
      <category term="ACG" scheme="https://blog.xingoxu.com/categories/ACG/"/>
    
      <category term="Travel" scheme="https://blog.xingoxu.com/categories/ACG/Travel/"/>
    
    
  </entry>
  
  <entry>
    <title>æ¨ç‰¹ Account Activity API ä½¿ç”¨ä½“éªŒ</title>
    <link href="https://blog.xingoxu.com/2018/04/twitter-account-activity-api/"/>
    <id>https://blog.xingoxu.com/2018/04/twitter-account-activity-api/</id>
    <published>2018-04-30T12:59:43.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<p>å‰å‡ å¤©ä½¿ç”¨äº†ä¸€ä¸‹æ¨ç‰¹çš„ Account Activity APIï¼Œè¿™ä¸ª API æ”¯æŒæ³¨å†Œä¸€ä¸ª webhookï¼Œç”¨äºæ¥å—æˆæƒè´¦æˆ·çš„å®æ—¶æ´»åŠ¨ï¼ˆæ¨ç‰¹æ–‡ï¼Œäº‹ä»¶ï¼Œè®¾ç½®ï¼‰ã€‚</p><p>åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>æ¨ç‰¹å†…å®¹</li><li>at æé†’</li><li>å›å¤</li><li>è½¬å‘</li><li>å¸¦è¯„è®ºè½¬å‘</li><li>ç‚¹èµ</li><li>å‘å‡ºçš„ç§ä¿¡å’Œæ¥æ”¶åˆ°çš„ç§ä¿¡</li><li>å…³æ³¨</li><li>æ‹‰é»‘</li><li>å±è”½</li><li>é˜…è¯»å›æ‰§</li></ul><p>åœ¨è¯•ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œç¢°åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œåšä¸€ä¸ªæ•´ç†ã€‚</p><a id="more"></a><h1 id="åº”ç”¨ä¸­å¿ƒåˆ›å»ºåº”ç”¨"><a href="#åº”ç”¨ä¸­å¿ƒåˆ›å»ºåº”ç”¨" class="headerlink" title="åº”ç”¨ä¸­å¿ƒåˆ›å»ºåº”ç”¨"></a>åº”ç”¨ä¸­å¿ƒåˆ›å»ºåº”ç”¨</h1><p>é¦–å…ˆéœ€è¦åˆ° <a href="https://apps.twitter.com/" target="_blank" rel="noopener">https://apps.twitter.com/</a> åœ¨è¿™é‡ŒæŒ‰æç¤ºåˆ›å»ºåº”ç”¨ï¼Œè·å¾—åº”ç”¨çš„ key ä¸ Secretã€‚</p><h1 id="ç”³è¯·-Account-Activity-API-è¯•ç”¨æƒé™"><a href="#ç”³è¯·-Account-Activity-API-è¯•ç”¨æƒé™" class="headerlink" title="ç”³è¯· Account Activity API è¯•ç”¨æƒé™"></a>ç”³è¯· Account Activity API è¯•ç”¨æƒé™</h1><p><a href="https://developer.twitter.com/en/apply" target="_blank" rel="noopener">https://developer.twitter.com/en/apply</a><br>åˆ°è¿™é‡ŒæŒ‰ç…§æç¤ºç”³è¯·APIæƒé™ï¼Œå¹¶é™„ä¸Š app IDï¼ˆapp IDç›¸å…³è§£é‡Šï¼š<a href="https://developer.twitter.com/en/docs/accounts-and-users/subscribe-account-activity/overview" target="_blank" rel="noopener">https://developer.twitter.com/en/docs/accounts-and-users/subscribe-account-activity/overview</a> ï¼‰</p><p>ç”³è¯·å®Œæˆåä¼šæ”¶åˆ°é‚®ä»¶<br><img src="https://i.loli.net/2018/04/30/5ae7000843f53.png" alt="ç”³è¯·æˆåŠŸå›æ‰§"></p><h1 id="æ³¨å†Œ-webhook"><a href="#æ³¨å†Œ-webhook" class="headerlink" title="æ³¨å†Œ webhook"></a>æ³¨å†Œ webhook</h1><h2 id="CRC-æµ‹è¯•"><a href="#CRC-æµ‹è¯•" class="headerlink" title="CRC æµ‹è¯•"></a>CRC æµ‹è¯•</h2><p>webhook çš„åœ°å€è¦æ±‚é€šè¿‡ CRC æµ‹è¯•ï¼Œè¯¦ç»†è¦æ±‚å¯ä»¥æŸ¥çœ‹<br><a href="https://developer.twitter.com/en/docs/accounts-and-users/subscribe-account-activity/guides/securing-webhooks" target="_blank" rel="noopener">https://developer.twitter.com/en/docs/accounts-and-users/subscribe-account-activity/guides/securing-webhooks</a></p><p>å†™äº†ä¸€ä¸ªè‡ªå·±çš„demoï¼Œå…³äºCRCæµ‹è¯•çš„ä»£ç ï¼š<br><a href="https://github.com/xingoxu/twitter-like-downloader/blob/master/routes/twitter.js#L13-L23" target="_blank" rel="noopener">https://github.com/xingoxu/twitter-like-downloader/blob/master/routes/twitter.js#L13-L23</a></p><h2 id="é€šè¿‡-postman-å‘é€è¯·æ±‚æ³¨å†Œ-webhook"><a href="#é€šè¿‡-postman-å‘é€è¯·æ±‚æ³¨å†Œ-webhook" class="headerlink" title="é€šè¿‡ postman å‘é€è¯·æ±‚æ³¨å†Œ webhook"></a>é€šè¿‡ postman å‘é€è¯·æ±‚æ³¨å†Œ webhook</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">POST:</span><br><span class="line">https:&#x2F;&#x2F;api.twitter.com&#x2F;1.1&#x2F;account_activity&#x2F;all&#x2F;env-beta&#x2F;webhooks.json?url&#x3D;$&#123;ä½ çš„webhookåœ°å€&#125;</span><br><span class="line"></span><br><span class="line">Header:</span><br><span class="line">Authorization: Bearer TOKEN</span><br></pre></td></tr></table></figure><p><code>Bearer TOKEN</code> å¯ä»¥é€šè¿‡<code>https://api.twitter.com/oauth2/token</code>æ¥å£è·å¾—</p><p>æ³¨æ„</p><ul><li>webhook åœ°å€ éœ€è¦httpsï¼Œä¸”åªèƒ½ä½¿ç”¨443ç«¯å£ï¼ˆ<a href="https://twittercommunity.com/t/how-to-register-a-webhook-url-in-twitter/86096/36" target="_blank" rel="noopener">https://twittercommunity.com/t/how-to-register-a-webhook-url-in-twitter/86096/36</a> ï¼‰</li></ul><h2 id="é€šè¿‡-postman-å‘é€è¯·æ±‚åœ¨-subscription-é‡Œæ³¨å†Œ-webhook"><a href="#é€šè¿‡-postman-å‘é€è¯·æ±‚åœ¨-subscription-é‡Œæ³¨å†Œ-webhook" class="headerlink" title="é€šè¿‡ postman å‘é€è¯·æ±‚åœ¨ subscription é‡Œæ³¨å†Œ webhook"></a>é€šè¿‡ postman å‘é€è¯·æ±‚åœ¨ subscription é‡Œæ³¨å†Œ webhook</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GET:</span><br><span class="line">https:&#x2F;&#x2F;api.twitter.com&#x2F;1.1&#x2F;account_activity&#x2F;all&#x2F;env-beta&#x2F;webhooks.json</span><br><span class="line"></span><br><span class="line">Header:</span><br><span class="line">Authorization: Bearer TOKEN</span><br></pre></td></tr></table></figure><p>è·å–åˆ°åˆšæ‰çš„ webhook id</p><p>ä¹‹å</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">POST:</span><br><span class="line">https:&#x2F;&#x2F;api.twitter.com&#x2F;1.1&#x2F;account_activity&#x2F;all&#x2F;env-beta&#x2F;subscriptions.json</span><br><span class="line"></span><br><span class="line">Header:</span><br><span class="line">Authorization: OAuth 1.0</span><br><span class="line"></span><br><span class="line">Body:</span><br><span class="line">webhook_id: åˆšæ‰çš„ webhook id</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œéœ€è¦ç”¨OAuth 1.0ï¼ˆç”¨äºè¯†åˆ«æ³¨å†Œçš„user idï¼‰</p><p>æ³¨å†Œå®Œæˆåä¸ä¼šæœ‰ä»»ä½•è¿”å›ï¼Œ<code>HTTP Code: 204 No Conent</code></p><p>æ³¨å†Œå®Œæˆåå¯ä»¥é€šè¿‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GETï¼šhttps:&#x2F;&#x2F;api.twitter.com&#x2F;1.1&#x2F;account_activity&#x2F;all&#x2F;env-beta&#x2F;subscriptions&#x2F;list.json</span><br><span class="line"></span><br><span class="line">Header:</span><br><span class="line">Authorization: Bearer TOKEN</span><br></pre></td></tr></table></figure><p>å¯ä»¥æ”¶åˆ°</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"environment"</span>: <span class="string">"env-beta"</span>,</span><br><span class="line">    <span class="attr">"application_id"</span>: <span class="string">"12345678"</span>,</span><br><span class="line">    <span class="attr">"subscriptions"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"user_id"</span>: <span class="string">"12345678"</span>  <span class="comment">// &lt;- è‡ªå·±çš„user_id</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><p>éšä¾¿å¯¹ä¸€æ¡æ¨ç‰¹ç‚¹èµ</p><p>å¯ä»¥æ”¶åˆ°æ¨ç‰¹æ¥çš„ webhook objectã€‚</p><p>è‡ªå·±ç”¨è¿™ä¸ªå†™äº†ä¸€ä¸ªæ¨ç‰¹çš„botï¼Œå¯ä»¥ä½œä¸ºå‚è€ƒã€‚<br><a href="https://github.com/xingoxu/twitter-like-downloader" target="_blank" rel="noopener">https://github.com/xingoxu/twitter-like-downloader</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰å‡ å¤©ä½¿ç”¨äº†ä¸€ä¸‹æ¨ç‰¹çš„ Account Activity APIï¼Œè¿™ä¸ª API æ”¯æŒæ³¨å†Œä¸€ä¸ª webhookï¼Œç”¨äºæ¥å—æˆæƒè´¦æˆ·çš„å®æ—¶æ´»åŠ¨ï¼ˆæ¨ç‰¹æ–‡ï¼Œäº‹ä»¶ï¼Œè®¾ç½®ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¨ç‰¹å†…å®¹&lt;/li&gt;
&lt;li&gt;at æé†’&lt;/li&gt;
&lt;li&gt;å›å¤&lt;/li&gt;
&lt;li&gt;è½¬å‘&lt;/li&gt;
&lt;li&gt;å¸¦è¯„è®ºè½¬å‘&lt;/li&gt;
&lt;li&gt;ç‚¹èµ&lt;/li&gt;
&lt;li&gt;å‘å‡ºçš„ç§ä¿¡å’Œæ¥æ”¶åˆ°çš„ç§ä¿¡&lt;/li&gt;
&lt;li&gt;å…³æ³¨&lt;/li&gt;
&lt;li&gt;æ‹‰é»‘&lt;/li&gt;
&lt;li&gt;å±è”½&lt;/li&gt;
&lt;li&gt;é˜…è¯»å›æ‰§&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨è¯•ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œç¢°åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œåšä¸€ä¸ªæ•´ç†ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
    
  </entry>
  
  <entry>
    <title>ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼ã® Account Activity API ä½¿ã£ã¦ã¿ãŸ</title>
    <link href="https://blog.xingoxu.com/ja/2018/04/twitter-account-activity-api/"/>
    <id>https://blog.xingoxu.com/ja/2018/04/twitter-account-activity-api/</id>
    <published>2018-04-30T12:59:43.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<p>å‰æ—¥ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼ã®Account Activity APIã‚’ä½¿ã£ã¦ã¿ã¾ã—ãŸã€ã“ã® API ãŒä¸€ã¤ webhook ç™»éŒ²ãŒå¯èƒ½ã§ã™ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒªã‚¢ãƒ«æ´»å‹•ï¼ˆãƒ„ã‚£ãƒ¼ãƒˆã€é€šçŸ¥ã€è¨­å®šï¼‰ã‚’å—ä¿¡ã—ã¾ã™ã€‚</p><p>ä»¥ä¸‹ã®ã‚‚ã®ãŒå«ã¾ã‚Œã¾ã™ï¼š</p><ul><li>ãƒ„ã‚£ãƒ¼ãƒˆ</li><li>at é€šçŸ¥</li><li>ãƒªãƒ—ãƒ©ã‚¤</li><li>ãƒªãƒ„ã‚¤ãƒ¼ãƒˆ</li><li>å¼•ç”¨ãƒªãƒ„ã‚¤ãƒ¼ãƒˆ</li><li>ã„ã„ã­</li><li>ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ãã®å—ä¿¡</li><li>ãƒ•ã‚©ãƒ­ãƒ¼</li><li>ãƒ–ãƒ­ãƒƒã‚¯</li><li>ãƒŸãƒ¥ãƒ¼ãƒˆ</li></ul><p>ä½¿ã†æ™‚å®Ÿéš›èµ·ã“ã£ãŸå•é¡Œã‚’æ›¸ãã¾ã—ãŸã€‚</p><a id="more"></a><h1 id="ã‚¢ãƒ—ãƒªã‚’ä½œã‚Šã¾ã™"><a href="#ã‚¢ãƒ—ãƒªã‚’ä½œã‚Šã¾ã™" class="headerlink" title="ã‚¢ãƒ—ãƒªã‚’ä½œã‚Šã¾ã™"></a>ã‚¢ãƒ—ãƒªã‚’ä½œã‚Šã¾ã™</h1><p>ã¾ãšã“ã“ã§ <a href="https://apps.twitter.com/" target="_blank" rel="noopener">https://apps.twitter.com/</a> ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã«å¾“ã£ã¦ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã€ã‚¢ãƒ—ãƒªã® key ã¨ secret ã‚’å–å¾—ã—ã¾ã™ã€‚</p><h1 id="Account-Activity-API-ã‚’ç”³è«‹ã—ã¾ã™"><a href="#Account-Activity-API-ã‚’ç”³è«‹ã—ã¾ã™" class="headerlink" title="Account Activity API ã‚’ç”³è«‹ã—ã¾ã™"></a>Account Activity API ã‚’ç”³è«‹ã—ã¾ã™</h1><p><a href="https://developer.twitter.com/en/apply" target="_blank" rel="noopener">https://developer.twitter.com/en/apply</a><br>ã“ã“ã§æ¨©é™ã‚’ç”³è«‹ã—ã¾ã™ï¼Œapp ID ã®æ·»ä»˜ã‚’å¿˜ã‚Œãšã«ï¼ˆapp ID ã«ã¤ã„ã¦ï¼š<a href="https://developer.twitter.com/en/docs/accounts-and-users/subscribe-account-activity/overview" target="_blank" rel="noopener">https://developer.twitter.com/en/docs/accounts-and-users/subscribe-account-activity/overview</a> ï¼‰</p><p>ç”³è«‹æˆåŠŸã—ãŸã‚‰ãƒ¡ãƒ¼ãƒ«ãŒæ¥ã¾ã™<br><img src="https://i.loli.net/2018/04/30/5ae7000843f53.png" alt="ç”³è«‹æˆåŠŸã®ãƒ¡ãƒ¼ãƒ«"></p><h1 id="webhook-URL-ã‚’ç™»éŒ²"><a href="#webhook-URL-ã‚’ç™»éŒ²" class="headerlink" title="webhook URL ã‚’ç™»éŒ²"></a>webhook URL ã‚’ç™»éŒ²</h1><h2 id="CRC-ãƒ†ã‚¹ãƒˆ"><a href="#CRC-ãƒ†ã‚¹ãƒˆ" class="headerlink" title="CRC ãƒ†ã‚¹ãƒˆ"></a>CRC ãƒ†ã‚¹ãƒˆ</h2><p>webhook ã¯ CRC ãƒ†ã‚¹ãƒˆã‚’åˆæ ¼ã—ãªã‘ã‚Œã°ç™»éŒ²ã§ããªã„ã€å…·ä½“çš„ãªè¦æœ›ã¯ã“ã“ã«æ›¸ã„ã¦ã„ã‚‹ -&gt;<br><a href="https://developer.twitter.com/en/docs/accounts-and-users/subscribe-account-activity/guides/securing-webhooks" target="_blank" rel="noopener">https://developer.twitter.com/en/docs/accounts-and-users/subscribe-account-activity/guides/securing-webhooks</a></p><p>è‡ªåˆ†ã‚‚Node.jsã®demoã‚’æ›¸ãã¾ã—ãŸã€ä¸€å¿œå‚è€ƒã«ãªã‚Œã°ï¼š<br><a href="https://github.com/xingoxu/twitter-like-downloader/blob/master/routes/twitter.js#L13-L23" target="_blank" rel="noopener">https://github.com/xingoxu/twitter-like-downloader/blob/master/routes/twitter.js#L13-L23</a></p><h2 id="postman-ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã£ã¦-webhook-URL-ã‚’ç™»éŒ²ã—ã¾ã™"><a href="#postman-ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã£ã¦-webhook-URL-ã‚’ç™»éŒ²ã—ã¾ã™" class="headerlink" title="postman ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã£ã¦ webhook URL ã‚’ç™»éŒ²ã—ã¾ã™"></a>postman ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã£ã¦ webhook URL ã‚’ç™»éŒ²ã—ã¾ã™</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">POST:</span><br><span class="line">https:&#x2F;&#x2F;api.twitter.com&#x2F;1.1&#x2F;account_activity&#x2F;all&#x2F;env-beta&#x2F;webhooks.json?url&#x3D;$&#123;ã‚ãªãŸã®webhook URL&#125;</span><br><span class="line"></span><br><span class="line">Header:</span><br><span class="line">Authorization: Bearer TOKEN</span><br></pre></td></tr></table></figure><p><code>Bearer TOKEN</code> ã¯<code>https://api.twitter.com/oauth2/token</code>ã§å–å¾—ã§ãã¾ã™ã€‚</p><p>æ³¨æ„</p><ul><li>webhook URL ã¯ https ã¨ 443 ãƒãƒ¼ãƒˆã®ã¿ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ï¼ˆ<a href="https://twittercommunity.com/t/how-to-register-a-webhook-url-in-twitter/86096/36" target="_blank" rel="noopener">https://twittercommunity.com/t/how-to-register-a-webhook-url-in-twitter/86096/36</a> ï¼‰</li></ul><h2 id="postman-ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã£ã¦-subscription-ã«-webhook-ã‚’ç™»éŒ²ã—ã¾ã™"><a href="#postman-ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã£ã¦-subscription-ã«-webhook-ã‚’ç™»éŒ²ã—ã¾ã™" class="headerlink" title="postman ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã£ã¦ subscription ã« webhook ã‚’ç™»éŒ²ã—ã¾ã™"></a>postman ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã£ã¦ subscription ã« webhook ã‚’ç™»éŒ²ã—ã¾ã™</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GET:</span><br><span class="line">https:&#x2F;&#x2F;api.twitter.com&#x2F;1.1&#x2F;account_activity&#x2F;all&#x2F;env-beta&#x2F;webhooks.json</span><br><span class="line"></span><br><span class="line">Header:</span><br><span class="line">Authorization: Bearer TOKEN</span><br></pre></td></tr></table></figure><p>ã•ã£ãã® webhook ã® id ã‚’å–ã£ã¦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">POST:</span><br><span class="line">https:&#x2F;&#x2F;api.twitter.com&#x2F;1.1&#x2F;account_activity&#x2F;all&#x2F;env-beta&#x2F;subscriptions.json</span><br><span class="line"></span><br><span class="line">Header:</span><br><span class="line">Authorization: OAuth 1.0</span><br><span class="line"></span><br><span class="line">Body:</span><br><span class="line">webhook_id: ã•ã£ãã® webhook ã® id</span><br></pre></td></tr></table></figure><p>æ³¨æ„ã™ã¹ãã¨ã“ã‚ï¼šã“ã“Authorization ã¯ OAuth 1.0ï¼ˆuser id èªè­˜ãŸã‚ï¼‰</p><p>ãƒªã‚¹ãƒãƒ³ã‚¹å†…å®¹ã¯ãªã„ã€<code>HTTP Code: 204 No Conent</code></p><p>ç™»éŒ²ã—ãŸã‚‰ã“ã“ã«è¦‹ãˆã¾ã™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GETï¼šhttps:&#x2F;&#x2F;api.twitter.com&#x2F;1.1&#x2F;account_activity&#x2F;all&#x2F;env-beta&#x2F;subscriptions&#x2F;list.json</span><br><span class="line"></span><br><span class="line">Header:</span><br><span class="line">Authorization: Bearer TOKEN</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã‚’å—ã‘ã‚Œã¾ã™</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"environment"</span>: <span class="string">"env-beta"</span>,</span><br><span class="line">    <span class="attr">"application_id"</span>: <span class="string">"12345678"</span>,</span><br><span class="line">    <span class="attr">"subscriptions"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"user_id"</span>: <span class="string">"12345678"</span>  <span class="comment">// &lt;- è‡ªåˆ†ã®user_id</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ãƒ†ã‚¹ãƒˆ"><a href="#ãƒ†ã‚¹ãƒˆ" class="headerlink" title="ãƒ†ã‚¹ãƒˆ"></a>ãƒ†ã‚¹ãƒˆ</h1><p>å¥½ããªãƒ„ã‚¤ãƒ¼ãƒˆã‚’ã„ã„ã­ã™ã‚‹ã¨</p><p>ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ webhook object å—ã‘ã‚Œã¾ã™ã€‚</p><p>æœ€å¾Œã€Account Activity APIä½¿ã£ã¦ã‚‹è‡ªå®¶ç”¨ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼Botã§ã™ã€å‚è€ƒã«ãªã‚Œã°ãœã²<br><a href="https://github.com/xingoxu/twitter-like-downloader" target="_blank" rel="noopener">https://github.com/xingoxu/twitter-like-downloader</a></p><p>æœ€å¾Œã¾ã§é–²è¦§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰æ—¥ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼ã®Account Activity APIã‚’ä½¿ã£ã¦ã¿ã¾ã—ãŸã€ã“ã® API ãŒä¸€ã¤ webhook ç™»éŒ²ãŒå¯èƒ½ã§ã™ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒªã‚¢ãƒ«æ´»å‹•ï¼ˆãƒ„ã‚£ãƒ¼ãƒˆã€é€šçŸ¥ã€è¨­å®šï¼‰ã‚’å—ä¿¡ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹ã®ã‚‚ã®ãŒå«ã¾ã‚Œã¾ã™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ãƒ„ã‚£ãƒ¼ãƒˆ&lt;/li&gt;
&lt;li&gt;at é€šçŸ¥&lt;/li&gt;
&lt;li&gt;ãƒªãƒ—ãƒ©ã‚¤&lt;/li&gt;
&lt;li&gt;ãƒªãƒ„ã‚¤ãƒ¼ãƒˆ&lt;/li&gt;
&lt;li&gt;å¼•ç”¨ãƒªãƒ„ã‚¤ãƒ¼ãƒˆ&lt;/li&gt;
&lt;li&gt;ã„ã„ã­&lt;/li&gt;
&lt;li&gt;ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ãã®å—ä¿¡&lt;/li&gt;
&lt;li&gt;ãƒ•ã‚©ãƒ­ãƒ¼&lt;/li&gt;
&lt;li&gt;ãƒ–ãƒ­ãƒƒã‚¯&lt;/li&gt;
&lt;li&gt;ãƒŸãƒ¥ãƒ¼ãƒˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ã†æ™‚å®Ÿéš›èµ·ã“ã£ãŸå•é¡Œã‚’æ›¸ãã¾ã—ãŸã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
    
  </entry>
  
  <entry>
    <title>å†è§ 2017</title>
    <link href="https://blog.xingoxu.com/2018/04/2017-end/"/>
    <id>https://blog.xingoxu.com/2018/04/2017-end/</id>
    <published>2018-04-10T04:15:49.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<p>å¿™å®Œè¿™ä¸€é˜µï¼Œå›è¿‡ç¥æ¥å·²ç»æ˜¯2018å¹´çš„4æœˆäº†ï¼Œæ‰æœ‰ç©ºå¼€å§‹è¡¥ä¸€äº›ä¹‹å‰æ²¡æœ‰å¹²å®Œçš„äº‹æƒ…ï¼Œæ¯”å¦‚å†™è¿™ä¸€ç¯‡2017å¹´çš„æ€»ç»“ã€‚</p><p>ä»”ç»†æƒ³æƒ³è¿˜çœŸçš„æ˜¯2017å¹´ç»å†äº†å¤ªå¤šå¤ªå¤šäº‹æƒ…ï¼Œå¾ˆå¤šäº‹æƒ…ç”šè‡³è‡ªå·±éƒ½æ²¡æœ‰æƒ³åˆ°ï¼Œæ„Ÿè§‰è‡ªå·±éå¸¸å¹¸è¿ï¼Œæ€»çš„æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¼€å¿ƒçš„ä¸€å¹´ã€‚</p><a id="more"></a><p>æŒ‰æ—¶é—´é¡ºåº</p><h1 id="è·³æ§½åˆ°é¥¿äº†å¦ˆ"><a href="#è·³æ§½åˆ°é¥¿äº†å¦ˆ" class="headerlink" title="è·³æ§½åˆ°é¥¿äº†å¦ˆ"></a>è·³æ§½åˆ°é¥¿äº†å¦ˆ</h1><p>æ€ä¹ˆè¯´ï¼Œå¹´å‰å°±æœ‰æƒ³è·³æ§½çš„æƒ³æ³•ï¼Œå…¶å®åœ¨èŒè´­å¹²ç€ä¹ŸæŒºå¥½çš„ï¼Œè€æ¿ä¹Ÿæ‰¿è¯ºè¯´æ¯•ä¸šä¹‹åçš„å·¥èµ„å¤šå°‘å¤šå°‘ï¼Œä»·æ ¼å˜›ä¹Ÿä¸ä½ï¼ˆè·Ÿé¥¿äº†å¦ˆå·®ä¸å¤šï¼‰ï¼Œä½†å§‹ç»ˆæ˜¯æœ‰é‚£ä¹ˆç‚¹æ²¡æœ‰å®‰å…¨æ„Ÿï¼Œç»ˆäºé€®åˆ°ä¸ªæœºä¼šå»äº†é¥¿äº†å¦ˆé¢è¯•ï¼Œè™½ç„¶è‡ªå·±æ˜¯ä¸ªèœé¸¡ï¼Œä¸è¿‡é¢è¯•çš„é—®é¢˜è¿˜ç®—æ˜¯éƒ½è‡ªæˆ‘æ„Ÿè§‰æŒºå¥½çš„ç­”äº†ä¸‹æ¥ï¼Œäºæ˜¯å°±å¾ˆé¡ºåˆ©çš„è·³æ§½åˆ°äº†é¥¿äº†å¦ˆã€‚</p><p>ä¹Ÿç®—èµ°åˆ°äº†ç®—æ˜¯ä¸€ä¸ªä¸å¤ªå®¹æ˜“å€’é—­çš„å…¬å¸ï¼Œä½“éªŒäº†å„ç§å¤§å…¬å¸çš„æµç¨‹ï¼Œæ•ˆç‡ä¹ŸæŒºé«˜çš„ï¼Œæ—¶é—´å˜›ä¹Ÿè¿˜è¡Œè‡ªå·±æ‰‹è„šæ¯”è¾ƒå¿«æ‰€ä»¥åŸºæœ¬ä¼šæœ‰ä¸€å®šçš„ç©ºé—²æ—¶é—´ï¼Œä¸ç®—å¾ˆå¤šï¼Œä½†å¯ä»¥ã€‚</p><h1 id="å»æ—¥æœ¬ç©"><a href="#å»æ—¥æœ¬ç©" class="headerlink" title="å»æ—¥æœ¬ç©"></a>å»æ—¥æœ¬ç©</h1><p>åˆšè¿›é¥¿äº†å¦ˆä¸ä¹…ï¼Œå°±è¦æ”¶æ‹¾ä¸œè¥¿å‡†å¤‡æ”»ç•¥è‡ªå·±ä¸€ä¸ªäººå‡ºå»ç©å•¦ã€‚åŠå¹´å‰çš„æ—¢å®šå®‰æ’è·Ÿè·³æ§½ä¹Ÿæ— å…³ï¼Œä¸è¿‡å½“æ—¶æƒ³ç€4æœˆåº•5æœˆåˆçš„æ—¶é—´æ®µæ€ä¹ˆè¯´ä¹Ÿå¾—ä¸‰æ–¹å•Šæ¯•ä¸šçš„å‡†å¤‡éƒ½å·®ä¸å¤šäº†å§ï¼Œé‚£åˆæ˜¯è°çŸ¥é“è¿™ä¸ªç‚¹äº†æˆ‘è‡ªå·±å±…ç„¶è¿˜ä¼šè·³æ§½ï¼ŒçœŸæ˜¯ã€‚ã€‚ã€‚</p><p>å˜›æ“ç€è‡ªå·±é›¶é›¶ç¢ç¢å¹³å‡åå’Œç‰‡å‡åï¼Œä¹Ÿæ²¡è·Ÿå¤ªå¤šäººè¯´è¯ï¼Œç°åœ¨æƒ³èµ·æ¥æˆ‘å½“æ—¶åˆ°åº•æ˜¯æ€ä¹ˆæ—…æ¸¸çš„éƒ½å®Œå…¨ä¸æ€ä¹ˆä¼šè¯´æ—¥è¯­ï¼Œé¡ºé¡ºåˆ©åˆ©çš„ç©äº†10å¤©ï¼Œè‚¥è‚ å¿«ä¹ï¼Œå˜›é’±ä¹Ÿç”¨äº†ä¸å°‘ï¼Œå·®ä¸å¤šä¸€å…±ä¸¤ä¸‡å·¦å³å§ï¼Ÿ</p><p><a href="https://photos.app.goo.gl/Gh0Qox7rmOz3rRqz2" target="_blank" rel="noopener">Google Photo</a></p><h1 id="æ¯•ä¸š"><a href="#æ¯•ä¸š" class="headerlink" title="æ¯•ä¸š"></a>æ¯•ä¸š</h1><div class="IMGalignRight" style="width: 330px;"><p><img src="https://i.loli.net/2018/04/10/5acc59ab88143.jpg" alt="æ¯•ä¸šå•¦"></div></p><p>ä¸€éœçœ¼æ¯•ä¸šäº†ï¼Œå½“æ—¶å¥½åƒæ²¡æœ‰ä»€ä¹ˆæ„Ÿè§‰ï¼Œå–äº†æ¯•ä¸šè¯ä¹¦ï¼Œå­¦ä½è¯ä¹¦ï¼Œå›å®¶å°±å¾€å…¬å¸çš„ç³»ç»Ÿä¸Šä¼ è¡¨ç¤º7.1æ—¥èµ·å°±å¯ä»¥æ‹¿æ­£å¼å·¥èµ„äº†ï¼Œåªæœ‰è¿™ç‚¹æ‰è®©æˆ‘æ„Ÿè§‰åˆ°äº†æ¯•ä¸šã€‚ä¸è¿‡ç°åœ¨æƒ³æƒ³ï¼Œæˆ‘å±…ç„¶å·²ç»æ˜¯ä¸ªç¤¾ä¼šäººäº†ï¼Œè€Œä¸”å·²ç»å®ä¹ +ä¸Šç­ä¸Šäº†ä¸€å¹´äº†ï¼Œæ—¶é—´çš„åŠ›é‡è¿˜çœŸæ˜¯å¼ºå¤§ï¼ŒæŠŠè‡ªå·±ç»™å¡‘é€ æˆäº†ä»€ä¹ˆæ ·åªæœ‰å›å¤´çœ‹çš„æ—¶å€™æ‰èƒ½çŸ¥é“ã€‚</p><p>æˆ‘å¯¹å­¦æ ¡æ²¡ä»€ä¹ˆå¥½æ„Ÿï¼Œå¯¹å‘¨å›´åŒå­¦ä¹Ÿæ²¡ä»€ä¹ˆå¤ªå¤šå¥½æ„Ÿï¼Œ4å¹´è‡ªå·±ä¹Ÿä¸çŸ¥é“è‡ªå·±å¹²äº†ä»€ä¹ˆï¼Œåªæ˜¯åŸ‹å¤´å­¦äº†å¾ˆå¤šä¸œè¥¿ï¼Œæ‰€ä»¥è¿™4å¹´ï¼Œå˜›ä¹Ÿå°±è¿™æ ·ã€‚</p><h1 id="N2åˆæ ¼"><a href="#N2åˆæ ¼" class="headerlink" title="N2åˆæ ¼"></a>N2åˆæ ¼</h1><p>æ—…æ¸¸å›æ¥ä¹‹åå‘ç°è‡ªå·±åªæœ‰ä¸€ä¸ªæœˆæ—¶é—´å°±è¦è€ƒN2äºæ˜¯å·¥ä½œä¹‹ä½™è¿˜ä¸åœçš„å»åšä¹‹å‰ä¹°æ¥æ²¡åšçš„ç»ƒä¹ å†å»æŸ¥å­—å…¸ï¼Œæœ€åè€ƒå‰ä¸€æ˜ŸæœŸè¿˜ä¹°äº†ä¸€æœ¬ä¹¦å†åšç»ƒä¹ ï¼Œç›´æ¥å°±ä¸Šäº†è€ƒåœºã€‚è€ƒå®Œå›æ¥æ„Ÿè§‰åº”è¯¥èƒ½è¿‡å§ï¼Œè™½ç„¶æœ‰ä¸€åŠçš„è¯­æ³•é¢˜æˆ‘æ˜¯çè’™çš„ï¼Œæœ‰ä¸€ç¯‡é˜…è¯»æ²¡æœ‰æ—¶é—´çœ‹ã€‚è¿™ç§æ²¡æœ‰èŒƒå›´çš„è€ƒè¯•çœŸçš„éå¸¸å“äººï¼Œåˆæˆ–è€…è¯´å› ä¸ºæ˜¯ç¬¬ä¸€æ¬¡æ­£æ­£ç»ç»è€ƒä¸€ä¸ªå®Œå…¨è‡ªå­¦çš„è¯­è¨€æ‰€ä»¥ä¼šå¦‚æ­¤å®³æ€•ã€‚</p><p>å¤ä¹ éå¸¸ç´¯ï¼Œè€ƒè¯•ä¹Ÿå¾ˆç´¯ï¼Œå¹¸å¥½æœ€åé¡ºåˆ©é€šè¿‡ï¼Œè¿˜æ˜¯å¾ˆå¼€å¿ƒçš„ï¼ˆåˆ†æ•°ä¸é«˜å•¦ï¼‰</p><h1 id="è·³æ§½å»äº†LINE"><a href="#è·³æ§½å»äº†LINE" class="headerlink" title="è·³æ§½å»äº†LINE"></a>è·³æ§½å»äº†LINE</h1><p>è¿™ç®—æ˜¯ä¸‹åŠå¹´ä¸€ç›´åœ¨åšçš„ä¸€ä»¶äº‹æƒ…å§ï¼Œä»9æœˆåˆå¼€å§‹è¯•è¯•çš„å¿ƒæ€æŠ•äº†ä¸€å°ç®€å†ï¼Œç»“æœåˆ°æœ€åé¢è¯•èµ°å®Œè¢«å‘äº†offerçœŸçš„éå¸¸éå¸¸å¼€å¿ƒåˆæ„å¤–ï¼Œä¸€ä¸ªæ˜¯LINEæ˜¯æ—¥æœ¬çš„ä¼ä¸šä¹‹ä¸­åº”è¯¥æ˜¯æˆ‘å¿ƒä¸­æœ€æƒ³å»çš„ä¸€ä¸ªä¼ä¸šï¼ŒGoogleä¹Ÿå¥½Twitterä¹Ÿå¥½ä¹Ÿå¾ˆæƒ³å»ï¼Œä½†é‚£äº›çœŸçš„æ°´å¹³å¤ªé«˜ï¼Œè‡ªå·±99%æ˜¯ä¸å¤ªå¯èƒ½çš„ï¼Œä¸è¿‡LINEçš„è¯æœ€åˆæˆ‘è§‰å¾—è‡ªå·±å¯èƒ½70%ä¸å¤ªå¯èƒ½ï¼Œä¸è¿‡æœ€åå±…ç„¶èƒ½è¿›æ˜¯éå¸¸æ„å¤–çš„ï¼Œå¦ä¸€ä¸ªæ„å¤–å°±æ˜¯è‡ªå·±å…¶å®æ—¥è¯­ä¹Ÿå°±æ˜¯ä¸‰è„šçŒ«æ°´å‡†ï¼Œä¹Ÿä¸è¦è¯´ä¸‰è„šçŒ«äº†ï¼Œä¸€è„šçŒ«å§ï¼Œé¡¶å¤šä¹Ÿå°±çœ‹çœ‹å°å­¦ç”Ÿå‘çš„æ™®é€šåŠ¨ç”»ï¼Œåœ¨è¿™ä¹‹å‰éƒ½æ²¡è·Ÿæ—¥æœ¬äººè¯´è¿‡è¯ï¼Œæ¨ç‰¹ä¹Ÿåªæ˜¯åœ¨å»æ—¥æœ¬ç©é€ä¸œè¥¿ç»™å¤ªå¤ªçš„æ—¶å€™ç»“ä¸‹çš„å¤ªå¤ªèŠå¤©ï¼ŒèŠçš„ä¹Ÿä¸å¤šè¿˜ä¸éœ€è¦å¤ªæ³¨é‡ç»†èŠ‚ï¼Œå°±è¿™ä¹ˆçƒ‚çš„æ°´å¹³ï¼Œå±…ç„¶æœ€åè¢«é‡‡ç”¨äº†ã€‚</p><p>ç„¶åå°±æ˜¯é€’ç­¾è¯ï¼Œè¿”ç­¾è¯ï¼Œå»æ—¥æœ¬æ‰¾åœ°æ–¹ç¡è§‰ï¼Œä¸Šç­è¿™æ ·çš„è¿‡ç¨‹ï¼Œç­¾è¯åªèŠ±äº†ä¸€å‘¨ä¸è¿‡é€’ç­¾è¯è·Ÿè¿”ç­¾è¯è¿˜çœŸæ˜¯è‰°è¾›å‰å‰ååå—èŠ±äº†ä¸€ä¸ªåŠæœˆï¼Œå˜›åªèƒ½ç®—æ˜¯å¥½äº‹å¤šç£¨ã€‚æœŸé—´å½“ç„¶æ˜¯åœ¨é¥¿äº†å¦ˆå½“æ²¡äº‹äººä¸€æ ·åˆ·KPIï¼Œæˆ‘è§‰å¾—å¦‚æœæˆ‘ä¸èµ°çš„è¯æˆ‘KPIè‡³å°‘æœ‰Bå§ï¼ŒAèƒ½ä¸èƒ½æœ‰å°±ä¸å¤ªæ¸…æ¥šäº†ã€‚</p><p>ç¬¬ä¸€æ¬¡ç¦»å¼€è‡ªå·±å®¶è‡ªå·±ä¸€ä¸ªäººä½ï¼Œå””å¤ªå¹¸ç¦äº†ï¼Œå°é»„æœ¬æ”¾é¢˜å•Š~~</p><p>è¦è¯´åŸå› çš„è¯ï¼Œä¹Ÿä¸å¤ªé‚£ä¹ˆå¥½æ˜ç€è¯´å§ï¼Œå˜›è‡ªå·±æ¥æ—¥æœ¬çš„æ—¶å€™çš„ç¡®ä¹Ÿæ˜¯è§‰å¾—å“‡è¿™é‡ŒçœŸå¥½çœŸèˆ’æœï¼Œæƒ³æ¥è¿™é‡Œä¸Šç­å‘¢ï¼Œå¦ä¸€ä¸ªæ˜¯2017ä¸‹åŠå¹´ä¹Ÿçš„ç¡®å‘ç”Ÿäº†å¾ˆå¤šäº‹ï¼Œè®©è‡ªå·±å¯¹å‘¨å›´çš„ç¯å¢ƒæœ‰äº†ä¸€äº›çœ‹æ³•å§ã€‚</p><h1 id="2018å¹´çš„è®¡åˆ’ï¼Ÿ"><a href="#2018å¹´çš„è®¡åˆ’ï¼Ÿ" class="headerlink" title="2018å¹´çš„è®¡åˆ’ï¼Ÿ"></a>2018å¹´çš„è®¡åˆ’ï¼Ÿ</h1><p>å¤©å‘çœ‹çœ‹å»å¹´çš„è®¡åˆ’ï¼Œä»€ä¹ˆrxJsï¼Œä»€ä¹ˆåç«¯ï¼Œä»€ä¹ˆå¯è§†åŒ–å‰ç«¯ï¼Œä»€ä¹ˆæ¸¸æˆå¼€å‘ï¼Œå®Œå…¨æ²¡æœ‰å­¦å˜›ã€‚<br>2018å¹´çš„è¯ï¼Œå…ˆæŠŠæ¬ è´¦è¿˜æ¸…å§ï¼Œä¸‹çš„åŠ¨ç”»å•¥çš„èµ¶ç´§çœ‹å®Œï¼Œä¸è¿‡æ¸¸æˆå•¥çš„åŸºæœ¬éƒ½å®Œæˆäº†è¿˜ç®—æ˜¯ï¼Œæ‘¸é±¼ä¸Šæ‰‹ï¼ˆç¬‘ï¼‰</p><p><a href="https://bgm.tv/award/2017/xingo" target="_blank" rel="noopener">Bangumi 2017</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¿™å®Œè¿™ä¸€é˜µï¼Œå›è¿‡ç¥æ¥å·²ç»æ˜¯2018å¹´çš„4æœˆäº†ï¼Œæ‰æœ‰ç©ºå¼€å§‹è¡¥ä¸€äº›ä¹‹å‰æ²¡æœ‰å¹²å®Œçš„äº‹æƒ…ï¼Œæ¯”å¦‚å†™è¿™ä¸€ç¯‡2017å¹´çš„æ€»ç»“ã€‚&lt;/p&gt;
&lt;p&gt;ä»”ç»†æƒ³æƒ³è¿˜çœŸçš„æ˜¯2017å¹´ç»å†äº†å¤ªå¤šå¤ªå¤šäº‹æƒ…ï¼Œå¾ˆå¤šäº‹æƒ…ç”šè‡³è‡ªå·±éƒ½æ²¡æœ‰æƒ³åˆ°ï¼Œæ„Ÿè§‰è‡ªå·±éå¸¸å¹¸è¿ï¼Œæ€»çš„æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¼€å¿ƒçš„ä¸€å¹´ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="notes" scheme="https://blog.xingoxu.com/categories/notes/"/>
    
    
  </entry>
  
  <entry>
    <title>Vue + TypeScript å°é²œä½“éªŒ</title>
    <link href="https://blog.xingoxu.com/2017/10/vue-typescript-early/"/>
    <id>https://blog.xingoxu.com/2017/10/vue-typescript-early/</id>
    <published>2017-10-18T07:04:23.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>é€‚ç”¨ Vue.version &lt; 2.5 &amp;&amp; Vue.version &gt;= 2.2</p></blockquote><p>å…¶å®æˆ‘ä¸ªäººä¸€å¼€å§‹å¾ˆè®¨åŒ TypeScript è¿™ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯å› ä¸ºè®¨åŒ Java çš„å•°é‡Œå·´å—¦ï¼Œçªç„¶åœ¨æˆ‘çœ¼å‰å‡ºç°äº† Javascriptï¼Œä¾¿çˆ±ä¸Šäº†è¿™é—¨è¯­è¨€ã€‚</p><p>ä½†ç°åœ¨çš„æˆ‘ç¨ç¨åˆè§‰å¾—è¿™æ ·çš„ä¸œè¥¿å…¶å®è¿˜è¡Œï¼Œåªä½¿ç”¨ç±»å‹ç³»ç»Ÿä¹Ÿå¹¶æ²¡æœ‰å®Œå…¨é™åˆ¶ Javascript æœ¬èº«çš„çµæ´»æ€§ï¼Œå¹¶ä¸”ä»–å¸®åŠ©æˆ‘ä¸ä¼šçŠ¯ä¸€äº›ä½çº§é”™è¯¯ï¼Œè€Œä¸”è¿˜èƒ½é…åˆ Visual Studio Code çš„æç¤ºï¼Œæˆ‘è§‰å¾—è¿™ä¸ªè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œæœ€è¿‘å¿™èµ·æ¥çš„æ—¶å€™ï¼Œç”šè‡³ç»å¸¸æŠŠä¸¤ä¸ªè¾“å…¥æ¡†çš„ value ç›´æ¥è¿›è¡Œæ¯”è¾ƒäº†ï¼Œäºæ˜¯å°±æƒ³å°è¯•ä¸€ä¸‹ TypeScriptã€‚</p><a id="more"></a><h1 id="å®˜æ–¹åšæ³•"><a href="#å®˜æ–¹åšæ³•" class="headerlink" title="å®˜æ–¹åšæ³•"></a>å®˜æ–¹åšæ³•</h1><p>Vue 2.2 ä»¥ä¸Šä¹‹åï¼Œå®˜æ–¹ç»™ Vueå·²ç»æ·»åŠ äº†å¾ˆå¤šç±»å‹å£°æ˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ¥å®è·µä¸€ä¸‹åœ¨å•æ–‡ä»¶ Vue ä¸­ä½¿ç”¨ TypeScriptã€‚</p><h2 id="webpack-rules-ä¸­æ·»åŠ -ts-loader-ç›¸å…³ï¼ˆè¿™é‡Œä½¿ç”¨-webpack-2ï¼‰"><a href="#webpack-rules-ä¸­æ·»åŠ -ts-loader-ç›¸å…³ï¼ˆè¿™é‡Œä½¿ç”¨-webpack-2ï¼‰" class="headerlink" title="webpack rules ä¸­æ·»åŠ  ts-loader ç›¸å…³ï¼ˆè¿™é‡Œä½¿ç”¨ webpack 2ï¼‰"></a>webpack rules ä¸­æ·»åŠ  ts-loader ç›¸å…³ï¼ˆè¿™é‡Œä½¿ç”¨ webpack 2ï¼‰</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.ts$/</span>,</span><br><span class="line">  exclude: <span class="regexp">/node_modules|vue\/src/</span>,</span><br><span class="line">  loader: <span class="string">'ts-loader'</span>,</span><br><span class="line">  options: &#123;</span><br><span class="line">    appendTsSuffixTo: [<span class="regexp">/\.vue$/</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¡¨ç¤ºå¯¹ .ts æ–‡ä»¶ç¼–è¯‘æ—¶ä½¿ç”¨ ts-loader è¿›è¡Œè¯»å–ï¼ŒappendTsSuffixTo æ˜¯ä¸ºäº†è®© tsc å¯¹ vue æ–‡ä»¶èƒ½å¤Ÿå½“æˆä¸€ä¸ª module è¿›è¡Œå¤„ç†ï¼Œä»¥è§£å†³ moudle not found çš„é—®é¢˜ï¼ˆtsc æœ¬èº«ä¸è®¤è¯† vue ç»“å°¾çš„æ–‡ä»¶ï¼‰</p><h2 id="æ·»åŠ -d-tsæ–‡ä»¶"><a href="#æ·»åŠ -d-tsæ–‡ä»¶" class="headerlink" title="æ·»åŠ  .d.tsæ–‡ä»¶"></a>æ·»åŠ  .d.tsæ–‡ä»¶</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">module</span> "*.vue" &#123;</span><br><span class="line">  <span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> Vue</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿæ˜¯ä¸ºäº†è®© vscode åœ¨ ts æ–‡ä»¶ä¸­è¯†åˆ« vue ç»“å°¾æ–‡ä»¶</p><h2 id="é¡¹ç›®æ ¹ç›®å½•ä¸‹æ·»åŠ -tsconfig-json"><a href="#é¡¹ç›®æ ¹ç›®å½•ä¸‹æ·»åŠ -tsconfig-json" class="headerlink" title="é¡¹ç›®æ ¹ç›®å½•ä¸‹æ·»åŠ  tsconfig.json"></a>é¡¹ç›®æ ¹ç›®å½•ä¸‹æ·»åŠ  tsconfig.json</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"allowSyntheticDefaultImports"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"lib"</span>: [</span><br><span class="line">      <span class="string">"dom"</span>,</span><br><span class="line">      <span class="string">"es5"</span>,</span><br><span class="line">      <span class="string">"es2015.promise"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"module"</span>: <span class="string">"es2015"</span>,</span><br><span class="line">    <span class="attr">"moduleResolution"</span>: <span class="string">"node"</span>,</span><br><span class="line">    <span class="attr">"isolatedModules"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"target"</span>: <span class="string">"es5"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"include"</span>: [</span><br><span class="line">    <span class="string">"./src/**/*.ts"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>allowSyntheticDefaultImports</code> æ˜¯ä¸ºäº†èƒ½å¤Ÿç”¨ es6 å½¢å¼çš„ importï¼Œå…¶ä»–å°±å‚ç…§ Vue å’Œå®˜ç½‘çš„å¼„äº†ä¸ªæœ€å°åŒ–çš„ jsonã€‚</p><h2 id="ä¸‡äº‹ä¿±å¤‡ï¼Œè®©æˆ‘ä»¬-npm-run-dev-è·‘èµ·æ¥ï¼"><a href="#ä¸‡äº‹ä¿±å¤‡ï¼Œè®©æˆ‘ä»¬-npm-run-dev-è·‘èµ·æ¥ï¼" class="headerlink" title="ä¸‡äº‹ä¿±å¤‡ï¼Œè®©æˆ‘ä»¬ npm run dev è·‘èµ·æ¥ï¼"></a>ä¸‡äº‹ä¿±å¤‡ï¼Œè®©æˆ‘ä»¬ <code>npm run dev</code> è·‘èµ·æ¥ï¼</h2><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾ä½¿ç”¨ Vue å®˜æ–¹çš„ webpack boilerplateï¼Œå¯¹ Hello.vue è¿›è¡Œä¸€ä¸‹æ”¹é€ ã€‚</p><p>åœ¨æ¨¡æ¿çš„ msg ä¸‹æ–°å¢ä¸€è¡Œ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Say Hello Times: &#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¹¶å°† script éƒ¨åˆ†ä¿®æ”¹æˆ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Vue, &#123; ComponentOptions &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="actionscript">  <span class="comment">// Declare the component's type</span></span></span><br><span class="line"><span class="actionscript">  <span class="class"><span class="keyword">interface</span> <span class="title">HelloInterface</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span></span><br><span class="line">    msg: string,</span><br><span class="line">    count: number,</span><br><span class="line">    sayHello(): number</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> &#123;</span></span><br><span class="line"><span class="actionscript">    HelloInterface <span class="keyword">as</span> <span class="class"><span class="keyword">interface</span></span></span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">        msg: <span class="string">'Welcome to Your Vue.js App'</span>,</span></span><br><span class="line">        count: 0</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      sayHello() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.count++;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> <span class="keyword">this</span>.count;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">// We need to explicitly annotate the exported options object</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// with the Hello type</span></span></span><br><span class="line"><span class="actionscript">  &#125; <span class="keyword">as</span> ComponentOptions&lt;HelloInterface&gt;;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„é—®é¢˜</p><p>æ¥ç€æˆ‘ä»¬æ”¹é€ ä¸€ä¸‹ App.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./assets/logo.png"</span> @<span class="attr">click</span>=<span class="string">"sayHello"</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Vue, &#123; ComponentOptions &#125; <span class="keyword">from</span> <span class="string">'vue'</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; interface <span class="keyword">as</span> helloInterface, <span class="keyword">default</span> <span class="keyword">as</span> Hello &#125; <span class="keyword">from</span> <span class="string">'./components/Hello.vue'</span>;</span></span><br><span class="line"><span class="actionscript">  <span class="class"><span class="keyword">interface</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span></span><br><span class="line">    $refs: &#123;</span><br><span class="line"><span class="actionscript">      <span class="comment">// å¯¹ helloComponent è¿›è¡Œå£°æ˜ï¼Œå¯ä»¥ä½¿ç”¨ helloComponent ä¸Šçš„æ–¹æ³•å’Œå±æ€§</span></span></span><br><span class="line">      helloComponent: helloInterface</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    methods: &#123;</span><br><span class="line">      sayHello() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.$refs.helloComponent.count++;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.$refs.helloComponent.sayHello();</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">      Hello</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">  &#125; <span class="keyword">as</span> ComponentOptions&lt;App&gt;;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåƒ refs è¿™ç§åŠ¨æ€çš„åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šçš„ä¸œè¥¿ï¼Œå¦‚æœéœ€è¦åœ¨ coding è¿‡ç¨‹ä¸­é™æ€åŒ–ï¼Œåˆ™éœ€è¦åœ¨ interface ä¸­å¯¹å…¶è¿›è¡Œå£°æ˜ï¼Œå†™çš„ code ç¨å¾®æœ‰ç‚¹å¤šï¼Œä¸è¿‡å¯ä»¥æ¥å—ã€‚</p><blockquote><p>æ³¨ï¼š App.vue ä¿®æ”¹æˆ <code>lang=ts</code> åï¼Œé¡¶å±‚çš„ main.js éœ€è¦æ¢æˆ main.ts å¹¶ä¿®æ”¹ webpack å…¥å£ç‚¹ï¼Œå¦åˆ™å‘ç”Ÿ file not found é”™è¯¯</p></blockquote><h1 id="vue-class-component"><a href="#vue-class-component" class="headerlink" title="vue-class-component"></a>vue-class-component</h1><p>å®˜æ–¹çš„å¦ä¸€ç§æ¨èåšæ³•æ˜¯ <code>vue-class-component</code>ï¼Œä¸è¿‡ demo å’Œ readme æœ‰ç‚¹å°é—®é¢˜ï¼Œå¯æŠŠæˆ‘è¿™ä¸ª TypeScript æ–°æ‰‹ç»™éš¾åˆ°å•¦ï¼Œæäº† pr å¸Œæœ›å¿«å¿«é€šè¿‡ã€‚</p><p>è®©æˆ‘ä»¬çœ‹çœ‹ä½¿ç”¨ <code>vue-class-component</code> ä¹‹åçš„ Hello.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Component <span class="keyword">from</span> <span class="string">'vue-class-component'</span></span></span><br><span class="line"></span><br><span class="line">  @Component</span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    msg: string = <span class="string">'Welcome to Your Vue.js App'</span></span></span><br><span class="line">    count: number = 0</span><br><span class="line">    sayHello(): number &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.count++;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> <span class="keyword">this</span>.count;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å†è®©æˆ‘ä»¬çœ‹çœ‹ App.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Component <span class="keyword">from</span> <span class="string">'vue-class-component'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Hello <span class="keyword">from</span> <span class="string">'./components/Hello.vue'</span>;</span></span><br><span class="line">  </span><br><span class="line">  @Component(&#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">      Hello</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span></span><br><span class="line">    $refs: &#123;</span><br><span class="line">      helloComponent: Hello</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    sayHello() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$refs.helloComponent.count++;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$refs.helloComponent.sayHello();</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>éå¸¸ Coolï¼Œéå¸¸ç²¾ç‚¼ï¼Œæš‚æ—¶æ²¡æœ‰æƒ³åˆ°å¯èƒ½ä¼šå‘ç”Ÿçš„æ²¡æ³•è§£å†³çš„å› ä¸º vue æˆ–è€… vue ç»„ä»¶ å’Œ TypeScript æ°´åœŸä¸æœçš„ç¼–è¯‘é”™è¯¯ï¼Œè€Œä¸”éƒ½æœ‰äº†ç±»å‹å’Œæç¤ºã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å°¤å¤§ä½¬è¯´åœ¨æ¥ä¸‹æ¥çš„ Vue 2.5 è¿˜ä¼šåŠ å¼ºä¸€ç³»åˆ—çš„ TypeScript æ”¯æŒï¼ˆ<a href="https://medium.com/the-vue-point/upcoming-typescript-changes-in-vue-2-5-e9bd7e2ecf08" target="_blank" rel="noopener">é“¾æ¥</a>ï¼‰ï¼Œä¸çŸ¥é“æ˜¯æ€æ ·çš„æ”¯æŒå‘¢ã€‚<br>å¦å¤–ï¼Œæ¬¢è¿å¤§å®¶åœ¨è¯„è®ºåŒºå‘è¡¨ Vue + TypeScript çš„ä½¿ç”¨åœºæ™¯ä»¥åŠä½ é‡åˆ°çš„é”™è¯¯ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;é€‚ç”¨ Vue.version &amp;lt; 2.5 &amp;amp;&amp;amp; Vue.version &amp;gt;= 2.2&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…¶å®æˆ‘ä¸ªäººä¸€å¼€å§‹å¾ˆè®¨åŒ TypeScript è¿™ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯å› ä¸ºè®¨åŒ Java çš„å•°é‡Œå·´å—¦ï¼Œçªç„¶åœ¨æˆ‘çœ¼å‰å‡ºç°äº† Javascriptï¼Œä¾¿çˆ±ä¸Šäº†è¿™é—¨è¯­è¨€ã€‚&lt;/p&gt;
&lt;p&gt;ä½†ç°åœ¨çš„æˆ‘ç¨ç¨åˆè§‰å¾—è¿™æ ·çš„ä¸œè¥¿å…¶å®è¿˜è¡Œï¼Œåªä½¿ç”¨ç±»å‹ç³»ç»Ÿä¹Ÿå¹¶æ²¡æœ‰å®Œå…¨é™åˆ¶ Javascript æœ¬èº«çš„çµæ´»æ€§ï¼Œå¹¶ä¸”ä»–å¸®åŠ©æˆ‘ä¸ä¼šçŠ¯ä¸€äº›ä½çº§é”™è¯¯ï¼Œè€Œä¸”è¿˜èƒ½é…åˆ Visual Studio Code çš„æç¤ºï¼Œæˆ‘è§‰å¾—è¿™ä¸ªè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œæœ€è¿‘å¿™èµ·æ¥çš„æ—¶å€™ï¼Œç”šè‡³ç»å¸¸æŠŠä¸¤ä¸ªè¾“å…¥æ¡†çš„ value ç›´æ¥è¿›è¡Œæ¯”è¾ƒäº†ï¼Œäºæ˜¯å°±æƒ³å°è¯•ä¸€ä¸‹ TypeScriptã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
      <category term="Front-End-Dev" scheme="https://blog.xingoxu.com/categories/dev/Front-End-Dev/"/>
    
    
  </entry>
  
  <entry>
    <title>Vue + TypeScript æ—©æœŸä½“é¨“</title>
    <link href="https://blog.xingoxu.com/ja/2017/10/vue-typescript-early/"/>
    <id>https://blog.xingoxu.com/ja/2017/10/vue-typescript-early/</id>
    <published>2017-10-10T09:33:23.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Vue.version &lt; 2.5 &amp;&amp; Vue.version &gt;= 2.2ã€€é©ç”¨ã•ã‚Œã‚‹</p></blockquote><h1 id="å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ã‚„ã‚Šæ–¹"><a href="#å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ã‚„ã‚Šæ–¹" class="headerlink" title="å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ã‚„ã‚Šæ–¹"></a>å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ã‚„ã‚Šæ–¹</h1><p>Vue 2.2 ã‹ã‚‰ã€Vue ã«ã„ã‚ã‚“ãªå…¬å¼å‹å®£è¨€ã‚’æä¾›ã—ã¦ãŠã‚Šã€ã•ã£ããã€å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã« TypeScript ã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><h2 id="webpack-rules-ã«-ts-loader-ç›¸é–¢ã‚’æ·»ä»˜ã—ã¾ã—ã‚‡ã†"><a href="#webpack-rules-ã«-ts-loader-ç›¸é–¢ã‚’æ·»ä»˜ã—ã¾ã—ã‚‡ã†" class="headerlink" title="webpack rules ã« ts-loader ç›¸é–¢ã‚’æ·»ä»˜ã—ã¾ã—ã‚‡ã†"></a>webpack rules ã« ts-loader ç›¸é–¢ã‚’æ·»ä»˜ã—ã¾ã—ã‚‡ã†</h2><blockquote><p>ã“ã£ã¡ã¯ webpack2</p></blockquote><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">  rules: [</span><br><span class="line"><span class="addition">+   &#123;</span></span><br><span class="line"><span class="addition">+     test: /\.ts$/,</span></span><br><span class="line"><span class="addition">+     exclude: /node_modules|vue\/src/,</span></span><br><span class="line"><span class="addition">+     loader: 'ts-loader',</span></span><br><span class="line"><span class="addition">+     options: &#123;</span></span><br><span class="line"><span class="addition">+       appendTsSuffixTo: [/\.vue$/]</span></span><br><span class="line"><span class="addition">+     &#125;</span></span><br><span class="line"><span class="addition">+   &#125;,</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><a id="more"></a><p>.ts ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ ts-loader ã§èª­ã¿è¾¼ã‚€<br><code>appendTsSuffixTo</code>ã¯ vue ã‚’ module ã¨ã—ã¦ tsc ã§ãƒ—ãƒ­ã‚»ã‚¹ã—ã¦ã€module not found ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ï¼ˆtsc ã¯ .vue ãƒ•ã‚¡ã‚¤ãƒ«ãŒçŸ¥ã‚‰ãªã„ï¼‰</p><h2 id="d-ts-ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹"><a href="#d-ts-ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹" class="headerlink" title=".d.ts ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹"></a>.d.ts ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹</h2><p>ã©ã‚“ãªåå‰ã‚‚ã„ã„ã€ã©ã“ã§ã‚‚ã„ã„ã€tsconfig.json ã® include PATH ã«ã„ã‚Œã°ã„ã„ã€å¿…ãš .d.ts ã‚’åå‰ã®çµ‚ã‚ã‚Šã—ã¾ã™ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">module</span> "*.vue" &#123;</span><br><span class="line">  <span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> Vue</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>vscode ã® .ts ãƒ•ã‚¡ã‚¤ãƒ«ã« .vueãƒ•ã‚¡ã‚¤ãƒ«ã‚‚çŸ¥ã‚‰ã›ã¾ã™ã€‚</p><h2 id="tsconfig-json-ã‚’ä½œæˆã™ã‚‹"><a href="#tsconfig-json-ã‚’ä½œæˆã™ã‚‹" class="headerlink" title="tsconfig.json ã‚’ä½œæˆã™ã‚‹"></a>tsconfig.json ã‚’ä½œæˆã™ã‚‹</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"allowSyntheticDefaultImports"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"lib"</span>: [</span><br><span class="line">      <span class="string">"dom"</span>,</span><br><span class="line">      <span class="string">"es5"</span>,</span><br><span class="line">      <span class="string">"es2015.promise"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"module"</span>: <span class="string">"es2015"</span>,</span><br><span class="line">    <span class="attr">"moduleResolution"</span>: <span class="string">"node"</span>,</span><br><span class="line">    <span class="attr">"isolatedModules"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"target"</span>: <span class="string">"es5"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"include"</span>: [</span><br><span class="line">    <span class="string">"./src/**/*.ts"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>allowSyntheticDefaultImports</code> ã¯ es6 ã® import ã‚’ç›´æ¥ä½¿ãˆã‚‹ã® option</p><h2 id="æº–å‚™ä¸‡ç«¯ã€npm-run-dev-ã„ãã¾ã—ã‚‡ã†ï¼"><a href="#æº–å‚™ä¸‡ç«¯ã€npm-run-dev-ã„ãã¾ã—ã‚‡ã†ï¼" class="headerlink" title="æº–å‚™ä¸‡ç«¯ã€npm run dev ã„ãã¾ã—ã‚‡ã†ï¼"></a>æº–å‚™ä¸‡ç«¯ã€<code>npm run dev</code> ã„ãã¾ã—ã‚‡ã†ï¼</h2><p>ã“ã£ã¡ã¯ vue-cli ã® webpack boilerplate ã‚’ä¾‹ã¨ã—ã¦ã€Hello.vue ã‚’æ”¹é€ ã—ã¾ã—ã‚‡ã†ã€‚</p><p>html template ã® msg ã®ä¸‹ã«</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line"><span class="addition">+ &lt;h2&gt;Say Hello Times: &#123;&#123; count &#125;&#125;&lt;/h2&gt;</span></span><br><span class="line">  &lt;h2&gt;Essential Links&lt;/h2&gt;</span><br></pre></td></tr></table></figure><p>script ã®éƒ¨åˆ†ã‚’</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Vue, &#123; ComponentOptions &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="actionscript">  <span class="comment">// Declare the component's type</span></span></span><br><span class="line"><span class="actionscript">  <span class="class"><span class="keyword">interface</span> <span class="title">HelloInterface</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span></span><br><span class="line">    msg: string,</span><br><span class="line">    count: number,</span><br><span class="line">    sayHello(): number</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> &#123;</span></span><br><span class="line"><span class="actionscript">    HelloInterface <span class="keyword">as</span> <span class="class"><span class="keyword">interface</span></span></span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">        msg: <span class="string">'Welcome to Your Vue.js App'</span>,</span></span><br><span class="line">        count: 0</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      sayHello() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.count++;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> <span class="keyword">this</span>.count;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">// We need to explicitly annotate the exported options object</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// with the Hello type</span></span></span><br><span class="line"><span class="actionscript">  &#125; <span class="keyword">as</span> ComponentOptions&lt;HelloInterface&gt;;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ã“ã†ã—ã¦æ”¹é€ ã—ã¾ã™</p><p>è¦ªã¨ã—ã¦ã® App.vue ã‚’æ”¹é€ ã—ã¦ã¿ã¦</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  &lt;div id="app"&gt;</span><br><span class="line"><span class="deletion">-   &lt;img src="./assets/logo.png"&gt;</span></span><br><span class="line"><span class="addition">+   &lt;img src="./assets/logo.png" @click="sayHello"&gt;</span></span><br><span class="line"><span class="deletion">-   &lt;hello&gt;&lt;/hello&gt;</span></span><br><span class="line"><span class="addition">+   &lt;hello ref="helloComponent"&gt;&lt;/hello&gt;</span></span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Vue, &#123; ComponentOptions &#125; <span class="keyword">from</span> <span class="string">'vue'</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; interface <span class="keyword">as</span> helloInterface, <span class="keyword">default</span> <span class="keyword">as</span> Hello &#125; <span class="keyword">from</span> <span class="string">'./components/Hello.vue'</span>;</span></span><br><span class="line"><span class="actionscript">  <span class="class"><span class="keyword">interface</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span></span><br><span class="line">    $refs: &#123;</span><br><span class="line"><span class="actionscript">      <span class="comment">// helloComponent ã‚’å®£è¨€ã™ã‚‹ã€helloComponent ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ãˆã‚ˆã†ã«ãªã‚‹ã¾ã—ãŸ</span></span></span><br><span class="line">      helloComponent: helloInterface</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    methods: &#123;</span><br><span class="line">      sayHello() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.$refs.helloComponent.count++;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.$refs.helloComponent.sayHello();</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">      Hello</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">  &#125; <span class="keyword">as</span> ComponentOptions&lt;App&gt;;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>refsã¨ã„ã£ãŸå‹•çš„ãªã‚‚ã®ã€interface ã«å®£è¨€ã—ã¦ã€typescript ã«ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã‚’ä½¿ãˆã¾ã™ã€‚</p><blockquote><p>App.vue ã® <code>script</code> ã‚’ <code>lang=ts</code> å¤‰æ›´ã™ã‚‹ã¨ã€main.js ã‚’ main.ts ã«å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€webpack ã® entry ã‚‚å¿˜ã‚Œãªã„ã§ãã ã•ã„ï¼Œãã†ã—ãªã„ã¨ file not found ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚</p></blockquote><p>ã‚³ãƒ¼ãƒ‰ã¯ã¡ã‚‡ã£ã¨å¤šã„ã­ã€å…¬å¼ã‚µã‚¤ãƒˆã«ã‚ˆã‚‹ã® <code>vue-class-component</code> ã‚’ä½¿ã£ã¦ã¿ã¾ã™ã‹ï¼Ÿ</p><h1 id="vue-class-component"><a href="#vue-class-component" class="headerlink" title="vue-class-component"></a>vue-class-component</h1><p><code>vue-class-component</code>ã® demo ã¨ readme ã¯ã¡ã‚‡ã£ã¨å•é¡ŒãŒã‚ã‚‹ã€TypeScript ã®æ–°å…¥ã‚Šã®ç§ãŒå›°ã£ãŸã€pr ã‚’æå‡ºã—ãŸã€é€Ÿããƒãƒ¼ã‚¸ã•ã‚Œã¦æ¬²ã—ã„ã€‚</p><p><code>vue-class-component</code> ã‚’ä½¿ã£ã¦ã„ã‚‹ Hello.vue ã® script éƒ¨åˆ†</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> Component <span class="keyword">from</span> <span class="string">'vue-class-component'</span>;</span><br><span class="line">ã€€</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> Hello <span class="keyword">extends</span> Vue &#123;</span><br><span class="line">  msg: <span class="built_in">string</span> = <span class="string">'Welcome to Your Vue.js App'</span></span><br><span class="line">  count: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  sayHello(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.count++;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.count;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ã§ã€App.vue</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> Component <span class="keyword">from</span> <span class="string">'vue-class-component'</span>;</span><br><span class="line"><span class="keyword">import</span> Hello <span class="keyword">from</span> <span class="string">'./components/Hello.vue'</span>;</span><br><span class="line">ã€€</span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Hello</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> App <span class="keyword">extends</span> Vue &#123;</span><br><span class="line">  $refs: &#123;</span><br><span class="line">    helloComponent: Hello</span><br><span class="line">  &#125;</span><br><span class="line">ã€€</span><br><span class="line">  sayHello() &#123;</span><br><span class="line">    <span class="keyword">this</span>.$refs.helloComponent.count++;</span><br><span class="line">    <span class="keyword">this</span>.$refs.helloComponent.sayHello();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>éšåˆ†æ¸…æ½”ã«ãªã‚Šã¾ã—ãŸã€ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã‚‚ãƒãƒƒãƒãƒªï¼ä»–ã® vue ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ TypeScript ã®ä¸å…·åˆã¯ä¸€æ™‚çš„ã«è€ƒãˆå‡ºæ¥ã¾ã›ã‚“ã€‚</p><h1 id="çµ‚ã‚ã‚Šã«"><a href="#çµ‚ã‚ã‚Šã«" class="headerlink" title="çµ‚ã‚ã‚Šã«"></a>çµ‚ã‚ã‚Šã«</h1><p>Vue 2.5ã‹ã‚‰ TypeScript ã®ã‚µãƒãƒ¼ãƒˆã¯ã©ã‚“ã©ã‚“å¢—ãˆã¾ã™ã¨<a href="https://medium.com/the-vue-point/upcoming-typescript-changes-in-vue-2-5-e9bd7e2ecf08" target="_blank" rel="noopener">è¨€ã„ã¾ã™</a>ã€ã©ã‚“ãªã‚µãƒãƒ¼ãƒˆã§ã™ã­ã€œ</p><p>æ—¥æœ¬èªã¾ã ä¸‹æ‰‹ã§ã™ã‹ã‚‰ã€å¤‰ãªã¨ã“ã‚ã„ã£ã±ã„ã¨æ€ã„ã¾ã™ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¨ãƒªã‚¢ã«æŒ‡æ‘˜ã™ã‚Œã°å¹¸ã„ã§ã™ã€‚</p><p>æœ€å¾Œã¾ã§é–²è¦§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Vue.version &amp;lt; 2.5 &amp;amp;&amp;amp; Vue.version &amp;gt;= 2.2ã€€é©ç”¨ã•ã‚Œã‚‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ã‚„ã‚Šæ–¹&quot;&gt;&lt;a href=&quot;#å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ã‚„ã‚Šæ–¹&quot; class=&quot;headerlink&quot; title=&quot;å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ã‚„ã‚Šæ–¹&quot;&gt;&lt;/a&gt;å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ã‚„ã‚Šæ–¹&lt;/h1&gt;&lt;p&gt;Vue 2.2 ã‹ã‚‰ã€Vue ã«ã„ã‚ã‚“ãªå…¬å¼å‹å®£è¨€ã‚’æä¾›ã—ã¦ãŠã‚Šã€ã•ã£ããã€å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã« TypeScript ã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;webpack-rules-ã«-ts-loader-ç›¸é–¢ã‚’æ·»ä»˜ã—ã¾ã—ã‚‡ã†&quot;&gt;&lt;a href=&quot;#webpack-rules-ã«-ts-loader-ç›¸é–¢ã‚’æ·»ä»˜ã—ã¾ã—ã‚‡ã†&quot; class=&quot;headerlink&quot; title=&quot;webpack rules ã« ts-loader ç›¸é–¢ã‚’æ·»ä»˜ã—ã¾ã—ã‚‡ã†&quot;&gt;&lt;/a&gt;webpack rules ã« ts-loader ç›¸é–¢ã‚’æ·»ä»˜ã—ã¾ã—ã‚‡ã†&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ã“ã£ã¡ã¯ webpack2&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight diff&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;module: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  rules: [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;addition&quot;&gt;+   &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;addition&quot;&gt;+     test: /\.ts$/,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;addition&quot;&gt;+     exclude: /node_modules|vue\/src/,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;addition&quot;&gt;+     loader: &#39;ts-loader&#39;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;addition&quot;&gt;+     options: &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;addition&quot;&gt;+       appendTsSuffixTo: [/\.vue$/]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;addition&quot;&gt;+     &amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;addition&quot;&gt;+   &amp;#125;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
      <category term="Front-End-Dev" scheme="https://blog.xingoxu.com/categories/dev/Front-End-Dev/"/>
    
    
  </entry>
  
  <entry>
    <title>ã„ãã¤ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹ã®è¨˜éŒ²æ–¹æ³•</title>
    <link href="https://blog.xingoxu.com/ja/2017/09/record-user-login-status-methods/"/>
    <id>https://blog.xingoxu.com/ja/2017/09/record-user-login-status-methods/</id>
    <published>2017-09-28T10:03:55.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h1><p>æ˜”ã®ã‚„ã‚Šæ–¹ã¯ã€Cookie ã«ç›´æ¥ä¿å­˜ã™ã‚‹ã€‚ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¯ã¾ã ãã‚“ãªå®‰ã„ã®çŠ¶æ³ä¸‹ã§ã€ãŸãã•ã‚“ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™»éŒ²ãã†ã„ã†ã‚¤ãƒ³ãƒ•ã‚©ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¤‰åŒ–ã—ã¦ã‚µã‚¤ãƒ³ã—ã¦ Cookie ã«ä¿å­˜ã™ã‚‹ã€‚</p><p>å¤‰åŒ–ã‚„ã‚µã‚¤ãƒ³ã¯ã€md5+saltã€ã¾ãŸã¯ secret ã‚’ä½¿ã£ã¦åŒæ–¹å‘ã®æš—å·åŒ–ã™ã‚‹ã¨ã‹ã®æ–¹æ³•ã€‚</p><p>ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«äºŒå›ã‚¢ã‚¯ã‚»ã‚¹ã¨ã—ãŸã‚‰ã€Cookieã«æŒ‡å®šã®keyã®valueã‚’æ¤œè¨¼ã™ã‚‹ã€ãã‚Œã¯ãŸã ã—ã‹ã©ã†ã‹ã€‚</p><a id="more"></a><p>ã“ã†ã‚„ã£ã¦ã„ã„ã¨ã“ã‚ã¯ï¼š<br>ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å æœ‰ãªã—ã€Cookie ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æƒ…å ±ã§ã™</p><p>ã“ã†ã‚„ã£ã¦æ‚ªã„ã¨ã“ã‚ã¯ï¼š<br>ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ç›—ã‚€ã¯ã‚„ã™ã„ã€ç‰¹ã«httpsãªã—ã€ä¸­é–“è€…æ”»æ’ƒã•ã‚ŒãŸã‚‰ã€æ‚ªã„äººã«ãƒ­ã‚°ã‚¤ãƒ³ã•ã‚ŒãŸã“ã¨ã¯ã§ãã‚‹ã€‚<br>ã¾ãŸã€åˆ¥ã€…ã«ä¿å­˜ã™ã‚‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ”¹ã–ã‚“ã•ã‚Œã‚‹ã¯ã‚„ã™ã„ã€‚</p><h1 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h1><p>è¨ˆç®—åŠ›ã¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®é€Ÿã„ç™ºå±•ã€å•é¡Œã¯æ¬¡ã€…ã«ç¾ã‚ŒãŸã€‚ä¿å­˜å¸Œæœ›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã¯ã¾ã™ã¾ã™å¤šããªã‚‹ã€Cookie ã®ã‚µã‚¤ã‚ºåˆ¶é™ã¯å°‘ãªã„ã€‚</p><p>åŸç†çš„ã«ã¯ã€Session ã¯ Cookie ã§ã™ã€‚</p><p>ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã¨ãã€ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å”¯ä¸€ã® Session ID ã‚’é…ã£ã¦Cookie ã«ä¿å­˜ã™ã‚‹ã€‚ãƒ­ã‚°ã‚¤ãƒ³ã®ã¨ãã€ã“ã® Session ID ã«ã‚ˆã‚‹ã€ã‚µãƒ¼ãƒãƒ¼ã« Session Object ã‚’ä½œã‚‹ã€ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«user idã¨ã‹ã€çŠ¶æ…‹ã¨ã„ã†ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æƒ…å ±ã‚’ä¿å­˜ã—ã¦ã„ã‚‹ã€‚</p><p>Session ID ã¯ Session Object ã‚’ä½œã‚‹ã®ã¨ãã«é…ã‚Œã‚‚å¯èƒ½ã§ã™ã€Session IDã®ä½œã‚‹æ–¹æ³•ã¯æ™‚é–“ã«ã‚ˆã‚‹ã«é™ã‚‰ãªã„ã€sidã®å”¯ä¸€ã‚’ä¿è¨¼ã™ã‚Œã°ã„ã„ã€‚</p><p>Session Object ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å ´æ‰€ã‚‚é¸ã¹ã‚‹ã€‚Sessionã¯ã¨ã¦ã‚‚å¤§äº‹ã§ã™ã¨æ€ã‚ã‚Œãªã‚‰ã€mysql ã«ä¿å­˜ã™ã‚‹ã¯å¯èƒ½ã§ã™ã€ãã†ã§ã¯ãªã„å ´åˆã¯ã€redis ã«ã€ãƒ¡ãƒ¢ãƒªã«ã‚‚å¯èƒ½ã§ã™ã€‚</p><p>ã ã‹ã‚‰ã€Sessionã¯ã¨ã¦ã‚‚ãƒ•ãƒ¬ã‚­ã‚·ãƒ–ãƒ«ã€‚</p><p>Session ã¯éå»ã®æŠ€è¡“ã§ã¯ãªã„ã€ä»Šã¯ãŸãã•ã‚“ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«ä½¿ã‚ã‚Œã¦ã„ã‚‹ã€‚ãã®åŸå› ã¯ã€httpã—ã‹å•é¡Œã„ã¾ã›ã‚“ã€‚Internet Explorer &gt;= 10 ã®å ´åˆã‚‚ CORS ã« Cookie ã®ä¼é€ãŒå¯èƒ½ã§ã™ã‹ã‚‰ã€å•é¡Œãªã„ã€‚</p><p>ã„ã„ã¨ã“ã‚ï¼š<br>ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã‚µã‚¤ãƒ‰ sid ã—ã‹è¦‹ãˆãªã„</p><p>æ‚ªã„ã¨ã“ã‚ï¼š<br>æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã€ä¸€ã¤ query å¿…è¦ã§ã™ã€‚<br>ç›—ã‚€ã‚‚å¯èƒ½ã§ã™ãŒã€Session / Cookie ã®å•é¡Œã§ã¯ãªã„ã€http ã®å•é¡Œã§ã™ã€httpã§ä½•ã‚‚è¦‹ãˆã‚‹ã€‚</p><p>ã„ã„ã¨æ‚ªã„ã¯æ™‚ä»£ã«å¿œã˜ã‚‹ã§ã™ã€Cookie ã«ä¿å­˜ã™ã‚‹ã¨ãã¯ã€ã‚µãƒ¼ãƒãƒ¼ã®è¨ˆç®—åŠ›ã¯ä½ã„ã€memcacheã‚„redisã‚‚ãªã„ã€Sessionã®æ™‚é–“ã¯ã‹ã‹ã‚‹ã€ä»Šã¯ã“ã‚Œã¯æ±ºã—ã¦æ‚ªã„ã¨ã“ã‚ã˜ã‚ƒãªã„ã€‚</p><p>Session ã¨ Cookie ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ã¨ã£ã¦ä½•ã‚’ã™ã‚‹å¿…è¦ã¯ãªã„ã€ã‚µãƒ¼ãƒãƒ¼ã¯ Set-Cookie ã® http header ã§ sid ã¨ Cookie ã®æ›´æ–°ã‚’å®Œæˆã™ã‚‹ã“ã¨ã¯ã§ãã‚‹ã€‚</p><h1 id="Token-Based"><a href="#Token-Based" class="headerlink" title="Token Based"></a>Token Based</h1><p>ä¸Šè¨˜ï¼’ã¤ã®æ–¹æ³•ã¯ã€ï¼’ã¤ã®ç•°ãªã‚‹ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ä¸€ã¤ã¯æƒ…å ±ã‚’ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã«ä¿å­˜ã™ã‚‹ã€ä¸€ã¤ã¯ã‚µãƒ¼ãƒãƒ¼ã«ã™ã‚‹ã€‚</p><p>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’åˆ†ã‘ã‚‹ã¨ãã¯ã€ä¸Šè¨˜ã®ï¼’ã¤ã‚¢ã‚¤ãƒ‡ã‚¢ã‚‚ Cookie ãªã—ã«é€²åŒ–ã™ã‚‹ã€‚</p><p>ä¸€ã¤ã¯<br>Session Token ã‚’å–ã£ã¦ã€JSONã€ã¾ãŸã¯ ä»–ã®http header ã«ä¼é€ã™ã‚‹</p><p>ä¸€ã¤ã¯<br>JWTï¼ˆJSON Web Tokenï¼‰ æƒ…å ±ã‚’ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã«ä¿å­˜ã™ã‚‹ã¨ã„ã†ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’è¡¨ã™ã€‚Cookie ã¨ã¡ã‚‡ã£ã¨ä¼¼ã¦ã„ã‚‹ã‘ã©ï¼Œæƒ…å ±ã‚’ base64 ã«å¤‰åŒ–ã—ã¦ã€secretã§ã‚µã‚¤ãƒ³ã—ã¦ã€ä¸€ç·’ã« token ã«ãªã‚‹ã€‚</p><p>ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã«ä¿å­˜ã™ã‚‹ã®ã„ã„ã¨ã“ã‚ã¯ï¼š<br>æƒ…å ±ã¯ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã«ä¿å­˜ã—ã¦ã„ã‚‹ã‹ã‚‰ã€ã‚³ãƒ¼ãƒ‰ã«ç›´æ¥å‡¦ç†ã¯ã§ãã‚‹ã€ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚¹ã¨ã‹ã®å¿ƒé…ã„ã‚‰ãªã„ã€‚<br>ã¾ãŸã€Session ã®æœŸé™åˆ‡ã‚Œã°ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã« delete ã®å¿…è¦ãŒã‚ã‚‹ã€‚</p><p>æ‚ªã„ã¨ã“ã‚ã¯ï¼š<br>æƒ…å ±å¤šããªã‚‹ã¨ãã€Token ã¯é•·ããªã‚‹ã€http request ã¯å¤§ãã„ã«ãªã‚‹ã€ä¼é€ã®æ™‚é–“ãŒã‹ã‹ã‚‹ã€‚</p><p>JWT ã® payload ã¯ base64 ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ã€èª°ã‹æ¨™æº–ã«é€šã˜ã‚Œã°ã€å†…å®¹ã‚’è¦‹ã‚‰ã‚Œã¾ã™ã€‚</p><p>Token Based èªè¨¼ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ä¿å­˜ã—ã¦ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¯å¿…è¦ã§ã™ã€ä¸€èˆ¬ã¯localStorageã§ã€‚<br>ã ã‹ã‚‰ã€Token Based èªè¨¼ã¯ XSS ã«æ”»æ’ƒã•ã‚Œã‚‹å¯èƒ½æ€§ã¯ã‚ã‚‹ã€Cookie Based èªè¨¼ã¯ CSRF ã«æ”»æ’ƒã•ã‚Œã‚‹å¯èƒ½æ€§ã¯ã‚ã‚‹ã€‚</p><h1 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h1><p>ã„ãã¤ã‹ã®å˜èªã‚’ã™ã¹ã¦ã®å ´åˆã«è¦ç´„ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€Token ã¨ Cookie ã¾ãŸ æƒ…å ±ã‚’ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã«ä¿å­˜ã™ã‚‹ã¨ã‚µãƒ¼ãƒãƒ¼ã«ã™ã‚‹ã®å ´åˆã‚’æƒ³åƒã™ã‚‹ã€ã©ã‚“ãªæ–¹æ³•ã‚’æ¡ç”¨ã—ã‚ˆã†ã‹ã€ç¾æ¥­å‹™ã‚’åŸºã«ã—ã¦ã€ã¡ã‚‡ã£ã¨é•·ã„ã®ãƒ“ã‚¸ãƒ§ãƒ³ã§é¸æŠã‚’è€ƒãˆã‚‹ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Cookie&quot;&gt;&lt;a href=&quot;#Cookie&quot; class=&quot;headerlink&quot; title=&quot;Cookie&quot;&gt;&lt;/a&gt;Cookie&lt;/h1&gt;&lt;p&gt;æ˜”ã®ã‚„ã‚Šæ–¹ã¯ã€Cookie ã«ç›´æ¥ä¿å­˜ã™ã‚‹ã€‚ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¯ã¾ã ãã‚“ãªå®‰ã„ã®çŠ¶æ³ä¸‹ã§ã€ãŸãã•ã‚“ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™»éŒ²ãã†ã„ã†ã‚¤ãƒ³ãƒ•ã‚©ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¤‰åŒ–ã—ã¦ã‚µã‚¤ãƒ³ã—ã¦ Cookie ã«ä¿å­˜ã™ã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;å¤‰åŒ–ã‚„ã‚µã‚¤ãƒ³ã¯ã€md5+saltã€ã¾ãŸã¯ secret ã‚’ä½¿ã£ã¦åŒæ–¹å‘ã®æš—å·åŒ–ã™ã‚‹ã¨ã‹ã®æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«äºŒå›ã‚¢ã‚¯ã‚»ã‚¹ã¨ã—ãŸã‚‰ã€Cookieã«æŒ‡å®šã®keyã®valueã‚’æ¤œè¨¼ã™ã‚‹ã€ãã‚Œã¯ãŸã ã—ã‹ã©ã†ã‹ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
    
  </entry>
  
  <entry>
    <title>ç”¨æˆ·ç™»å½•çŠ¶æ€ éªŒè¯æƒé™çš„æ—¶ä»£å˜è¿</title>
    <link href="https://blog.xingoxu.com/2017/09/record-user-login-status-methods/"/>
    <id>https://blog.xingoxu.com/2017/09/record-user-login-status-methods/</id>
    <published>2017-09-28T09:57:15.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h1><p>ç›´æ¥åœ¨Cookieä¸­å­˜ä¿¡æ¯å¯è°“æ˜¯ä¸Šå¤æ—¶ä»£çš„æ“ä½œäº†ï¼Œåœ¨æœåŠ¡å™¨è¿˜æ²¡æœ‰é‚£ä¹ˆä¾¿å®œçš„æƒ…å†µä¸‹ï¼Œå¥½å¤šç½‘ç«™é€‰æ‹©å°†ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯å­˜åœ¨cookieä¸­ï¼Œä»–ä»¬æŠŠç”¨æˆ·åæˆ–è€…ç”¨æˆ·idè½¬æ¢å¹¶ç­¾åä¹‹åï¼Œç›´æ¥å­˜å…¥Cookieï¼Œå¦‚æœæœ‰å…¶ä»–éœ€è¦çš„ä¿¡æ¯ï¼Œä¹Ÿæ˜¯å¦‚æ­¤æ“ä½œ</p><p>è½¬æ¢æˆ–ç­¾åå¯ä»¥æ˜¯åŠ ç›md5ï¼Œä¹Ÿå¯ä»¥æ˜¯ä½¿ç”¨secretçš„åŒå‘åŠ å¯†</p><p>ç”¨æˆ·ç¬¬äºŒæ¬¡è®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œä»£ç ä¸­å¯¹è¿™æ®µä¿¡æ¯è¿›è¡ŒéªŒè¯ï¼Œçœ‹çœ‹æ˜¯å¦æ˜¯æ­£ç¡®çš„ç­¾åçš„</p><a id="more"></a><p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼š<br>ä¸ä¼šå†å ç”¨æœåŠ¡å™¨èµ„æºï¼Œç›´æ¥å°±åœ¨cookieä¸­è¯»å–æ•°æ®ï¼Œè·å¾—ç»“æœ</p><p>åå¤„æ˜¯ï¼š<br>ç™»å½•å‡­æ®å®¹æ˜“è¢«çªƒå–ï¼Œå°¤å…¶æ˜¯é‚£ä¸ªå¹´ä»£è¿˜æ²¡æœ‰æµè¡Œhttpsï¼Œå¦‚æœè¢«ä¸­é—´äººäº†ï¼Œæˆ–è€…ä»¥å¦ä¸€ç§æ–¹å¼æ‹¿åˆ°äº†cookieï¼Œé‚£å°±ä¼šè¢«çªƒå–ç™»å½•ï¼Œå¦å¤–ï¼Œæ¯ä¸ªæ•°æ®è¿˜å¯èƒ½æ˜¯åˆ†å¼€å­˜å‚¨çš„ï¼Œå› æ­¤å®¹æ˜“è¢«ç¯¡æ”¹</p><p>å½“ç„¶é‚£æ—¶çš„äº’è”ç½‘ä¹Ÿå¹¶æ²¡æœ‰é‚£ä¹ˆå‘è¾¾ï¼Œcookieä¹Ÿå°±å­˜å­˜ç”¨æˆ·åä»€ä¹ˆçš„ç”¨äºæ˜¾ç¤º</p><h1 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h1><p>åæ¥ç½‘é€Ÿå˜å¿«äº†ï¼Œweb åº”ç”¨é«˜é€Ÿå‘å±•ï¼Œå¤§å®¶æ„è¯†åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œcookie å¤§å°ä¸å¤Ÿå•Šï¼Œcookie æ¯ä¸ª key éƒ½è¿™ä¹ˆæä¸€ä¸‹æš´éœ²å¤ªå¤šäº†ç­‰ç­‰</p><p>ä»åŸç†ä¸Šæ¥è¯´ï¼ŒSession å°±æ˜¯ Cookie</p><p>å®¢æˆ·ç«¯è¿›å…¥ç½‘ç«™åï¼ŒæœåŠ¡å™¨åˆ†é…ä¸€ä¸ª Session ID ç»™å®¢æˆ·ç«¯ç§å…¥ Cookieï¼Œç”¨æˆ·ç™»å½•æ—¶ï¼Œåœ¨æœåŠ¡å™¨æŸ¥è¯¢ Session IDï¼Œåœ¨æœåŠ¡å™¨å†™å…¥ Session Objectï¼Œè¿™ä¸ªå¯¹è±¡é‡Œå­˜äº†ç”¨æˆ·çš„ç™»å½•æ•°æ®ï¼Œæ¯”å¦‚ id å•¦ï¼Œç”¨æˆ·åå•¦ï¼Œç™»å½•çŠ¶æ€ / è§’è‰²ç­‰ç­‰</p><p>å¦å¤–åˆ†é… Session ID ä¹Ÿå¯ä»¥æ˜¯æ‡’åˆ†é…ï¼Œä¹Ÿå°±æ˜¯ç­‰åˆ°åœ¨æœåŠ¡å™¨å­˜ Session Object çš„æ—¶å€™å†åˆ†é…ä¹Ÿæ²¡æœ‰å…³ç³»ï¼ŒSession ID çš„åˆ†é…å¯ä»¥æ˜¯ç”¨ UserID æ¥è¿›è¡ŒåŠ å¯†åˆ†é…ï¼Œä¹Ÿå¯ä»¥ç”¨æ¯«ä¸ç›¸å…³çš„æ—¶é—´ç­‰ä¿¡æ¯è¿›è¡ŒåŠ å¯†åˆ†é…ï¼Œåªéœ€è¦ä¿è¯è¿™ä¸ª sid å”¯ä¸€ï¼Œä¸å®¹æ˜“è¢«ä¼ªé€ å³å¯</p><p>Session çš„å­˜æ”¾ä¹Ÿæ˜¯å¯é‡å¯è½»ï¼Œå¦‚æœè§‰å¾— Session å¾ˆé‡è¦ï¼Œé‚£ä¹ˆå¯ä»¥æ”¾å…¥ mysqlï¼Œå¦‚æœè§‰å¾— Session ä¸æ€ä¹ˆé‡è¦ï¼Œç”šè‡³å¯ä»¥æ”¾å…¥å†…å­˜ï¼Œé‡å¯ä¸¢å¤±</p><p>Session åˆ°è‡³ä»Šè¿˜æ˜¯éå¸¸éå¸¸å¤šçš„ç½‘ç«™åœ¨ç”¨ï¼ŒåŸå› å°±æ˜¯åœ¨äºå…¶å®é™¤äº† https ä»¥å¤–çš„é—®é¢˜ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼ŒIE &gt;= 10 ä¹‹åï¼ŒCookie ä¹Ÿå¯ä»¥è·¨åŸŸï¼Œé‚£ä¹ˆ Session å°±æ²¡æœ‰ä»€ä¹ˆé—®é¢˜</p><p>å¥½å¤„æ˜¯ï¼š<br>åœ¨å®¢æˆ·ç«¯é™¤äº† sid ä»¥å¤–ï¼Œçœ‹ä¸åˆ°ä»»ä½•ä¿¡æ¯ï¼Œå½“ç„¶ä¸å¤ªå®¹æ˜“ç¯¡æ”¹</p><p>åå¤„æ˜¯ï¼š<br>å– Session çš„æ—¶å€™ï¼Œæ˜¯ä¼šéœ€è¦å† query ä¸€æ¬¡çš„<br>ä¹Ÿå®¹æ˜“è¢«çªƒå–ï¼Œå½“ç„¶è¿™å¹¶ä¸æ˜¯ Session / Cookie çš„é”…ï¼Œhttp ä¸‹ï¼Œå•¥éƒ½æ˜¯ä¸€æ¸…äºŒæ¥šçš„</p><p>å¦å¤–ï¼Œä¼˜ç¼ºç‚¹éƒ½æ˜¯ç›¸å¯¹äºæ—¶ä»£æ¥è¯´çš„ï¼Œå­˜ Cookie çš„æ—¶ä»£æœåŠ¡å™¨çš„æ€§èƒ½ä¸é«˜ï¼Œä¹Ÿæ²¡æœ‰ memcache æˆ–è€… redis è¿™ç§ä¸œè¥¿ï¼Œå­˜å…¥ mysql å°±éœ€è¦å† query ä¸€æ¬¡ï¼Œè´Ÿè½½å‡è¡¡å½“ç„¶ä¸èƒ½åŒæ­¥ å†…å­˜ä¸­çš„ Sessionï¼ŒCookie æˆä¸ºäº†é¦–é€‰ï¼Œé‚£ä¹ˆç°åœ¨å‘¢ï¼Œè¿™ç‚¹ç®—åŠ›ææ€•ç®—ä¸äº†ä»€ä¹ˆï¼Œé‚£ä¹ˆ Session çš„é‚£ä¸ªåå¤„ï¼Œå°±åº”è¯¥è¢«åˆ’æ‰ï¼ŒSession ç†æ‰€å½“ç„¶æˆä¸ºäº†æµè¡Œçš„ä¼šè¯ç®¡ç†æ–¹å¼</p><p>Session å’Œ Cookie éƒ½ä¸éœ€è¦å‰ç«¯ä»‹å…¥ï¼ŒæœåŠ¡ç«¯é€šè¿‡ Set-Cookie http å¤´å°±å¯ä»¥å®Œæˆ sid å’Œ Cookie çš„æ›´æ–°</p><h1 id="Token-Based"><a href="#Token-Based" class="headerlink" title="Token Based"></a>Token Based</h1><p>ä¸Šè¾¹ä¸¤ç§æ–¹æ³•ä»£è¡¨äº†ä¸¤ç§å­˜ç™»å½•å‡­æ®çš„æ€æƒ³ï¼Œä¸€ç§æ˜¯æŠŠå‡­æ®å­˜å®¢æˆ·ç«¯ï¼Œä¸€ç§æ˜¯æŠŠå‡­æ®å­˜æœåŠ¡ç«¯</p><p>é‚£ä¹ˆéšç€å‰åç«¯åˆ†ç¦»çš„è¿åŠ¨ï¼Œä¸Šè¾¹ä¸¤ç§çš„ç™»å½•å‡­æ®çš„æ€æƒ³ä¹Ÿå‘å±•å‡ºäº†ä¸¤ç§ä¸ä½¿ç”¨ Cookie çš„æ–¹æ³•</p><p>æŠŠå‡­æ®å­˜æœåŠ¡ç«¯çš„ Sessionï¼ŒæŠŠä»–çš„Tokenï¼Œå•æ‹¿å‡ºæ¥ï¼Œåœ¨JSONä¸­ä¼ é€’ï¼Œæˆ–è€…åœ¨ http å¤´é‡Œä¼ é€’æˆ–è€…å…¶ä»–æ–¹å¼ä¼ é€’</p><p>JWTï¼ˆJSON Web Tokenï¼‰ ä»£è¡¨äº†æŠŠå‡­æ®å­˜å®¢æˆ·ç«¯çš„æ€æƒ³ï¼Œå’Œå½“æ—¶çš„ Cookie æœ‰ç‚¹åƒï¼Œç™»å½•çš„æ—¶å€™æŠŠé‚£äº›éœ€è¦çš„ä¿¡æ¯ base64 ç¼–ç ä½œä¸ºä¸€æ®µï¼Œç„¶åå†å¯¹è¿™äº›å­—æ®µç”¨ secret è¿›è¡Œç­¾åï¼Œè¿èµ·æ¥è¿™ä¹ˆä¸€æ®µ Token å»å‘ç»™å®¢æˆ·ç«¯ä½œä¸ºå‡­æ®</p><p>å‡­æ®å­˜åœ¨å®¢æˆ·ç«¯çš„å¥½å¤„æ˜¯ï¼š<br>å› ä¸ºç™»å½•çŠ¶æ€éƒ½æ˜¯è·Ÿç€å®¢æˆ·ç«¯è·‘çš„ï¼Œæ—¶æ•ˆä¿¡æ¯éƒ½å­˜åœ¨å®¢æˆ·ç«¯ï¼ŒSession å¦‚æœè¿‡æœŸäº†ï¼Œè¦å¯¹ Session æ•°æ®åº“è¿›è¡Œåƒåœ¾æ¸…ç†ï¼Œé‚£ä¹ˆå‡­æ®å­˜åœ¨å®¢æˆ·ç«¯å°±ä¸éœ€è¦ï¼Œè€Œä¸”å› ä¸ºéƒ½æ˜¯è·Ÿç€å®¢æˆ·ç«¯è·‘çš„ï¼Œåœ¨æœåŠ¡å™¨æ‰©å¤§æé›†ç¾¤ï¼Œæå¼‚åœ°å¤šæ´»ï¼Œå°±ä¸éœ€è¦è€ƒè™‘è¯»æ•°æ®åº“è¿™ç§äº‹æƒ…ï¼Œå› ä¸ºéƒ½æ˜¯å®¢æˆ·ç«¯è¯·æ±‚ä¸º based ï¼Œéšä¾¿å“ªä¸ªæœåŠ¡å™¨æ¥ handle è¯·æ±‚éƒ½æ²¡æœ‰é—®é¢˜</p><p>å‡­æ®å­˜å®¢æˆ·ç«¯åå¤„æ˜¯ï¼š<br>å½“å‡­æ®å†…å®¹è¶Šæ¥è¶Šå¤šï¼ŒToken ä¹Ÿä¼šè¶Šæ¥è¶Šé•¿ï¼Œæ¯ä¸€æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦è¿™ä¹ˆå¤§è¿™ä¹ˆé•¿çš„å†…å®¹ï¼Œæ˜¾ç„¶ä¸æ˜¯éå¸¸åˆé€‚</p><p>JWT è¿˜æœ‰ä¸ªé—®é¢˜å°±æ˜¯ä¸­é—´é‚£éƒ¨åˆ†æ˜¯ base64 ç¼–ç çš„ï¼Œå¦‚æœç†Ÿæ‚‰æ ‡å‡†çš„è¯ï¼Œç­‰äºå°±æ˜¯æ˜æ–‡å­˜å‚¨å‡­æ®äº†ï¼Œè™½ç„¶ä¸èƒ½æ”¹ï¼Œå½“ç„¶è¿˜æ˜¯èƒ½çœ‹åˆ°</p><p>Token ç±»çš„é‰´æƒéœ€è¦å‰ç«¯å‚ä¸å¹¶å­˜å‚¨ï¼Œå­˜å‚¨ä¸€èˆ¬ä¼šæ”¾åœ¨ localStorageç­‰åœ°æ–¹ï¼Œå› æ­¤å…¶å®æ˜¯æ¯”è¾ƒå®¹æ˜“å—åˆ° XSS çš„å½±å“<br>Cookie ç±»çš„é‰´æƒå®¹æ˜“å—åˆ° CSRF çš„å½±å“</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å…¶å®åªè¨€ç‰‡è¯­è¿˜æ˜¯æ²¡æ³•æ¦‚æ‹¬åˆ°æ‰€æœ‰çš„æƒ…å†µï¼Œåªèƒ½å¤§ä½“çš„å¯¹Token æˆ–è€… Cookie ä»¥åŠ å‡­æ®å­˜æœåŠ¡ç«¯æˆ–è€…å®¢æˆ·ç«¯çš„ä¼˜ç¼ºç‚¹è¿›è¡Œæƒ³è±¡ï¼Œç©¶ç«Ÿå»ä½¿ç”¨å“ªä¸€ç§é‰´æƒæ–¹å¼ï¼Œè¿˜æ˜¯åº”è¯¥åŸºäºä¸šåŠ¡ï¼Œå¯¹ä¸šåŠ¡æœ‰éå¸¸æ·±å…¥çš„ç†è§£ï¼Œä»¥åŠç¨å¸¦ä¸€äº›é•¿è¿œçš„æ€è€ƒ</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Cookie&quot;&gt;&lt;a href=&quot;#Cookie&quot; class=&quot;headerlink&quot; title=&quot;Cookie&quot;&gt;&lt;/a&gt;Cookie&lt;/h1&gt;&lt;p&gt;ç›´æ¥åœ¨Cookieä¸­å­˜ä¿¡æ¯å¯è°“æ˜¯ä¸Šå¤æ—¶ä»£çš„æ“ä½œäº†ï¼Œåœ¨æœåŠ¡å™¨è¿˜æ²¡æœ‰é‚£ä¹ˆä¾¿å®œçš„æƒ…å†µä¸‹ï¼Œå¥½å¤šç½‘ç«™é€‰æ‹©å°†ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯å­˜åœ¨cookieä¸­ï¼Œä»–ä»¬æŠŠç”¨æˆ·åæˆ–è€…ç”¨æˆ·idè½¬æ¢å¹¶ç­¾åä¹‹åï¼Œç›´æ¥å­˜å…¥Cookieï¼Œå¦‚æœæœ‰å…¶ä»–éœ€è¦çš„ä¿¡æ¯ï¼Œä¹Ÿæ˜¯å¦‚æ­¤æ“ä½œ&lt;/p&gt;
&lt;p&gt;è½¬æ¢æˆ–ç­¾åå¯ä»¥æ˜¯åŠ ç›md5ï¼Œä¹Ÿå¯ä»¥æ˜¯ä½¿ç”¨secretçš„åŒå‘åŠ å¯†&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·ç¬¬äºŒæ¬¡è®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œä»£ç ä¸­å¯¹è¿™æ®µä¿¡æ¯è¿›è¡ŒéªŒè¯ï¼Œçœ‹çœ‹æ˜¯å¦æ˜¯æ­£ç¡®çš„ç­¾åçš„&lt;/p&gt;
    
    </summary>
    
    
      <category term="dev" scheme="https://blog.xingoxu.com/categories/dev/"/>
    
    
  </entry>
  
  <entry>
    <title>æ—¥æœ¬èªãƒ–ãƒ­ã‚°å§‹å‹•</title>
    <link href="https://blog.xingoxu.com/ja/2017/08/hello-jp-world/"/>
    <id>https://blog.xingoxu.com/ja/2017/08/hello-jp-world/</id>
    <published>2017-08-26T08:55:10.000Z</published>
    <updated>2020-07-09T04:27:52.519Z</updated>
    
    <content type="html"><![CDATA[<p>ã“ã‚“ã«ã¡ã‚ã€ã¯ã˜ã‚ã¾ã—ã¦ã€ã“ã¡ã‚‰ã¯ xingo ã•ã‚“ã®æ—¥æœ¬èªãƒ–ãƒ­ã‚°ï¼</p><p>æ—¥æœ¬èªã¾ã ä¸‹æ‰‹ã§ã™ã€ã©ã†ãã€ãŠæ°—è»½ã„ã«æŒ‡å°ã—ã¾ã™ã€ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼</p><p>ã•ã¦ã€ã“ã®ãƒ–ãƒ­ã‚°ã§ã™ãŒã€ã¾ãšã¯ã©ã®ã‚ˆã†ãªã‚‚ã®ã‹ã”èª¬æ˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><ul><li>xingo ã•ã‚“ã®æŠ€è¡“ç›¸é–¢</li><li>xingo ã•ã‚“ã®ä½œå“</li><li>xingo ã•ã‚“ã®æ—¥å¸¸ç”Ÿæ´»</li><li>xingo ã•ã‚“ã®æ—…è¡Œ</li></ul><p>ã“ã®ã‚ˆã†ãªæ„Ÿã˜ã§æœ¬ç•ªã¾ã§ãŠä»˜ãåˆã„ã„ãŸã ã‘ãŸã‚‰å¹¸ã„ã§ã™</p><p>ã§ã¯ã€ã¾ãŸæ¬¡å›</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ã“ã‚“ã«ã¡ã‚ã€ã¯ã˜ã‚ã¾ã—ã¦ã€ã“ã¡ã‚‰ã¯ xingo ã•ã‚“ã®æ—¥æœ¬èªãƒ–ãƒ­ã‚°ï¼&lt;/p&gt;
&lt;p&gt;æ—¥æœ¬èªã¾ã ä¸‹æ‰‹ã§ã™ã€ã©ã†ãã€ãŠæ°—è»½ã„ã«æŒ‡å°ã—ã¾ã™ã€ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼&lt;/p&gt;
&lt;p&gt;ã•ã¦ã€ã“ã®ãƒ–ãƒ­ã‚°ã§ã™ãŒã€ã¾ãšã¯ã©ã®ã‚ˆã†ãªã‚‚ã®ã‹ã”èª¬æ˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;xi
      
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://blog.xingoxu.com/categories/uncategorized/"/>
    
    
  </entry>
  
</feed>
